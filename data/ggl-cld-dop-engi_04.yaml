- en: '*Chapter 3*: Understanding Monitoring and Alerting to Target Reliability'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第三章*：理解监控和告警以针对可靠性'
- en: '**Reliability** is the most critical feature of a service or a system. **Site
    Reliability Engineering** (**SRE**) prescribes specific technical tools or practices
    that help measure characteristics to define and track reliability, such as **SLAs**,
    **SLOs**, **SLIs**, and **Error** **Budgets**. [*Chapter 2*](B15587_02_Final_ASB_ePub.xhtml#_idTextAnchor038),
    *SRE Technical Practices – Deep Dive*, took a deep dive into these SRE technical
    practices across multiple topics, including a blueprint for a well-defined SLA,
    the need for SLOs to achieve SLAs, the guidelines for setting SLOs, the need for
    SLIs to achieve SLOs, the different types of SLIs based on user journey categorization,
    different sources to measure SLIs, the importance of error budgets, and how to
    set error budgets to make a service reliable.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '**可靠性**是服务或系统最关键的特性。**站点可靠性工程**（**SRE**）规定了帮助衡量特性、定义和跟踪可靠性的特定技术工具或实践，如**SLA**、**SLO**、**SLI**和**错误预算**。[*第二章*](B15587_02_Final_ASB_ePub.xhtml#_idTextAnchor038)，*SRE技术实践
    – 深入分析*，深入探讨了这些SRE技术实践，涵盖多个主题，包括制定明确SLA的蓝图、为实现SLA而需要SLO、设定SLO的指南、为实现SLO而需要SLI、基于用户旅程分类的不同SLI类型、测量SLI的不同来源、错误预算的重要性以及如何设定错误预算以保证服务的可靠性。'
- en: 'SLAs are external promises made to the customer, while SLOs are internal promises
    that need to be met so that SLAs are not violated. This raises a raft of important
    questions:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: SLA（服务水平协议）是对客户的外部承诺，而SLO（服务水平目标）是需要满足的内部承诺，以确保SLA不会被违反。这引发了一系列重要问题：
- en: How to observe SLAs for a service so that user or customer expectations are
    met
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何观察服务的SLA，以满足用户或客户的期望
- en: How to observe SLOs for SLAs so that the service is reliable, and SLAs are met
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何观察SLO，以确保服务可靠并满足SLA
- en: How to observe SLIs for SLOs so that the service is reliable, and SLAs are met
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何观察SLI，以确保SLO可靠并满足SLA
- en: The preceding questions are critical because it not only has an impact on a
    user's expectations regarding the service, but also leads to an imbalance between
    development velocity to deliver new features versus system reliability. This ultimately
    impacts the promised SLAs, leading to financial or loyalty repercussions. So,
    in simple terms, the main goal is to identify how to track SRE technical practices
    to target system reliability.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 以上问题至关重要，因为它不仅影响用户对服务的期望，还可能导致在开发新功能的速度与系统可靠性之间的不平衡。这最终会影响承诺的SLA，从而导致财务或忠诚度方面的后果。因此，简单来说，主要目标是识别如何跟踪SRE技术实践，以针对系统可靠性。
- en: 'To track SRE technical practices, three fundamental concepts are required:
    **Monitoring**, **Alerting**, and **Time Series**. Monitoring is the process of
    monitoring key indicators that represent system reliability. Alerting is the process
    of alerting or reporting when the key indicators monitored fall below an acceptable
    threshold or condition. Monitoring and alerting are configured as a function of
    time. This means that the data needs to be collected at successive, equally spaced
    points in time representing a sequence of discrete-time data. This sequence of
    discrete-time data is also known as a time series.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 为了跟踪SRE技术实践，需要三个基本概念：**监控**、**告警**和**时间序列**。监控是监测代表系统可靠性的关键指标的过程。告警是当监测的关键指标低于可接受阈值或条件时触发告警或报告的过程。监控和告警是基于时间来配置的。这意味着数据需要在连续、等间隔的时间点上收集，代表一系列离散时间数据。这一系列离散时间数据也称为时间序列。
- en: 'In this chapter, we''re going to explore the following topics and their role
    in relation to target system reliability:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将探讨以下主题及其在目标系统可靠性方面的作用：
- en: '**Monitoring**: Feedback loop, monitoring types, and golden signals?'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**监控**：反馈环路、监控类型和黄金信号？'
- en: '**Alerting**: Key attributes and approaches for an alerting strategy?'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**告警**：告警策略的关键属性和方法是什么？'
- en: '**Time series**: Structure, cardinality, and metric types?'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**时间序列**：结构、基数和度量类型？'
- en: Understanding monitoring
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解监控
- en: '**Monitoring** is defined by Google SRE as the action of collecting, processing,
    aggregating, and displaying real-time quantitative data about a system, such as
    query counts and types, error counts and types, processing times, and server lifetimes.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '**监控**被Google SRE定义为收集、处理、汇总和显示系统的实时定量数据的行为，例如查询次数和类型、错误次数和类型、处理时间和服务器生命周期。'
- en: In simple terms, the essence of monitoring is to verify whether a service or
    an application is behaving as expected. Customers expect a service to be reliable
    and delivering the service to the customer is just the first step. But ensuring
    that the service is reliable should be the desired goal. To achieve this goal,
    it is important to explore key data, otherwise also known as metrics. Examples
    of some metrics can be tied to uptime, resource usage, network utilization, and
    application performance.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 简单来说，监控的本质是验证一个服务或应用程序是否按预期行为运行。客户期望服务是可靠的，而将服务交付给客户只是第一步。但确保服务的可靠性应是目标。为了实现这一目标，重要的是探索关键数据，也就是所谓的指标。某些指标的例子可以与正常运行时间、资源使用、网络利用率和应用性能相关。
- en: Monitoring is the means of exploring metric data and providing a holistic view
    of a system's health, which is a reflection of its reliability. Apart from metric
    data, monitoring can include data from text-based logging, event-based logging,
    and distributed tracing. The next topic details how monitoring acts as a continuous
    feedback loop that is critical to continuously improving system reliability by
    providing constant feedback.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 监控是探索指标数据并提供系统健康状况的整体视图的手段，系统的健康状况反映了其可靠性。除了指标数据，监控还可以包括来自文本日志、事件日志和分布式追踪的数据。下一个主题将详细说明监控如何作为一个持续的反馈循环，对通过持续反馈不断改进系统可靠性至关重要。
- en: Monitoring as a feedback loop
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 监控作为反馈循环
- en: The ultimate goal is to build a reliable system. For a system to be reliable,
    the system needs to be continuously observed, in terms of understanding the system's
    internal states based on its external outputs. This process is known as **o****bservability**.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 最终目标是建立一个可靠的系统。为了让系统具备可靠性，需要持续地观察系统，根据其外部输出理解系统的内部状态。这个过程称为**可观察性**。
- en: Observability helps to identify performance bottlenecks or investigate why a
    request failed. But for a system to be observable, it is important to collect
    and track several sources of outputs related to the health of the application.
    These outputs give insights into the application's health and identify any outstanding
    problems. This is referred to as monitoring. So, monitoring provides inputs that
    help a system to be observable. In simple terms, *monitoring indicates when something
    is wrong, while observability helps to show why something went wrong*.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 可观察性有助于识别性能瓶颈或调查请求失败的原因。但为了使系统具备可观察性，重要的是收集和追踪多个与应用健康状况相关的输出。这些输出提供了应用健康状况的洞察，并识别任何潜在问题。这就是所谓的监控。因此，监控提供了有助于系统可观察性的输入。简单来说，*监控表明何时出现问题，而可观察性则帮助展示问题发生的原因*。
- en: 'Once an application is deployed, there are four primary areas across which
    the application needs to be inspected or otherwise monitored:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦应用程序部署完成，应用需要在四个主要领域中进行检查或监控：
- en: Verify an application's performance against the application objectives and identify
    any deviations in performance by raising relevant questions.
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 验证应用程序的性能是否符合应用目标，并通过提出相关问题来识别性能偏差。
- en: Analyze data collected by the application over a period of time.
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分析应用程序在一段时间内收集的数据。
- en: Alert key personnel when key issues are identified through insights or data
    analysis.
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当通过洞察或数据分析识别出关键问题时，及时通知相关人员。
- en: Debug the captured information to understand the root cause of an identified
    problem.
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调试捕获的信息以理解已识别问题的根本原因。
- en: These areas or categories provide a **continuous feedback loop** as part of
    monitoring the system. This feedback helps to continuously improve the system
    by identifying issues, analyzing the root cause, and resolving the same. Each
    of the four categories mentioned is elaborated on in this chapter to provide further
    insights.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这些领域或类别提供了**持续反馈循环**，作为监控系统的一部分。这个反馈有助于通过识别问题、分析根本原因并解决问题来持续改进系统。本章将详细阐述这四个类别，提供更深入的洞察。
- en: One of the key aspects of monitoring is to raise relevant questions pertaining
    to the health of the system. This is covered as the next topic.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 监控的关键方面之一是提出与系统健康相关的问题。这个内容将在下一个主题中进行讨论。
- en: Raising relevant questions
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提出相关问题
- en: 'It is important to raise relevant questions to monitor a system''s health post-deployment.
    These questions provide feedback on how the system is performing. Here are some
    questions to define where monitoring the service/system can effectively provide
    a feedback loop:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在部署后，提出相关问题来监控系统健康至关重要。这些问题提供了关于系统性能的反馈。以下是一些问题，帮助定义如何通过监控服务/系统来有效提供反馈循环：
- en: Is the size of the database growing faster than anticipated?
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据库的大小是否比预期增长得更快？
- en: Has the system slowed down after taking the latest software update of a specific
    system component?
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 系统在更新了特定系统组件的最新软件后是否变得更慢？
- en: Can the use of new techniques aid system performance (such as the use of **Memcached**
    to improve caching performance)?
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新技术的使用是否能帮助提升系统性能（例如使用**Memcached**来提高缓存性能）？
- en: What changes are required to ensure that the service/system can accept traffic
    from a new geographic location?
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为确保服务/系统能够接受来自新地理位置的流量，需要做哪些更改？
- en: Are traffic patterns pointing to a potential hack of the service/system?
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 交通模式是否指向潜在的服务/系统攻击？
- en: The key to answering the preceding questions is to analyze the data at hand.
    The next topic introduces the possibilities as a result of data analysis.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 解答前面问题的关键是分析手头的数据。接下来的主题介绍了数据分析带来的可能性。
- en: Long-term trend analysis
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 长期趋势分析
- en: 'Data analysis always leads to a set of trends or patterns. Monitoring these
    trends can lead to one or more of the following possibilities:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 数据分析总是会导致一组趋势或模式。监控这些趋势可能会导致以下一种或多种可能性：
- en: Point to an existing issue.
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 指向一个现有的问题。
- en: Uncover a potential issue.
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发现潜在问题。
- en: Improve system performance to handle a sudden period of increased traffic.
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提升系统性能以应对突发的流量增长。
- en: Influence experimentation of new system features to proactively avoid issues.
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 影响新系统功能的实验，以主动避免问题。
- en: Data analysis is key to ensuring that a system is performing as expected and
    helps in identifying any outstanding potential issues. Data analysis can be done
    manually by humans or can be programmed to be done by a system. The intent to
    identify the root cause once an incident has occurred is referred to as debugging
    and is introduced as the next key topic in this discussion regarding feedback
    loops.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 数据分析是确保系统按预期运行的关键，并有助于识别任何潜在的突出问题。数据分析可以由人工手动完成，也可以通过系统编程自动完成。在发生事件后识别根本原因的过程称为调试，这是本次讨论关于反馈循环的下一个关键主题。
- en: Debugging
  id: totrans-41
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 调试
- en: Debugging allows ad hoc retrospective analysis to be conducted from the information
    gathered through analyzing data. It helps to answer questions such as what are
    the other events that happened around the same time when an event occurred.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 调试允许通过分析数据收集的信息进行临时的回顾性分析。它有助于回答诸如“在事件发生的同时，还有哪些其他事件发生”的问题。
- en: Any software service or system is bound to have unforeseen events or circumstances.
    These events are triggered due to an outage or loss of data or monitoring failure
    or the need for toil to perform a manual intervention. The active events are then
    responded to by either automated systems or humans. However, the response is based
    on the analysis of signal data that comes through the monitoring systems. These
    signals evaluate the impact and escalate the situation as needed and help to formulate
    an initial response.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 任何软件服务或系统都难免会遇到不可预见的事件或情况。这些事件可能是由于停机、数据丢失、监控失败或需要人工干预等原因触发的。然后，自动化系统或人工将对这些主动事件作出响应。然而，响应是基于通过监控系统传来的信号数据的分析。这些信号评估影响，并在需要时提升问题，并帮助制定初步响应。
- en: Debugging is also key to an effective post-mortem technique that includes updating
    documentation as needed, performing root cause analysis, communicating the details
    of the events across teams to foster knowledge sharing, and coming up with a list
    of preventive actions.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 调试也是有效事后分析技术的关键，包括根据需要更新文档，进行根本原因分析，跨团队沟通事件细节以促进知识共享，并列出预防措施。
- en: The next topic in the discussion on feedback loops focuses on alerting. Alerting
    is essential for notifying either before an event occurs or as soon as possible
    after an event occurs.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 关于反馈循环的下一个主题集中在警报上。警报对于在事件发生之前或事件发生后尽快通知至关重要。
- en: Alerting
  id: totrans-46
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 警报
- en: Alerting is a key follow-up to data analysis and informs the problem at hand.
    Real-time, or near-real-time, alerting is critical in mitigating the problem and
    potentially also identifying the root cause.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 警报是数据分析的关键后续步骤，并能够告知当前问题。实时或接近实时的警报对于缓解问题至关重要，并且有可能帮助识别根本原因。
- en: 'Alerting rules can be complex in reflecting a sophisticated business scenario
    and notifications can be sent when these rules are violated. Common means of notification
    include the following:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 警报规则可能在反映复杂的业务场景时变得复杂，当这些规则被违反时，可以发送通知。常见的通知方式包括：
- en: An email (that indicates something happened)
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一封电子邮件（表明发生了某些事情）
- en: A page (that calls for immediate attention)
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一页（要求立即关注）
- en: A ticket (that triggers the need to address an issue sooner rather than later)
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一张票（提示需要尽快处理问题）
- en: In [*Chapter 2*](B15587_02_Final_ASB_ePub.xhtml#_idTextAnchor038), *SRE Technical
    Practices – Deep Dive*, we discussed the implications of setting reliability targets.
    For example, if the reliability target is set to 4 9's of reliability (that is,
    99.99%) then this translates to 4.38 minutes of downtime in a 30-day period. This
    is not enough time for a human to be notified and then intervene. However, a system
    can be notified and can potentially take steps to remediate the issue at hand.
    This is accomplished through alerting.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在 [*第 2 章*](B15587_02_Final_ASB_ePub.xhtml#_idTextAnchor038)，*SRE 技术实践 - 深度剖析*
    中，我们讨论了设定可靠性目标的影响。例如，如果可靠性目标设定为 4 个 9（即 99.99%），那么这就意味着在 30 天期间最多允许 4.38 分钟的停机时间。这段时间对于人类来说不足以通知并干预。然而，系统可以接收到通知，并且有可能采取措施来修复当前问题。这是通过警报实现的。
- en: These topics attempt to elaborate on why monitoring can be used as a feedback
    loop. This is critical in SRE because the goal of SRE is to maintain a balance
    between releasing new features and system reliability. Monitoring helps to identify
    issues in a timely manner (as they occur), provide an alert (when they do occur),
    and provide data to debug. This is key to understanding how an error budget is
    tracked over a period. More issues will lead to a faster burn of the error budget
    and thereby it becomes more important to stabilize at that point rather than release
    new features. However, if monitoring provides information that indicates that
    the current system is stable, then there will be a significant error budget remaining
    to prioritize new features over system stability.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 这些主题试图阐述为什么监控可以作为一个反馈环路。这在 SRE 中至关重要，因为 SRE 的目标是保持新功能发布和系统可靠性之间的平衡。监控有助于及时识别问题（当问题发生时），提供警报（当问题发生时），并提供调试数据。这对于理解如何在一段时间内跟踪错误预算至关重要。更多的问题会导致错误预算更快地消耗，因此在此时，稳定系统比发布新功能更为重要。然而，如果监控提供的信息表明当前系统是稳定的，那么将会有相当多的错误预算剩余，从而可以将新功能优先于系统稳定性。
- en: Given that we have established monitoring as an essential element in providing
    continuous feedback to achieve continuous improvement, it is also equally important
    to understand the common misconceptions to avoid. This will be covered as the
    next topic.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于我们已经将监控确立为提供持续反馈以实现持续改进的必要元素，同样重要的是理解需要避免的常见误解。下一主题将讨论这一点。
- en: Monitoring misconceptions to avoid
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 需要避免的监控误解
- en: 'There are several common misconceptions when it comes to setting up monitoring
    for a service or system. The following is a list of such misconceptions that should
    be avoided:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在为服务或系统设置监控时，存在一些常见的误解。以下是应避免的这些误解的列表：
- en: Monitoring should be regarded as a specialized skill that requires a technical
    understanding of the components involved and requires a functional understanding
    of the application or even the domain. This skill needs to be cultivated within
    the team that's responsible for maintaining the monitoring systems.
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控应被视为一种专业技能，要求对相关组件具有技术理解，并需要对应用程序甚至领域有功能性理解。这项技能需要在负责维护监控系统的团队中培养。
- en: There is no all-in-one tool to monitor a service or system. In many situations,
    monitoring is achieved using a combination of tools or services. For example,
    the latency of an API call can be monitored by tools such as *Grafana*, but the
    detailed breakdown of the API calls across specific methods, including the time
    taken for a database query, can be monitored using a tool such as *Dynatrace*.
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 没有一种万能工具可以监控服务或系统。在许多情况下，监控是通过组合多个工具或服务来实现的。例如，API调用的延迟可以通过*Grafana*等工具进行监控，但特定方法的API调用详细分解，包括数据库查询所用的时间，可以使用*Dynatrace*等工具进行监控。
- en: Monitoring shouldn't be limited to one viewpoint and instead cover multiple
    viewpoints. The things that matter to the end consumer might be different to what
    matters to the business, and may also differ from the viewpoint of the service
    provider.
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控不应局限于一种视角，而应涵盖多种视角。最终消费者关心的事情可能与企业关心的不同，也可能与服务提供商的视角不同。
- en: Monitoring is never limited to a single service. It could be extended to a set
    of related or unrelated services. For example, it is required to monitor a caching
    service as a service related to a web server. Similarly, it is important to monitor
    directly unrelated services, such as the machine or cluster hosting the web server.
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控从来不局限于单一服务。它可以扩展到一组相关或不相关的服务。例如，需要监控与Web服务器相关的缓存服务。同样，监控与之直接无关的服务也很重要，例如托管Web服务器的机器或集群。
- en: Monitoring doesn't always have to be complex. There may be complex business
    conditions that need to be checked with a combination of rules, but in many cases,
    monitoring should follow the **Keep it Simple Stupid** (**KISS**) principle.
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控不一定总是复杂的。可能有需要通过规则组合来检查的复杂业务条件，但在许多情况下，监控应该遵循**保持简单傻瓜**（**KISS**）原则。
- en: Establishing monitoring for a distributed system should focus on individual
    services that make up the system and should not solely focus on the holistic operation.
    For example, the latency of a request can be longer than expected. The focus should
    be on the elements or underlying services that cumulatively contribute to the
    request latency (which includes method calls and query responses).
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为分布式系统建立监控应重点关注构成系统的各个服务，而不应仅仅关注整体运作。例如，请求的延迟可能比预期的更长。重点应该放在那些共同导致请求延迟的元素或底层服务上（包括方法调用和查询响应）。
- en: The phrase *single pane of glass* is often associated with effective monitoring,
    where a pane of glass metaphorically refers to a management console that collects
    data from multiple sources representing all possible services. But merely displaying
    information from multiple sources doesn't provide a holistic view of the relationships
    between the data or an idea of what could possibly go wrong. Instead, a single
    pane of glass should deliver a logical grouping of multiple services into a single
    workspace by establishing the correlation between monitoring signals.
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: “*单一玻璃窗*”这个短语通常与有效的监控相关联，其中“玻璃窗”比喻地指的是一个管理控制台，该控制台从多个来源收集数据，代表所有可能的服务。但仅仅显示来自多个来源的信息并不能提供数据之间关系的整体视图，也无法了解可能出现的问题。相反，单一玻璃窗应该通过建立监控信号之间的关联，将多个服务逻辑性地组合成一个工作区。
- en: 'Monitoring should not only focus on the symptoms, but also on their causes.
    Let''s look at some examples:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 监控不应该仅仅关注症状，还应关注其原因。让我们来看一些例子：
- en: '![](img/B15587_03_Table-01.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15587_03_Table-01.jpg)'
- en: Essentially, the focus of monitoring should not be on collecting or displaying
    data, but instead *on establishing a relationship between what's broken and a
    potential reason for why it's broken*. There are multiple sources from which monitoring
    data can be collected or captured. This will be discussed as the next topic.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 本质上，监控的重点不应该是收集或显示数据，而应*关注建立问题和可能原因之间的关系*。监控数据可以从多个来源收集或捕获。这个话题将在下一部分讨论。
- en: Monitoring sources
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 监控源
- en: 'Monitoring data is essential in monitoring systems. There are two common sources
    of monitoring data. The first source is **metrics**:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 监控数据在监控系统中至关重要。监控数据有两个常见来源。第一个来源是**度量指标**：
- en: Metrics represent numerical measurements of resource usage or behavior that
    can be observed and collected across the system over many data points at regular
    time intervals. Typical time intervals for collecting metrics could be once per
    second, once per minute, and so on.
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 指标代表资源使用或行为的数值度量，这些度量可以跨系统在多个数据点上定期收集并观察。收集指标的典型时间间隔可以是每秒一次、每分钟一次，等等。
- en: Metrics can be gathered from low-level metrics provided by the operating system.
    In most cases, the low-level metrics are readily available as they are specific
    to a resource, such as database instances, virtual machines, and disks.
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 指标可以从操作系统提供的低级指标中收集。在大多数情况下，低级指标是现成可用的，因为它们是特定于某一资源的，例如数据库实例、虚拟机和磁盘。
- en: Metrics can also be gathered from higher-level types of data tied to a specific
    component or application. In such cases, custom metrics should be created and
    exposed through the process of instrumentation.
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 指标也可以通过与特定组件或应用程序相关的更高层次数据类型来收集。在这种情况下，应该创建自定义指标并通过仪器化过程进行暴露。
- en: Metrics are used as input to display less granular real-time data in dashboards
    or trigger alerts for real-time notification.
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 指标用作输入，显示仪表板中较少粒度的实时数据，或触发实时通知的警报。
- en: 'The next source is **logs**:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个源是**日志**：
- en: Logs represent granular information of data and are typically written in large
    volumes.
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日志代表数据的细粒度信息，通常以大量写入的形式存在。
- en: Logs are not real time. Logs always have an inherent delay between when an event
    occurs and when it is visible in logs.
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日志不是实时的。日志总是存在固有的延迟，即事件发生后，直到它在日志中可见之间存在时间差。
- en: Logs are used to find the root cause of an issue as the key data required for
    analysis is usually not present as a metric.
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日志用于找出问题的根本原因，因为分析所需的关键数据通常不是以指标的形式存在。
- en: Logs can be used to generate detailed non-time-sensitive reports using log processing
    systems.
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日志可以用于生成详细的非时间敏感报告，使用日志处理系统进行处理。
- en: Logs can be used to create metrics by running queries against a stream of logs
    using batch processing systems.
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以通过使用批处理系统对日志流运行查询，将日志转换为指标。
- en: Logging versus monitoring
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 日志记录与监控
- en: '**Logging** provides insights into the execution of an application. Logging
    can capture event records and the minutest details, along with actionable errors
    that could be converted into alerts. Logging essentially describes what could
    have happened and provides data to investigate an issue.'
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**日志记录**提供了关于应用程序执行的洞察。日志记录可以捕获事件记录和最微小的细节，以及可以转换为警报的可操作错误。日志本质上描述了可能发生的情况，并提供了调查问题的数据。'
- en: '**Monitoring**, on the other hand, provides capabilities to detect issues as
    they happen, and alert as needed. In fact, monitoring requires logging as an essential
    source of information. Also, the inverse is true, that logging requires monitoring.
    This is because an application with fantastic logging but no monitoring is not
    going to help the end user.'
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**监控**则提供了在问题发生时检测并根据需要进行警报的能力。事实上，监控需要日志作为关键信息来源。而且，反之亦然，日志也需要监控。这是因为，只有拥有出色日志记录但没有监控的应用程序，并不会帮助最终用户。'
- en: To summarize, both metrics and logs are popular choices as monitoring sources.
    They are used in different situations and, in most cases, a combination of both
    sources is always recommended. Metrics are a good source if there are internal
    or external components that provide information about events and performance.
    Logs are best suited to track various events that an application goes through.
    Metrics can also be created from logs. The next topic discusses a few of the recommended
    monitoring strategies.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 总结来说，指标和日志都是常见的监控来源。它们用于不同的情况，在大多数情况下，推荐同时使用两者的组合。如果有内部或外部组件提供有关事件和性能的信息，那么指标是一个很好的选择。日志则最适合跟踪应用程序经历的各种事件。指标也可以从日志中创建。接下来的主题讨论了几种推荐的监控策略。
- en: Monitoring strategies
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 监控策略
- en: 'The following are some recommended strategies while choosing a monitoring system:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 选择监控系统时，以下是一些推荐的策略：
- en: '**Data should not be stale**: The speed of data retrieval becomes critical
    when querying vast amounts of data. If retrieval is slow, data will become stale
    and may be misinterpreted, with actions potentially being taken on incorrect data.'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据不应过时**：当查询大量数据时，数据检索的速度变得至关重要。如果检索速度慢，数据就会变得过时，可能被误解，进而可能基于错误的数据采取行动。'
- en: '**Dashboards should be configurable and include robust features**: A monitoring
    system should include interfaces that have the capabilities to display time series
    data in different formats, such as *heatmaps*, *histograms*, *counters*, or a
    *distribution*. Options to aggregate information using multiple options should
    be present as a configurable feature.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**仪表板应可配置并包含强大的功能**：监控系统应包括具备在不同格式下显示时间序列数据的能力的界面，例如*热图*、*直方图*、*计数器*或*分布*。应具备使用多种选项汇总信息的可配置功能。'
- en: '**Alerts should be classified and suppressed if needed**: Monitoring systems
    should have the ability to set different severity levels. In addition, once an
    alert has been notified, it is extremely useful if there is the ability to suppress
    the same alert for a period that will avoid unnecessary noise that could possibly
    distract the on-call engineer.'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**如果需要，警报应进行分类并抑制**：监控系统应具备设置不同严重级别的能力。此外，一旦警报被通知，如果能够在一定时间内抑制相同的警报，从而避免可能分散值班工程师注意力的不必要噪音，这将极为有用。'
- en: These recommended strategies are implemented across two types of monitoring.
    This classification will be discussed as the next topic.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 这些推荐策略被应用于两种类型的监控。该分类将在下一个主题中讨论。
- en: Monitoring types
  id: totrans-89
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 监控类型
- en: 'Monitoring can be classified into the two most common types:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 监控可以分为两种最常见的类型：
- en: Black box monitoring
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 黑盒监控
- en: White box monitoring
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 白盒监控
- en: Black box monitoring
  id: totrans-93
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 黑盒监控
- en: '**Black box monitoring** refers to monitoring the system based on testing externally
    visible behavior based on the user''s perspective. This kind of monitoring does
    not involve any access to the technical details or build or configuration of the
    system. Monitoring is strictly based on testing visible behavior that is a reflection
    of how an end consumer would access the system. It is metaphorically referred
    to as a black box since the internals of the system are not opaque and there is
    no control or visibility in terms of what''s happening inside the system. It is
    also referred to as server or hardware monitoring.'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: '**黑盒监控**是指基于用户角度测试系统外部可见行为的监控。这种监控不涉及对系统技术细节、构建或配置的任何访问。监控严格基于测试可见行为，这些行为反映了最终用户如何访问系统。它被比喻为黑盒监控，因为系统的内部不透明，无法控制或看到系统内部的发生情况。它也被称为服务器或硬件监控。'
- en: Black box monitoring is best used for paging incidents after the incident has
    occurred or is ongoing. Black box monitoring is a representation of active problems
    and is system-oriented, with a specific focus on system load and disk/memory/CPU
    utilization. Additional examples include the monitoring of network switches and
    network devices, such as load balancers and hypervisor level resource usage.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 黑盒监控最适合在事件发生后或事件正在进行时进行分页通知。黑盒监控是对当前问题的表示，面向系统，重点关注系统负载和磁盘/内存/CPU的使用情况。其他示例包括对网络交换机和网络设备的监控，如负载均衡器和虚拟机监控层级资源使用。
- en: White box monitoring
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 白盒监控
- en: '**White box monitoring** is commonly referred to as application monitoring
    and is based on the metrics collected and exposed by the internals of the system.
    For example, white box monitoring can give insights into an application or endpoint
    performance by capturing the total number of HTTP requests or the total number
    of errors or the average request latency per request. In contrast, black box monitoring
    can only capture if the endpoint returned a successful response. White box monitoring
    is both symptom-and cause-oriented and this depends on how informative the internals
    of the system are. White box monitoring can also provide insights into future
    problems, as information retrieved from one internal can be the reason for an
    issue in another internal. White box monitoring collects information from three
    critical components – metrics, logs, and traces, described as follows:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '**白盒监控**通常被称为应用监控，基于系统内部收集和暴露的指标。例如，白盒监控可以通过捕获总HTTP请求数、错误总数或每个请求的平均请求延迟，提供有关应用程序或端点性能的洞察。相比之下，黑盒监控只能捕获端点是否返回了成功的响应。白盒监控既面向症状，也面向原因，这取决于系统内部的可见信息量。白盒监控还可以提供对未来问题的洞察，因为从一个内部收集的信息可能是另一个内部问题的原因。白盒监控从三个关键组件收集信息——指标、日志和追踪，具体如下：'
- en: '**Metrics**: These are readily available or custom created metrics that represent
    the state of the system in a measurable way and typically take the form of counters,
    gauges, and distribution.'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**度量**：这些是现成的或自定义创建的度量，用来以可度量的方式表示系统的状态，通常以计数器、仪表和分布的形式出现。'
- en: 'Metrics must be **SMART**:'
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 度量必须是**SMART**的：
- en: 'a) **S**: **Specific** (such as automation results should be at least 99% versus
    high quality)'
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) **S**：**具体的**（例如，自动化结果至少应该达到99%，而不是“高质量”）
- en: 'b) **M**: **Measurable** (such as results should be returned within 200 ms
    versus fast enough)'
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) **M**：**可度量的**（例如，结果应该在200毫秒内返回，而不是“足够快”）
- en: 'c) **A**: **Achievable** (such as a service is 99.99% available versus 100%
    available)'
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) **A**：**可达成的**（例如，服务的可用性为99.99%，而非100%）
- en: 'd) **R**: **Relevant** (such as observing latency versus throughput for browsing
    video titles)'
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) **R**：**相关的**（例如，观察延迟，而不是浏览视频标题的吞吐量）
- en: 'e) **T**: **Time Bound** (such as service is 99.99% available over 30 days
    versus over time)'
  id: totrans-104
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: e) **T**：**有时间限制的**（例如，服务在30天内可用99.99%，而不是“长期可用”）
- en: '**Logs**: These represent a single thread of work at a single point in time.
    Logs reflect the application''s state and are user-created at the time of application
    development. Logs can be structured or semi-structured, which typically includes
    a timestamp and a message code. Log entries are written using client libraries
    such as log4j and sl4j. Log processing is a reliable source of producing statistics
    and can also be processed in real time to produce log-based metrics.'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**日志**：这些表示在某一时刻单一线程的工作。日志反映了应用程序的状态，并且是在应用程序开发时由用户创建的。日志可以是结构化或半结构化的，通常包括时间戳和消息代码。日志条目是通过客户端库（如
    log4j 和 sl4j）来编写的。日志处理是生成统计信息的可靠来源，也可以实时处理生成基于日志的度量。'
- en: '**Traces**: These are made up of spans. A span is the primary building block
    of a distributed trace that represents a specific event or a user action in a
    distributed system. A span represents the path of a request through one server.
    However, there could be multiple spans at the same time, where one span can reference
    another span. This allows multiple spans to be assembled into a common trace,
    which is essentially a visualization of requests as it traverses through a distributed
    system.'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**追踪**：这些由跨度（spans）组成。跨度是分布式追踪的主要构建块，代表分布式系统中一个特定事件或用户操作。一个跨度表示请求在一个服务器上的路径。然而，可能会有多个跨度同时存在，其中一个跨度可以引用另一个跨度。这使得多个跨度能够汇聚成一个共同的追踪，本质上是请求在分布式系统中传递的可视化。'
- en: Black box monitoring versus white box monitoring – which is more critical?
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 黑箱监控与白箱监控——哪个更为关键？
- en: Both types of monitoring are equally critical, and each is recommended based
    on the situation and the type of audience. Black box monitoring provides information
    that the Ops team typically looks at, such as disk usage, memory utilization,
    and CPU utilization, whereas white box monitoring provides more details on the
    internals of the system, which could reflect the reason for a metric produced
    by black box monitoring. For example, a black box metric such as high CPU utilization
    will indicate that there is a problem, but a white box metric such as active database
    connections or information on long-running queries can indicate a potential problem
    that is bound to happen.
  id: totrans-108
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这两种监控方式同样至关重要，具体使用哪种方式建议根据情况和受众类型来决定。黑箱监控提供的是运维团队通常会关注的信息，例如磁盘使用情况、内存利用率和 CPU
    利用率，而白箱监控则提供系统内部的更多细节，这些细节可能反映出黑箱监控产生的指标的原因。例如，像高 CPU 利用率这样的黑箱指标会表明存在问题，但像活跃数据库连接数或长时间运行的查询等白箱指标，则能指出可能会发生的潜在问题。
- en: To summarize, the reliability of a system can be tracked by monitoring specific
    metrics. However, there could potentially be multiple metrics that could be tracked
    and sometimes can also lead to confusion while prioritizing these metrics. The
    next topic lists the most important metrics to track as recommended by Google
    for a user-facing system. These metrics are known as the golden signals.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 总结来说，系统的可靠性可以通过监控特定的度量来追踪。然而，可能存在多个需要追踪的度量，有时在优先排序这些度量时也会导致困惑。接下来的内容列出了 Google
    推荐的用于用户面对面系统的最重要的度量，这些度量被称为黄金信号。
- en: The golden signals
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 黄金信号
- en: System reliability is tracked by SLOs. SLOs require SLIs or specific metrics
    to monitor. The types of metrics to monitor depend on the user journey tied to
    the service. It's strongly recommended that every service/system should measure
    a definite and a finite set of SLIs. So, if there is a situation where it is possible
    to define multiple metrics for a service, then it is recommended to prioritize
    the metrics to measure and monitor.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 系统可靠性通过 SLO 跟踪。SLO 需要 SLIs 或特定的度量来进行监控。监控的度量类型取决于与服务相关的用户旅程。强烈建议每个服务/系统都应度量一组明确且有限的
    SLI。因此，如果有可能为服务定义多个度量，则建议优先考虑要测量和监控的度量。
- en: 'Google proposes the use of four golden signals. Golden signals refer to the
    most important metrics that should be measured for a user-facing system:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: Google 提出了使用四个黄金信号的建议。黄金信号指的是应当为用户面向的系统测量的最重要的指标：
- en: '**Latency**: This is an indicator of the time taken to serve a request and
    reflects user experience. Latency can point to emerging issues. Example metrics
    include *Page load*/*transaction*/*query duration*, *Time until first response*,
    and *Time until complete data duration*.'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**延迟**：这是处理请求所需时间的指标，反映了用户体验。延迟能够指示潜在问题。示例指标包括 *页面加载*/*事务*/*查询持续时间*，*首次响应时间*，以及
    *完整数据持续时间*。'
- en: '**Traffic**: This is an indicator of current system demand and is also the
    basis for calculating infrastructure spend. Traffic is historically used for capacity
    planning. Example metrics include *# write*/*read ops*, *# transactions*/*retrievals*/*HTTP
    requests per second*, and *# active requests*/*connections*.'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**流量**：这是当前系统需求的指标，也是计算基础设施支出的基础。流量历史上用于容量规划。示例指标包括 *# 写入*/*读取操作*，*# 事务*/*检索*/*每秒
    HTTP 请求*，以及 *# 活跃请求*/*连接*。'
- en: '**Errors**: This is an indicator of the rate of requests that are failing.
    It essentially represents the rate of errors at an individual service and for
    the entire system. Errors represent the rate of requests that fail explicitly
    or implicitly or by policy. Example metrics include *# 400*/*500* *HTTP Codes*
    and *# exceptions*/*stack traces*/*dropped connections*.'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**错误**：这是请求失败率的指标，实际上表示单个服务和整个系统的错误率。错误表示显式或隐式失败的请求率，或由于策略导致的失败。示例指标包括 *# 400*/*500*
    *HTTP 状态码*，以及 *# 异常*/*堆栈跟踪*/*丢失的连接*。'
- en: '**Saturation**: This is an indicator of the overall capacity of the service.
    It essentially represents how full the service is and reflects degrading performance.
    Saturation can also indicate SLOs, resulting in the need to alert. Example metrics
    include *Disk*/*Memory quota*, *# memory*/*thread pool*/*cache*/*disk*/*CPU utilization,*
    and the *# of available connections*/*users on the system*.'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**饱和度**：这是服务整体容量的指标，实际上代表服务的“满”度，反映出性能下降。饱和度也可以指示 SLO，从而触发告警。示例指标包括 *磁盘*/*内存配额*，*#
    内存*/*线程池*/*缓存*/*磁盘*/*CPU 使用率*，以及 *# 可用连接*/*系统用户数*。'
- en: This completes the section on monitoring, with the insights into desirable features
    of a monitoring system that could essentially help in creating a feedback loop,
    potential monitoring sources, types of monitoring, and Google's recommended golden
    signals, which represent the four key metrics that should be measured for a user-facing
    system. The next section will provide an overview of alerting and how information
    from the monitoring system can be used as input.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 本部分完成了关于监控的内容，涵盖了监控系统的理想特性，这些特性有助于创建反馈循环，潜在的监控源，监控的类型，以及 Google 推荐的黄金信号，这些信号代表了应当为用户面向系统测量的四个关键指标。下一部分将概述告警以及如何将监控系统中的信息作为输入。
- en: Alerting
  id: totrans-118
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 告警
- en: SLIs are quantitative measurements at a given point in time and SLOs use SLIs
    to reflect the reliability of the system. SLIs are captured or represented in
    the form of metrics. Monitoring systems monitor these metrics against a specific
    set of policies. These policies represent the target SLOs over a period and are
    referred to as alerting rules.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: SLI 是在某一时刻的定量度量，SLO 使用 SLI 来反映系统的可靠性。SLI 通过度量的形式捕获或表示。监控系统依据一组特定的策略来监控这些度量。这些策略表示在一段时间内的目标
    SLO，称为告警规则。
- en: '**Alerting** is the process of processing the alerting rules, which track the
    SLOs and notify or perform certain actions when the rules are violated. In other
    words, alerting allows the conversion of SLOs into actionable alerts on significant
    events. Alerts can then be sent to an external application or a ticketing system
    or a person.'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: '**警报**是处理警报规则的过程，这些规则跟踪SLO，并在规则被违反时通知或执行某些操作。换句话说，警报使得SLO可以转化为有关重要事件的可操作警报。然后，这些警报可以发送到外部应用程序、票务系统或某个个人。'
- en: 'Common scenarios for triggering alerts include (and are not limited to) the
    following:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 触发警报的常见场景包括（但不限于）以下情况：
- en: The service or system is down.
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务或系统出现故障。
- en: SLOs or SLAs are not met.
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 未满足SLO或SLA。
- en: Immediate human intervention is required to change something.
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 需要立即人工干预以进行更改。
- en: As discussed previously, SLOs represent an achievable target, and error budgets
    represent the acceptable level of unreliability or unavailability. SRE strongly
    recommends the use of alerts to track the burn rate of error budgets. If the error
    budget burn rate is too fast, setting up alerts before the entire budget is exhausted
    can work as a warning signal, allowing teams to shift their focus on system reliability
    rather than push risky features.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，SLO代表可实现的目标，而错误预算代表可接受的不可用性或不可靠性的水平。SRE强烈建议使用警报来跟踪错误预算的消耗速率。如果错误预算消耗速率过快，在预算完全耗尽之前设置警报可以作为警告信号，使团队能够将焦点转向系统可靠性，而不是推动具有风险的功能。
- en: The core concept behind alerting is to track events. The events are processed
    through a time series. **Time series** is defined as a series of event data points
    broken into successive equally spaced windows of time. It is possible to configure
    the duration of each window and the math applied to the member data points inside
    each window. Sometimes, it is important to summarize events to prevent false positives
    and this can be done through time series. Eventually, error rates can be continuously
    calculated, monitored against set targets, and alerts can be triggered at the
    right time.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 警报的核心概念是跟踪事件。这些事件通过时间序列进行处理。**时间序列**定义为一系列事件数据点，这些数据点被分割成连续且间隔相等的时间窗口。可以配置每个窗口的持续时间以及应用于每个窗口内成员数据点的数学运算。有时，重要的是汇总事件，以防止误报，这可以通过时间序列来实现。最终，错误率可以持续计算，监控设定目标，并在合适的时机触发警报。
- en: Alerting strategy – key attributes
  id: totrans-127
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 警报策略——关键属性
- en: The key to configuring alert(s) for a service or a system is to design an effective
    alerting strategy. To measure the accuracy or effectiveness of a particular alerting
    strategy, the following key attributes should be considered during the design.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 配置服务或系统警报的关键是设计有效的警报策略。为了衡量某一警报策略的准确性或效果，在设计过程中应考虑以下关键属性。
- en: Precision
  id: totrans-129
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 精确度
- en: From an effectiveness standpoint, alerts should be bucketized into relevant
    alerts and irrelevant alerts. **Precision** is defined as the proportion of events
    detected that are significant.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 从效果角度来看，警报应分为相关警报和无关警报。**精确度**定义为检测到的事件中重要事件的比例。
- en: 'The following is a mathematical formula for calculating precision:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是计算精确度的数学公式：
- en: '![](img/Formula_03_001.png)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Formula_03_001.png)'
- en: In other words, if precision needs to be 100%, then the count of irrelevant
    alerts should be 0\. Precision is a measure of exactness and is often adversely
    affected by false positives or false alerts. This is a situation that could occur
    during a low-traffic period.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 换句话说，如果精确度需要达到100%，则无关警报的数量应该为0。精确度是准确性的衡量标准，通常会受到误报或假警报的不利影响。这种情况通常发生在低流量期间。
- en: Recall
  id: totrans-134
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 召回率
- en: An alert needs to capture every significant event. This means that there should
    not be any missed alerts. **Recall** is defined as the proportion of significant
    events detected.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 警报需要捕捉每一个重要事件。这意味着不应漏掉任何警报。**召回率**定义为检测到的重要事件的比例。
- en: 'The following is a mathematical formula for calculating recall:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是计算召回率的数学公式：
- en: '![](img/Formula_03_002.png)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Formula_03_002.png)'
- en: In other words, if recall needs to be 100%, then every significant event should
    result in an alert and there should not be any missed alerts. Recall is a measure
    of completeness and is often adversely affected by missed alerts.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 换句话说，如果召回率需要达到100%，则每一个重要事件都应触发一个警报，且不应漏掉任何警报。召回率是完整性的衡量标准，通常会受到漏报的负面影响。
- en: Detection time
  id: totrans-139
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 检测时间
- en: '**Detection time** is defined as the time taken by a system to notice an alert
    condition. It is also referred to as the time to detect. Long detection times
    can negatively impact the error budget. So, it is critical to notify or raise
    an alert as soon as an issue occurs. However, raising alerts too fast will result
    in false positives, which will eventually lead to poor precision.'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: '**检测时间** 被定义为系统察觉警报条件所需的时间。它也被称为检测时间。较长的检测时间可能会对错误预算产生负面影响。因此，在问题发生时尽快通知或触发警报是至关重要的。然而，警报触发过快会导致误报，从而最终影响精确度。'
- en: Reset time
  id: totrans-141
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 重置时间
- en: '**Reset time** is defined as the length or duration of time the alerts are
    fired after an issue has been resolved. Longer reset times will have an adverse
    impact because alerts will be fired on repaired systems, leading to confusion.'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '**重置时间** 被定义为在问题解决后触发警报的时间长度或持续时间。较长的重置时间会产生不利影响，因为警报会在已修复的系统上触发，导致混乱。'
- en: This concludes an introduction to key attributes that are critical in defining
    an effective alerting strategy. The next topic elaborates on a potential approach
    to define an effective alerting strategy.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 这部分介绍了在定义有效警报策略时至关重要的关键属性。接下来的主题将详细阐述一种定义有效警报策略的潜在方法。
- en: Alerting strategy – potential approaches
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 警报策略 – 潜在方法
- en: SRE recommends six different approaches to configure alerts on significant events.
    Each of these approaches addresses a different problem. These approaches also
    offer a certain level of balance across key attributes, such as precision, recall,
    detection time, and reset time. Some of these approaches could solve multiple
    problems at the same time.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: SRE 推荐了六种不同的方法来配置重要事件的警报。每种方法都解决了不同的问题。这些方法还在精确度、召回率、检测时间和重置时间等关键属性之间提供了一定的平衡。其中一些方法可以同时解决多个问题。
- en: 'Approach # 1 – Target error rate >= Error budget (with a shorter alert window)'
  id: totrans-146
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 方法#1 – 目标错误率 >= 错误预算（使用较短的警报窗口）
- en: In this approach, a shorter alert window or smaller window length is chosen
    (for example, 10 minutes). Smaller windows tend to yield faster alert detection
    and shorter reset times but also tend to decrease precision because they tend
    toward false positives or false alerts.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在此方法中，选择较短的警报窗口或较小的窗口长度（例如10分钟）。较小的窗口通常会带来更快的警报检测和更短的重置时间，但也倾向于降低精确度，因为它们容易产生误报或错误警报。
- en: As per this approach, an alert should be triggered if the target error rate
    equals or exceeds the error budget within the defined shorter alert window.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 根据此方法，如果目标错误率在定义的较短警报窗口内等于或超过错误预算，则应触发警报。
- en: 'Consider an example with the following input parameters:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑一个具有以下输入参数的示例：
- en: The expected SLO is 99.9% over 30 days, resulting in 0.1% as the error budget.
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预期的SLO为30天内达到99.9%，因此错误预算为0.1%。
- en: 'Alert window to examine: 10 minutes.'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查的警报窗口：10分钟。
- en: 'Accordingly, a potential alert definition would be the following:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，潜在的警报定义如下：
- en: '*If the SLO is 99.9% over 30 days, alert if the error rate over the last 10
    minutes is >= 0.1%.*'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: '*如果SLO为30天内99.9%，且过去10分钟内的错误率>=0.1%，则触发警报。*'
- en: 'In approach # 1, a shorter time window results in alerts being fired more frequently,
    but tends to decrease precision.'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 在方法#1中，较短的时间窗口会导致警报更频繁地触发，但往往会降低精确度。
- en: 'Approach # 2 – Target error rate >= Error budget (with a longer alert window)'
  id: totrans-155
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 方法#2 – 目标错误率 >= 错误预算（使用较长的警报窗口）
- en: In this approach, a longer alert window or larger window length is chosen (for
    example, 36 hours). Larger windows tend to yield better precision, but will have
    longer reset and detection times. This means that the portion of the error budget
    spent before the issue is detected is also high.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 在此方法中，选择较长的警报窗口或较大的窗口长度（例如36小时）。较大的窗口往往能获得更好的精确度，但会有更长的重置时间和检测时间。这意味着，在问题被检测到之前，消耗的错误预算部分也较高。
- en: As per this approach, an alert should be triggered if the target error rate
    equals or exceeds the error budget within the defined larger time window.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 根据此方法，如果目标错误率在定义的较大时间窗口内等于或超过错误预算，则应触发警报。
- en: 'Consider an example with the following input parameters:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑一个具有以下输入参数的示例：
- en: '**The expected SLO is 99.9% over 30 days**: Resulting in 0.1% as the error
    budget'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**预期的SLO为30天内99.9%**：因此错误预算为0.1%'
- en: '**Alert window to examine**: 36 hours'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**检查的警报窗口**：36小时'
- en: 'Accordingly, a potential alert definition would be the following:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，潜在的警报定义如下：
- en: '*If the SLO is 99.9% over 30 days, alert if the error rate over the last 36
    hours is >= 0.1%*.'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: '*如果SLO在30天内为99.9%，并且过去36小时内的错误率>=0.1%，则触发警报*。'
- en: 'In approach # 2, a longer time window results in higher precision, but the
    alert will be fired less frequently and may result in a higher detection time.'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '在方法 #2 中，较长的时间窗口能提高精度，但警报触发的频率较低，可能导致较长的检测时间。'
- en: 'Approach # 3 – Adding a duration for better precision'
  id: totrans-164
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '方法 #3 – 添加持续时间以提高精度'
- en: 'In this approach, a duration parameter can be added to the alert criteria,
    so that the alert won''t fire unless the value remains above the threshold for
    that duration. The choice of threshold also becomes significant as some of the
    alerts can go undetected if the threshold is too high. For example, if the duration
    window is 10 minutes and the signal data was up for 9 minutes but returned to
    normal before the 10th minute, the error budget will be consumed, but alerts will
    go undetected or will not get fired. With the right selection of duration parameter
    and threshold, this approach enables the error to be spotted quickly, but treats
    the error as an anomaly until the duration is reached:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种方法中，可以将持续时间参数添加到警报标准中，这样警报只有在该值超过阈值并持续一段时间后才会触发。阈值的选择也变得非常重要，因为如果阈值设得过高，有些警报可能会错过。例如，如果持续时间窗口为10分钟，而信号数据在9分钟时已经恢复正常，那么错误预算虽然已经消耗，但警报将不会被触发或被遗漏。通过正确选择持续时间参数和阈值，该方法能快速发现错误，但直到达到持续时间才会将其视为异常：
- en: The advantage is that the alert fired after a defined duration will generally
    correspond to a significant event, and so will increase precision.
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这种方法的优点是，在定义的持续时间后触发的警报通常对应于一个重大事件，从而提高了精度。
- en: The disadvantage is that the error will continue to happen for a larger window
    and, as a result, will lead to a deteriorating recall.
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这种方法的缺点是，错误会在更长的时间窗口内持续发生，因此会导致召回率下降。
- en: A longer alert window or larger window length is recommended (for example, 36
    hours). Larger windows tend to yield better precision, but will have longer reset
    and detection times.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 推荐使用较长的警报窗口或较长的时间窗口（例如，36小时）。较大的窗口通常能提供更好的精度，但会有更长的重置和检测时间。
- en: As per this approach, an alert should be triggered if the target error rate
    equals or exceeds the error budget within the defined larger time window.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 根据该方法，如果目标错误率等于或超过定义的较大时间窗口内的错误预算，则应触发警报。
- en: 'Consider an example with the following input parameters:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑以下输入参数的示例：
- en: '**The expected SLO is 99.9% over 30 days**: Resulting in 0.1% as the error
    budget'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**期望的SLO为30天内99.9%**：因此错误预算为0.1%'
- en: '**Alert window to examine**: 36 hours'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**查看警报窗口**：36小时'
- en: 'Accordingly, a potential alert definition would be as follows:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 相应地，潜在的警报定义可能如下：
- en: '*If the SLO is 99.9% over 30 days, alert if the error rate over the last 36
    hours is >= 0.1%*.'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: '*如果SLO在30天内为99.9%，并且过去36小时内的错误率>=0.1%，则触发警报*。'
- en: 'In approach # 3, a longer duration window also means that the portion of the
    error budget spent before the issue is detected is high, but is highly likely
    to indicate to a significant event.'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '在方法 #3 中，较长的持续时间窗口也意味着在问题被检测到之前，已经消耗的错误预算比例较高，但很可能会指示一个重大事件。'
- en: 'Approach # 4 – Alert regarding the burn rate'
  id: totrans-176
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: '方法 #4 – 关于燃尽速率的警报'
- en: In this approach, alerts should be defined based on burn rate. **Burn rate**
    is defined as how fast, relative to the SLO, the service consumes the error budget.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种方法中，警报应根据燃尽速率定义。**燃尽速率**定义为相对于SLO，服务消耗错误预算的速度。
- en: For example, with a 0.1% error budget over 30 days, if the error rate is constant
    at 0.1% across the 30 days, then the budget is spent equally and 0 budget remains
    at the end of the 30th day. In this case, the burn rate is calculated as 1\. But
    if the error rate is 0.2%, then the time to exhaustion will be 15 days, and the
    burn rate will be 2.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果30天内错误预算为0.1%，并且错误率在30天内保持恒定为0.1%，那么预算将平均消耗，且在第30天结束时剩余0预算。在这种情况下，燃尽速率为1。如果错误率为0.2%，那么耗尽的时间为15天，燃尽速率为2。
- en: 'When alerting based on burn rate, the following are two possible alerting policies:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 当基于燃尽速率进行警报时，以下是两种可能的警报策略：
- en: '**Fast burn alert**: An alert is fired because of a sudden large change in
    consumption of the error budget. If not notified, then the error budget will exhaust
    quicker than normal. For a fast burn alert, the lookback period should be shorter
    (say 1 to 2 hours), but the threshold for the rate of consumption for the alert
    should be much higher (say 10x times) than the ideal baseline for the lookback
    period.'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**快速消耗警报**：因错误预算消耗发生突然而大的变化而触发警报。如果未得到通知，错误预算将比正常情况更快耗尽。对于快速消耗警报，回溯期应较短（例如1到2小时），但警报的消耗速率阈值应远高于回溯期的理想基线（例如是基线的10倍）。'
- en: '**Slow burn alert**: An alert is not fired until a condition is continuously
    violated for a long period. This kind of alert only consumes a small percentage
    of the error budget when it occurs and is significantly less urgent than a fast
    burn alert. For a slow burn alert, the lookback period should be longer (say 24
    hours) but the threshold is slightly higher (say 2x times) than the baseline for
    the lookback period.'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**慢速消耗警报**：直到条件持续被违反较长时间后，才会触发警报。这类警报在发生时只消耗错误预算的一小部分，并且比快速消耗警报的紧急程度要低。对于慢速消耗警报，回溯期应较长（例如24小时），但阈值应略高（例如是基线的2倍）。'
- en: 'So, as per approach # 4, alerts will be fired if the burn rate is greater than
    the desired burn rate at any point in time. This approach provides better precision
    over a shorter time window with good detection times.'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，按照方法#4，如果消耗速率在任何时刻超过期望的消耗速率，警报将被触发。该方法在较短的时间窗口内提供更好的精度和较好的检测时间。
- en: 'Approach # 5 – Multiple burn rate alerts'
  id: totrans-183
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 方法#5 – 多种消耗速率警报
- en: The same alerting strategy doesn't need to always work for a service. This might
    depend on factors such as the amount of traffic, the variable error budget, or
    peak and slow periods. For example, during a holiday shopping season, it is common
    that the SLO for a service will be higher than normal. This means a lower error
    budget during peak season and this will revert to a slightly less strict error
    budget during off-peak seasons.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 同样的警报策略并不总是适用于某项服务。这可能取决于流量量、变化的错误预算或高峰期与低谷期等因素。例如，在假期购物季节，服务的SLO通常会高于正常水平。这意味着高峰期的错误预算较低，而在非高峰期时，错误预算则会变得稍微宽松一些。
- en: In this approach, instead of defining a single condition in an alerting policy,
    multiple conditions can be defined to get better precession, recall, detection
    time, and reset time. Each condition can have a different level of severity and
    a different notification channel to notify the alert based on the nature of severity.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种方法中，警报策略中可以定义多个条件，以便获得更好的精度、召回率、检测时间和重置时间。每个条件可以有不同的严重级别，并根据严重性采用不同的通知渠道来通知警报。
- en: 'For example, an alerting policy can be defined with the following multiple
    conditions:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，可以定义一个包含以下多个条件的警报策略：
- en: '*Trigger an alert if 10% of the budget is consumed over a time duration of
    3 days and notify by creating a ticket*.'
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*当预算的10%在3天内被消耗时触发警报，并通过创建工单进行通知*。'
- en: '*Trigger an alert if 5% of the budget is consumed over a time duration of 6
    hours and notify through a page*.'
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*当预算的5%在6小时内被消耗时触发警报，并通过页面进行通知*。'
- en: '*Trigger an alert if 2% of the budget is consumed over a time duration of 1
    hour and notify through a page*.'
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*当预算的2%在1小时内被消耗时触发警报，并通过页面进行通知*。'
- en: 'In approach # 5, multiple conditions can be defined for a single alerting policy.
    Each condition could result in a different action that could potentially represent
    the severity level for the alert.'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 在方法#5中，可以为单个警报策略定义多个条件。每个条件可能导致不同的行动，这些行动可能代表警报的严重级别。
- en: 'Approach # 6 – Multiple burn rate alerts across multiple windows'
  id: totrans-191
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 方法#6 – 跨多个窗口的多种消耗速率警报
- en: 'This is an extension of approach # 5, where the major difference is to use
    multiple windows to check whether the error rate exceeds the error budget rather
    than a single window for a single condition. This will ensure that the alert raised
    is always significant and is actively burning the error budget when it gets notified.'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 这是方法#5的扩展，其中主要区别在于使用多个窗口来检查错误率是否超过错误预算，而不是仅用单个窗口来检查单一条件。这将确保触发的警报始终具有重要性，并且在收到通知时，错误预算正在被积极消耗。
- en: This helps to create an alerting framework that is flexible and shows the direct
    impact based on the severity of the incident. A flexible window emphasizes or
    confirms whether the alert condition is active in the last specified duration.
    This helps to immediately troubleshoot when alerted. The flip side is that such
    conditions also involve multiple variables that might add to maintenance in the
    long term.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 这有助于创建一个灵活的告警框架，能够根据事件的严重性显示直接影响。灵活的窗口强调或确认告警条件是否在最后指定的时间段内处于活动状态。这有助于在收到告警时立即进行故障排除。反过来，这些条件也涉及多个变量，可能会在长期内增加维护工作。
- en: 'For example, an alerting policy can be defined with the following multiple
    conditions:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，可以定义一个包含多个条件的告警策略：
- en: '*Trigger an alert if 10% of the budget is consumed over a time duration of
    3 days and is currently being consumed over the last 6 hours. Notify by creating
    a ticket*.'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*如果预算的10%在3天内被消耗，并且在过去6小时内正在被消耗，则触发告警。通过创建工单通知*。'
- en: '*Trigger an alert if 5% of the budget is consumed over a time duration of 6
    hours and is currently being consumed over the last 30 minutes. Notify through
    a page*.'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*如果预算的5%在6小时内被消耗，并且在过去30分钟内正在被消耗，则触发告警。通过页面通知*。'
- en: '*Trigger an alert if 2% of the budget is consumed over a time duration of 1
    hour and is currently being consumed over the last 5 minutes. Notify through a
    page*.'
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*如果预算的2%在1小时内被消耗，并且在过去5分钟内正在被消耗，则触发告警。通过页面通知*。'
- en: 'Approach # 6 is potentially an extension of approach # 5, where multiple conditions
    can be defined for an alerting policy where each condition, if breached, can result
    in a different action or notification. The difference is that approach # 6 emphasizes
    specifying an alert window that could confirm that the fired alert is potentially
    active.'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: '方法 #6 可能是方法 #5 的扩展，其中可以为告警策略定义多个条件，每个条件被触发时，可能会导致不同的行动或通知。不同之处在于方法 #6 强调指定一个告警窗口，以确认触发的告警可能是有效的。'
- en: These approaches are well suited for many situations that could require an alerting
    strategy. However, there could be a specific situation where the traffic received
    by the service is less or low. The next topic discusses approaches on how to deal
    with such situations.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 这些方法非常适合需要告警策略的多种情况。然而，可能会有一种特殊情况，即服务接收到的流量较少或很低。接下来的主题讨论了如何处理此类情况的方法。
- en: Handling service with low traffic
  id: totrans-200
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 处理低流量服务
- en: 'If a service receives a smaller amount of traffic, a single or a smaller number
    of failed requests might result in a higher error rate, indicating a significant
    burn of the error budget. SRE recommends a few options for handling a low-traffic
    service:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 如果服务接收到的流量较少，则单个或少量的失败请求可能会导致更高的错误率，从而表明错误预算的显著消耗。SRE 推荐几种处理低流量服务的选项：
- en: '**Generating artificial traffic**: This option provides more signals or requests
    to work with. However, a significant amount of engineering effort is required
    to ensure that the artificial traffic behavior matches real user behavior closely.'
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**生成人工流量**：此选项提供更多的信号或请求进行处理。然而，需要大量的工程工作来确保人工流量的行为与真实用户的行为尽可能相似。'
- en: '**Combining services**: This option recommends bucketizing similar low-request
    services into a single group representing a single function. This will result
    in higher precision and fewer false positives. However, careful consideration
    needs to be given when combining the services into a single group. This is because
    the failure of an individual service might not always result in the failure of
    the overall function and, as a result, will not result in an alert for a significant
    event.'
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**合并服务**：此选项建议将相似的低请求服务按功能合并为一个组。这将提高精度并减少误报。然而，在将服务合并为一个组时需要谨慎考虑。因为单个服务的故障不一定会导致整体功能的故障，因此也不会触发重大事件的告警。'
- en: '**Modifying clients**: This option is used to deal with ephemeral failures,
    especially if it is impractical to generate artificial traffic or combine services
    into a group. The impact of a single failed request can be reduced by modifying
    the client and implement exponential backoff. Additionally, fallback paths should
    be set up to capture the request for eventual execution post-backoff.'
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**修改客户端**：此选项用于处理暂时性故障，特别是当生成人工流量或将服务组合成一个组不切实际时。通过修改客户端并实施指数退避，可以减少单个请求失败的影响。此外，应该设置回退路径，以便在退避后捕获请求并最终执行。'
- en: '**Lowering the SLO or increasing the window**: This option is the simplest
    way to handle low-traffic services. This will reduce the impact of a single failure
    on the error budget. However, lowering the SLO is also a way to lower the expectations
    on how the service should behave.'
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**降低 SLO 或增加窗口**：此选项是处理低流量服务的最简单方法。这将减少单个故障对错误预算的影响。然而，降低 SLO 也是降低对服务行为期望的一种方式。'
- en: Given that we learned about topics specific to creating an effective alerting
    strategy, the next logical step is to learn about steps required to establish
    an SLO altering policy.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于我们已经了解了有关创建有效警报策略的特定主题，下一步是了解建立 SLO 警报策略所需的步骤。
- en: Steps to establish an SLO alerting policy
  id: totrans-207
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 建立 SLO 警报策略的步骤
- en: 'The following is the sequence of steps to establish an SLO alert policy:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是建立 SLO 警报策略的步骤顺序：
- en: '**Select the SLO to monitor**: Choose the suitable SLO for the service. It
    is recommended to monitor only one SLO at a time.'
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**选择要监控的 SLO**：选择适合该服务的 SLO。建议一次只监控一个 SLO。'
- en: '**Construct an appropriate condition**: It is possible to have multiple conditions
    for an alerting policy where the condition is different for a slow burn when compared
    to a fast burn.'
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**构建适当的条件**：警报策略可以有多个条件，其中针对缓慢故障和快速故障的条件不同。'
- en: '**Identify the notification channel**: Multiple notification channels can be
    selected at the same time for an alerting policy.'
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**确定通知通道**：可以同时为警报策略选择多个通知通道。'
- en: '**Include documentation**: It is recommended to include documentation about
    the alert that might help to resolve the potential underlying issue.'
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**包括文档**：建议包含有关警报的文档，以帮助解决潜在的根本问题。'
- en: '**Create an alerting policy**: The policy should be created in the monitoring
    system of choice, either through a configuration file or CLI, or through the console
    (based on the features supported by the monitoring system).'
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**创建警报策略**：应在所选的监控系统中创建该策略，可以通过配置文件、CLI 或控制台（取决于监控系统支持的功能）来实现。'
- en: This concludes establishing the blueprint for the SLO alerting policy. The next
    topic introduces the desirable characteristics of an alerting system.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 这标志着建立 SLO 警报策略蓝图的完成。接下来的主题介绍了警报系统的理想特性。
- en: Alerting system – desirable characteristics
  id: totrans-215
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 警报系统 – 理想的特性
- en: 'The alerting system should control the number of alerts that the on-call engineers
    receive. The following is a shortlist of desirable characteristics that an alerting
    system should possess:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 警报系统应控制值班工程师接收到的警报数量。以下是警报系统应具备的一些理想特性的简要清单：
- en: Inhibit certain alerts when others are active.
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在其他警报处于活动状态时，抑制某些警报。
- en: Remove or silence duplicate alerts from multiple sources that have the same
    label sets.
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除或静音来自多个来源、具有相同标签集的重复警报。
- en: Fan-in or fan-out alerts based on their label sets when multiple alerts with
    similar label sets fire.
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当多个具有相似标签集的警报触发时，基于其标签集进行扇入或扇出警报。
- en: This completes the section on alerting with insights into constructs that are
    required to define an effective alerting policy that includes possible approaches
    and key attributes, such as precision, recall, detection time, and reset time.
    The next section will provide an overview of time series, their structure, cardinality,
    and metric types.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 这部分总结了警报，并提供了定义有效警报策略所需的构建块，包括可能的方法和关键属性，如精准度、召回率、检测时间和重置时间。下一部分将概述时间序列、其结构、基数和指标类型。
- en: Time series
  id: totrans-221
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 时间序列
- en: '**Time series** data is the data that collectively represents how a system''s
    behavior changes over time. Essentially, applications relay a form of data that
    measures how things change over time. Time is not only regarded as a variable
    being captured; time is the primary focal point. Real-world examples of time series
    data include the following:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: '**时间序列**数据是代表系统行为随时间变化的数据。实质上，应用程序传递的是一种数据形式，用来衡量事物随时间的变化。时间不仅仅是一个被捕捉的变量；时间是主要的焦点。时间序列数据的现实世界例子包括以下内容：'
- en: Self-driving cars that continuously collect data to capture the ever-changing
    driving conditions or environment
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不断收集数据的自动驾驶汽车，以捕捉不断变化的驾驶条件或环境
- en: Smart homes that capture events such as a change in temperature or motion
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 捕捉事件的智能家居，例如温度变化或运动
- en: Metric versus events
  id: totrans-225
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 度量与事件
- en: '**Metrics** are time series measurements gathered at regular intervals. **Events**
    are time series measurements gathered at irregular time intervals.'
  id: totrans-226
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**度量**是按固定间隔收集的时间序列测量值。**事件**是按不规则时间间隔收集的时间序列测量值。'
- en: 'The following are some characteristics that qualify data as time series data:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些符合时间序列数据标准的特征：
- en: Data that arrives is always recorded as a new entry.
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 到达的数据始终作为新条目记录。
- en: Data arrives in time order.
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据按时间顺序到达。
- en: Time is the primary axis.
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 时间是主要的轴。
- en: Adding a time field to the dataset is not the same as time series data
  id: totrans-231
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 向数据集添加时间字段并不等同于时间序列数据
- en: Data related to a sensor is being collected in a non-time series database. If
    the sensor collects a new set of data, then writing this data will overwrite the
    previously stored data in the database with updated time. The database will eventually
    return the latest reading, but will not be able to track the change of data over
    a period of time. So, a non-time series database tracks changes to the system
    as **UPDATES**, but a time series database tracks changes to the system as **INSERTS**.
  id: totrans-232
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 与传感器相关的数据被存储在非时间序列数据库中。如果传感器收集到一组新的数据，那么写入这些数据将会用更新的时间覆盖数据库中先前存储的数据。数据库最终会返回最新的读数，但无法追踪一段时间内数据的变化。因此，非时间序列数据库将系统的变化记录为**更新（UPDATES）**，而时间序列数据库则将系统的变化记录为**插入（INSERTS）**。
- en: The next topic discusses the structure of time series.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 下一部分将讨论时间序列的结构。
- en: Time series structure
  id: totrans-234
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 时间序列结构
- en: 'Monitoring data is stored in time series. Each individual time series data
    has three pieces of information (refer to *Figure 3.1*):'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 监控数据存储在时间序列中。每个独立的时间序列数据包含三部分信息（参见*图3.1*）：
- en: '**Points**: Refers to a series of (timestamp, value) pairs. The value is the
    measurement, and the timestamp is the time at which the measurement was taken.'
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**点**：指的是一系列（时间戳，值）对。值是测量结果，时间戳是测量发生的时间。'
- en: '**Metric**: Refers to the name of the metric type that indicates how to interpret
    the data points. This also includes a combination of values for the metric labels.'
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**度量**：指示如何解释数据点的度量类型的名称。它还包括度量标签的值组合。'
- en: '**Monitored resource**: Refers to the monitored resource that is the source
    of the time series data, and one combination of values for the resource''s label.'
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**监控资源**：指的是作为时间序列数据源的监控资源，以及该资源标签的值组合。'
- en: 'The following screenshot shows the structure of time series data:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图展示了时间序列数据的结构：
- en: '![Figure 3.1 – Structure of time series data'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.1 – 时间序列数据的结构'
- en: '](img/B15587_03_01.jpg)'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15587_03_01.jpg)'
- en: Figure 3.1 – Structure of time series data
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.1 – 时间序列数据的结构
- en: 'Let''s look at an example:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看一个例子：
- en: 'The following screenshot shows an illustration of how time series data is represented
    for metric types with sample values: `storage.googleapis.com/api/request_count`:'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图展示了如何表示时间序列数据的示意图，适用于具有示例值的度量类型：`storage.googleapis.com/api/request_count`：
- en: '![Figure 3.2 – Illustration of a GCP Cloud storage metric with sample values'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.2 – GCP Cloud存储度量的示意图，包含示例值'
- en: '](img/B15587_03_02.jpg)'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15587_03_02.jpg)'
- en: Figure 3.2 – Illustration of a GCP Cloud storage metric with sample values
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.2 – GCP Cloud存储度量的示意图，包含示例值
- en: 'The preceding screenshot represents the various events that were captured as
    part of the metrics as they happened over time. For example, the following information
    can be extracted from *Figure 3.2*:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 前面的截图展示了随着时间推移，作为度量的一部分捕捉到的各种事件。例如，以下信息可以从*图3.2*中提取：
- en: There are a total of eight registered events in bucket `1234` between `2:00
    pm` and `2:10 pm`.
  id: totrans-249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在`2:00 pm`到`2:10 pm`之间，`1234`号桶中总共有八个注册事件。
- en: This includes six successful events (three reads and three writes with different
    timestamps) and three unsuccessful write attempts.
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这包括六个成功事件（三个读取和三个写入，具有不同的时间戳）以及三个失败的写入尝试。
- en: The next topic introduces the concept of cardinality with respect to time series
    data.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 下一主题介绍了与时间序列数据相关的基数概念。
- en: Time series cardinality
  id: totrans-252
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 时间序列基数
- en: 'Each time series is associated with a specific pair of metric and monitored
    resource types, but each pair can have many time series. The possible number of
    time series is determined by the cardinality of the pair: the number of labels
    and the number of values each label can take on.'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 每个时间序列与特定的度量类型和监控资源类型的配对相关联，但每个配对可以有多个时间序列。时间序列的数量由该配对的基数决定：标签的数量以及每个标签可以取的值的数量。
- en: 'For example, a time series metric is represented as a combination of two labels:
    **zone** and **color**. There are two zones (east and west) and three colors for
    each zone (red, green, and blue). So, the cardinality for this metric is six.
    The following is the potential time series data:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，时间序列度量由两个标签的组合表示：**zone** 和 **color**。每个区域有两个（东区和西区），每个区域有三种颜色（红色、绿色和蓝色）。因此，该度量的基数为六。以下是可能的时间序列数据：
- en: '[PRE0]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'With metric cardinality, there are a couple key pointers to bear in mind:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 关于度量基数，有几点关键要点需要记住：
- en: Metric cardinality is a critical factor with respect to performance. If the
    cardinality is too high, this means that there is a lot of time series data, resulting
    in higher query response times.
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 度量基数是影响性能的关键因素。如果基数过高，意味着时间序列数据量很大，从而导致查询响应时间较长。
- en: For custom metrics, the maximum number of labels that can be defined in a metric
    type is 10.
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于自定义度量，度量类型中可以定义的最大标签数为10个。
- en: The next topic introduces the common metric types with respect to time series
    data.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 下一主题介绍了与时间序列数据相关的常见度量类型。
- en: Time series data – metric types
  id: totrans-260
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 时间序列数据 – 度量类型
- en: 'Each time series includes a metric type to represent its data points. The metric
    type defines how to interpret the values relative to one another. The three most
    common types of metric are as follows:'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 每个时间序列包含一个度量类型，用于表示其数据点。度量类型定义了如何相互解释这些值。最常见的三种度量类型如下：
- en: '**Counter**: A counter is a cumulative metric that represents a monotonically
    increasing function whose value can only increase (but can never decrease) or
    be reset to zero on restart; for example, a counter to represent the number of
    requests served, tasks completed, or errors observed up to a particular point
    in time.'
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**计数器**：计数器是一种累计度量，表示一个单调递增的函数，其值只能增加（但不能减少），或者在重启时重置为零；例如，表示请求处理次数、完成任务数或在特定时间点观察到的错误数的计数器。'
- en: '**Gauge**: A gauge metric represents a single numerical value that can arbitrarily
    go up and down. It is useful for monitoring things with upper bounds.'
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**仪表**：仪表度量表示一个单一的数值，该值可以随意上升或下降。它适用于监控有上限的事物。'
- en: Examples of a gauge include the size of a collection or map or the number of
    threads in a running state. Gauges are also typically used for measured values
    such as temperatures or current memory usage, but also *counts* that can go up
    and down, such as the number of concurrent requests.
  id: totrans-264
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 仪表的例子包括集合或映射的大小，或者运行状态下的线程数量。仪表也通常用于测量值，如温度或当前内存使用情况，也可以用于*计数*，如并发请求的数量，且这些计数可以上下波动。
- en: '**Distribution**: A distribution metric is used to track the distribution of
    events across configurable buckets; for example, measure the payload sizes of
    requests hitting the server.'
  id: totrans-265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分布**：分布度量用于跟踪事件在可配置桶中的分布；例如，衡量请求到达服务器时的负载大小。'
- en: This completes the section on time series, where key concepts related to time
    series structure, cardinality, and possible metric types were summarized. This
    also brings us to the end of the chapter.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 这部分关于时间序列的内容已经结束，概述了与时间序列结构、基数以及可能的度量类型相关的关键概念。本章也到此结束。
- en: Summary
  id: totrans-267
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we discussed the concepts related to monitoring, alerting,
    and time series that are critical in tracking SRE technical practices, such as
    the SLO and error budgets. We also discussed the differences between black box
    monitoring and white box monitoring. In addition, we examined the four golden
    signals as recommended by Google to be the desired SLI metrics for a user-facing
    system.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们讨论了与监控、警报和时间序列相关的概念，这些概念对追踪 SRE 技术实践至关重要，例如 SLO 和错误预算。我们还讨论了黑盒监控与白盒监控之间的区别。此外，我们考察了
    Google 推荐的四个黄金信号，这些信号被认为是面向用户的系统的理想 SLI 指标。
- en: In the next chapter, we will focus on the constructs required to build an SRE
    team and apply cultural practices such as handling facets of incident management,
    being on-call, avoiding psychological safety, promoting communication and collaboration,
    and knowledge sharing.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将重点关注构建 SRE 团队所需的结构，并应用文化实践，例如处理事件管理的各个方面、值班、避免心理安全、促进沟通与协作以及知识共享。
- en: Points to remember
  id: totrans-270
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 需要记住的要点
- en: 'The following are some important points to remember:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些需要记住的重要要点：
- en: Black box monitoring is based on testing externally visible behavior.
  id: totrans-272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 黑盒监控基于测试外部可见行为。
- en: White box monitoring is based on the metrics collected and exposed by the internals
    of the system.
  id: totrans-273
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 白盒监控基于系统内部收集并暴露的指标。
- en: Metrics must be specific, measurable, achievable, relevant, and time-bound.
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 指标必须是具体的、可衡量的、可实现的、相关的和有时间限制的。
- en: The four golden signals recommended for a user-facing system are latency, traffic,
    errors, and saturation.
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 推荐的四个黄金信号是延迟、流量、错误和饱和度。
- en: Latency can point to emerging issues, and traffic is historically used for capacity
    planning.
  id: totrans-276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 延迟可能指示潜在问题，流量通常用于容量规划。
- en: Errors represent the rate of requests that fail explicitly or implicitly or
    by policy.
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 错误代表明确或隐式失败的请求率，或者由策略导致的失败率。
- en: Saturation represents how full the service is and reflects degrading performance.
  id: totrans-278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 饱和度表示服务的满载程度，并反映出性能下降。
- en: Precision is defined as the proportion of events detected that are significant.
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 精度定义为检测到的重要事件的比例。
- en: Recall is defined as the proportion of significant events detected.
  id: totrans-280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 召回率定义为检测到的重要事件的比例。
- en: Detection time is defined as the time taken by a system to notice an alert condition.
  id: totrans-281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检测时间定义为系统发现警报条件所需的时间。
- en: Reset time is defined as the length or duration of time the alerts are fired
    after an issue has been resolved.
  id: totrans-282
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重置时间定义为在问题解决后触发警报的持续时间或时间长度。
- en: An individual time series data has three critical pieces of information – points,
    metrics, and monitored resources.
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 单个时间序列数据包含三个关键元素——数据点、指标和监控资源。
- en: Further reading
  id: totrans-284
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'For more information on GCP''s approach to DevOps, read the following articles:'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 有关 GCP DevOps 方法的更多信息，请阅读以下文章：
- en: '**SRE**: [https://landing.google.com/sre/](https://landing.google.com/sre/)'
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SRE**: [https://landing.google.com/sre/](https://landing.google.com/sre/)'
- en: '**SRE Fundamentals**: [https://cloud.google.com/blog/products/gcp/sre-fundamentals-slis-slas-and-slos](https://cloud.google.com/blog/products/gcp/sre-fundamentals-slis-slas-and-slos)'
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SRE 基础知识**: [https://cloud.google.com/blog/products/gcp/sre-fundamentals-slis-slas-and-slos](https://cloud.google.com/blog/products/gcp/sre-fundamentals-slis-slas-and-slos)'
- en: '**SRE Youtube Playlist**: [https://www.youtube.com/watch?v=uTEL8Ff1Zvk&list=PLIivdWyY5sqJrKl7D2u-gmis8h9K66qoj](https://www.youtube.com/watch?v=uTEL8Ff1Zvk&list=PLIivdWyY5sqJrKl7D2u-gmis8h9K66qoj)'
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SRE Youtube 播放列表**: [https://www.youtube.com/watch?v=uTEL8Ff1Zvk&list=PLIivdWyY5sqJrKl7D2u-gmis8h9K66qoj](https://www.youtube.com/watch?v=uTEL8Ff1Zvk&list=PLIivdWyY5sqJrKl7D2u-gmis8h9K66qoj)'
- en: '**Metrics, time series, and resources**: [https://cloud.google.com/monitoring/api/v3/metrics](https://cloud.google.com/monitoring/api/v3/metrics)'
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**指标、时间序列和资源**: [https://cloud.google.com/monitoring/api/v3/metrics](https://cloud.google.com/monitoring/api/v3/metrics)'
- en: Practice test
  id: totrans-290
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实践测试
- en: 'Answer the following questions:'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 回答以下问题：
- en: Select the monitoring option that works based on the metrics exposed by the
    internals of the system.
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择基于系统内部暴露的指标工作的监控选项。
- en: a) Alert-based monitoring
  id: totrans-293
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 基于警报的监控
- en: b) White box monitoring
  id: totrans-294
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 白盒监控
- en: c) Log-based monitoring
  id: totrans-295
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 基于日志的监控
- en: d) Black box monitoring
  id: totrans-296
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 黑盒监控
- en: Select the monitoring source that doesn't provide information in near-real time.
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一个不提供近实时信息的监控来源。
- en: a) Logs
  id: totrans-298
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 日志
- en: b) Metrics
  id: totrans-299
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 指标
- en: c) Both
  id: totrans-300
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 两者都包括
- en: d) None of the above
  id: totrans-301
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 以上都不是
- en: From the perspective of a fast burn alerting policy, select the appropriate
    threshold in relative comparison to the baseline for the defined lookback interval.
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从快速触发警报策略的角度，选择相对于基线的适当阈值，用于定义的回顾时间间隔。
- en: a) The threshold = the baseline.
  id: totrans-303
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 阈值 = 基线。
- en: b) The threshold is < the baseline.
  id: totrans-304
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 阈值 < 基线。
- en: c) The threshold is significantly higher than the baseline.
  id: totrans-305
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 阈值显著高于基线。
- en: d) The threshold is slightly higher than the baseline.
  id: totrans-306
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 阈值略高于基线。
- en: Select the appropriate options for sending alerts
  id: totrans-307
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择适当的选项来发送警报
- en: a) Email
  id: totrans-308
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 电子邮件
- en: b) Page
  id: totrans-309
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 页面
- en: c) Text
  id: totrans-310
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 文本
- en: d) All of the above
  id: totrans-311
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 以上所有
- en: Select the monitoring that is best suited to paging incidents.
  id: totrans-312
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择最适合用于分页事件的监控。
- en: a) Alert-based monitoring
  id: totrans-313
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 基于警报的监控
- en: b) White box monitoring
  id: totrans-314
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 白盒监控
- en: c) Log-based monitoring
  id: totrans-315
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 基于日志的监控
- en: d) Black box monitoring
  id: totrans-316
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 黑盒监控
- en: Which of the following is not part of Google's recommended golden signals?
  id: totrans-317
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪项不是谷歌推荐的黄金信号的一部分？
- en: a) Traffic
  id: totrans-318
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 流量
- en: b) Throughput
  id: totrans-319
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 吞吐量
- en: c) Saturation
  id: totrans-320
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 饱和度
- en: d) Errors
  id: totrans-321
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 错误
- en: Which of the following alerting policies recommends a longer lookback window?
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪项警报策略建议使用更长的回顾窗口？
- en: a) Fast burn
  id: totrans-323
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 快速触发
- en: b) Slow burn
  id: totrans-324
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 慢燃
- en: c) Both
  id: totrans-325
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 两者都有
- en: d) None
  id: totrans-326
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 无
- en: Which of the following represents the action of collecting, processing, aggregating,
    and displaying real-time quantitative data relating to a system, such as query
    counts and types, error counts and types, processing times, and server lifetimes?
  id: totrans-327
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪项表示收集、处理、聚合并显示与系统相关的实时定量数据的操作，例如查询计数和类型、错误计数和类型、处理时间和服务器生命周期？
- en: a) Alerting
  id: totrans-328
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 警报
- en: b) Monitoring
  id: totrans-329
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 监控
- en: c) Debugging
  id: totrans-330
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 调试
- en: d) Troubleshooting
  id: totrans-331
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 故障排除
- en: Which of the following represents time series measurements gathered over irregular
    time intervals?
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪项表示在不规则时间间隔收集的时间序列测量？
- en: a) Metrics
  id: totrans-333
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 指标
- en: b) Events
  id: totrans-334
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 事件
- en: c) Logs
  id: totrans-335
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 日志
- en: d) Trace
  id: totrans-336
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 跟踪
- en: Which of the following is not a suitable source of white box monitoring?
  id: totrans-337
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪项不是白盒监控的适用数据源？
- en: a) Metrics
  id: totrans-338
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 指标
- en: b) Load balancer
  id: totrans-339
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 负载均衡器
- en: c) Logs
  id: totrans-340
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 日志
- en: d) Traces
  id: totrans-341
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 跟踪
- en: Answers
  id: totrans-342
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 答案
- en: (b) White box monitoring.
  id: totrans-343
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (b) 白盒监控。
- en: (a) Logs.
  id: totrans-344
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (a) 日志。
- en: (c) The threshold is significantly higher than the baseline. The recommended
    level is 10x.
  id: totrans-345
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (c) 阈值显著高于基线。推荐的级别为10倍。
- en: (d) All of the above, including email, pages, and texts.
  id: totrans-346
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (d) 以上所有，包括电子邮件、页面和短信。
- en: (d) Black box monitoring.
  id: totrans-347
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (d) 黑盒监控。
- en: (b) Throughput. The four golden signals are latency, errors, traffic, and saturation
  id: totrans-348
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (b) 吞吐量。四个黄金信号是延迟、错误、流量和饱和度
- en: (b) Slow burn alert policy
  id: totrans-349
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (b) 慢燃警报策略
- en: (b) Monitoring
  id: totrans-350
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (b) 监控
- en: (b) Events. Events are time series measurements gathered at irregular time intervals.
    Metrics are time series measurements gathered at regular time intervals.
  id: totrans-351
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (b) 事件。事件是在不规则时间间隔收集的时间序列测量。指标是以规则时间间隔收集的时间序列测量。
- en: '(b) Load balancer. It is best suited as a source for black box monitoring.
    White box monitoring collects information from three critical components: metrics,
    logs, and traces.'
  id: totrans-352
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (b) 负载均衡器。它最适合作为黑盒监控的数据源。白盒监控从三个关键组件收集信息：指标、日志和跟踪。
