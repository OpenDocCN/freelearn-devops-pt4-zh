## 第二十五章：介绍安迪·克莱门科

安迪·克莱门科是 Docker 公司的一名资深解决方案工程师和架构师。他还是一名技术专家和 DevOps 分析师，专注于帮助组织从传统的开发实践过渡到一套现代化的文化、工具和流程，提升软件的发布频率和质量。你可以通过 Twitter 关注他，用户名是 `@clemenko`。

**维克托·法尔西奇**：我想从我问每个人的一个问题开始我们的讨论：什么是 DevOps？

## 什么是 DevOps？

**安迪·克莱门科**：DevOps 是一种生活方式。它的核心在于能够适应新技术，不仅仅是从开发者的角度来看，也从运维的角度来看，同时保持灵活。这并不是说 DevOps 仅仅是这些。它还融入了很多其他的概念，这也是为什么我称它为一种生活方式。除了能够适应，你还需要容器、十二因素应用、声明式基础设施和基础设施即代码。是的，周围有很多流行词汇，但归根结底，它只是生活方式。它是关于灵活性、重新调整工具并不断向前迈进。

**维克托·法尔西奇**：那么，安迪·克莱门科是如何将工具融入这个框架中的呢？因为在今天的领域里，我发现每一款工具几乎都是 DevOps 工具。

**安迪·克莱门科**：在某种程度上，工具几乎并不重要，因为你可以给一个木匠任何一把锤子，他们依然能够成功。在 DevOps 中，你可以给任何一个 DevOps 或 SRE 工程师（现在你想称他们为啥都行）一个工具——无论是 OCI、Rocket、Docker、Kube、Swarm、Jenkins 还是 GitLab，都没关系——他们应该能够使用这些工具。但最终，关键是要足够灵活和开放，接受下一个看起来完全不同的工具。

"DevOps 是一种生活方式。它的核心是能够适应新技术，不仅从开发者的角度，也从运维的角度来适应。"

—安迪·克莱门科

**维克托·法尔西奇**：说到工具，我对容器非常感兴趣。你认为，作为一个行业，我们开始同时讨论容器、微服务和 DevOps 是巧合吗？这纯粹是运气，还是背后有某种联系？

**安迪·克莱门科**：我会说这是一个巧合。容器帮助加速了 DevOps 生活方式的普及，但在我曾经在大型 Hadoop 集群上工作，并且看到过使用 Puppet、Chef、Salt 和 Ansible 的 DevOps 方法论之后，我们所做的实际上就是重新调整工具，提升了抽象层次。我们不再是在操作系统层面进行编排，而是在集群层面进行编排。

但这种关联帮助加速了发展的进程。现在无论你是在工业界、政府部门，还是其他地方，情况都是一样的。大家有一个共识：当你有一个开发团队和一个运维团队时，他们常常会“把东西丢到篱笆另一边”。DevOps 的生活方式就是将这两个团队及其职能结合起来。忘记团队吧，因为一个拥有改变能力的团队比两个尝试做同样事情的团队要更快。在这种加速中，我认为容器起到了作用。老实说，我想说的是，这关乎软技能，关乎人，关乎团队，和工具没关系，就像 Docker、DevSecOps 和 GitOps 这些都只是流行词汇。我们将达到这样一个阶段，不论你创建的是容器、虚拟机还是 JAR 包，它里面都有元数据，告诉你它应该如何运输，谁应该批准它的生命周期。

**Viktor Farcic**：这很有道理。

**Andy Clemenko**：但我记得去年在 KubeCon 上，Brendan Burns 在一个面向实践者的会议中做了一个关于自我部署镜像的演示，展示了你的对象不仅了解自己需要什么才能保持健康，而且还知道它需要去哪里，谁需要批准它的使用以及安全来源。所以，现在你有了内置的审计追踪，并且你为这个对象加上了尽可能多的嵌入式元数据。

**Viktor Farcic**：所以，几乎可以说我们正在转向通过代码和元数据进行沟通？我不需要告诉你我想要什么，因为这些内容都已经在我的工件中自包含了。

**Andy Clemenko**：完全正确，作为构建者，或者作为团队来构建这些对象，你可以描述它应该做什么，同时也有机会将其引导到其他方向。但今天，如果我给你一个 Docker 镜像，你可以对它做任何事情。我喜欢这样一个想法：在未来，我可以给你一个 Docker 镜像，我可以将其锁定，只允许你运行它，这样你就无法进入其中，也不能对它做任何奇怪的事情。但它也有安全来源，确保你知道是谁把它交给我的，然后我又通过加密技术把它交给你——至少有一个审计追踪。

下一阶段，至少在我看来，是让这些对象真正具备，我不会说是自我意识，但至少有更多有意义的关于安全性、来源和部署的元数据。假如，不是有一个`docker run`命令，里面包含三次换行并传递卷等东西，而是你直接执行`docker run`，然后容器自己就会说：“嘿，我应该有这个，在哪里呢？我应该有这个变量，但你没有给我。可以给我吗？”更自我意识的状态算是一种奇怪的描述方式。

## 描述今天的公司情况

**维克托·法尔奇**：换个话题，如果你今天要创办一家公司，它会是什么样子？人们会如何与公司互动和沟通？

**安迪·克莱门科**：我非常喜欢小型公司，那里的团队之间的界限较为模糊。所以，如果我要创办一个初创公司，我会确保我们内部的 IT 团队理解我们的产品，确保每个人都能协作工作。我认为，一旦公司人数超过几百人，围栏立刻就会出现。

我从客户互动中一再听到的一句话是：“哦，那是网络团队的事，他们能做的时候会去处理。”有了这些围栏，你就会有不同的北极星、不同的目标，或者不同的战略和管理者。我更喜欢一个扁平化的组织结构和跨职能团队。比如，今天你可能对监控和帮助客户解决方案感兴趣，但这并不意味着内部的 IT 团队不能借此机会。

**维克托·法尔奇**：但这些围栏是不可避免的吗，还是说它们只是更为熟悉？我自己也在想，因为我还没有见过一家像那样运作的大公司，而这是我很想看到的事情。

**安迪·克莱门科**：我认为你会看到一些团队，但不幸的是，与跨职能团队相对的却是组织的稳定性。因为如果你有一个团队，随着公司规模的增长，你会发现这些团队会分成几个小团队。那么，问题来了，如何组织这些团队？简单来说，如何*控制*它们，确保它们一起前进？你可以通过给每个团队设立一个北极星来做到这一点，这样就能开始形成这些垂直的围栏。

这其中的难点在于，组织结构本身就很难，而问题是很多人最终都进入了中层管理。由于这个原因，人们有很大的动机去维持中层管理的存在。看看 300 人公司门槛的角度。一道门槛是 100 人，第二道是 300 人，然后是大约 500 到 600 人，甚至可能更接近 1000 人。但对我来说，在理想的公司中，我喜欢保持在几百人的规模范围内。

举个例子，我昨晚收到了一个邮件，内容是：“嘿，我知道你下周三在罗利。你能在周四到休斯顿吗？”我回复说我愿意去，只要他们批准我的差旅申请，我就会去，并完成任务。这不是我的团队，也不是我的区域，但他们需要帮助，那就去吧。

**维克托·法尔奇**：这就是奉献！

## 个性、诚实与感知环境

**安迪·克莱门科**：另外，现在所有行业中有两种类型的性格。要么是 A 型，要么是 B 型，字面上的意思。A 型人会投入进去，做任何事情以完成任务。用一个用滥的词来说，A 型人的座右铭是“任务，任务，任务”。而 B 型人则在一定程度上会坐下来，按下按钮。我在各行各业中都看到了这种情况。

我是兼职的志愿消防员，我在消防服务中看到这种情况，在公司里也看到，在政府部门也看到了。事实上，我在各个地方都看到了。诀窍是，如果你真的想保持跨职能团队和文化的持续发展，你需要找到那些愿意付出额外努力的人。并不是每天都这样，因为那样会失控。但要找到那些愿意做的人，展示出勇气并付诸实践，然后再考虑抱怨或获得补偿的事情。

“A 型人会投入进去，做任何事情以完成任务。用一个用滥的词来说，A 型人的座右铭是‘任务，任务，任务’。而 B 型人则在一定程度上会坐下来，按下按钮。我在各行各业中都看到了这种情况。”

—安迪·克莱门科

**维克托·法尔奇奇**：这非常有趣，因为我曾和一些人谈过，他们说，“哦，我所在的公司在增长，而随着公司成长，我开始怀疑是否要换个地方工作，原因正是如此。”然后我常常会收到类似的后续问题，“哦，但如果你们发展到 1,000 人，那很好，因为更多的人会将这种增长与更好的业务等因素挂钩。”我从未真正理解这一点，因为你不得不问，**这对我有什么好处？** 这不是我的公司。如果我们是 1,000 人，而不是 200 人，那为什么更好呢？

**安迪·克莱门科**：如果从纯粹的财务角度来看，假设有两家公司，一家有 10 名员工，另一家有 1,000 名员工，谁赚得更多？答案是位于公司顶部的人。因此，公司的规模越大，收入越多，股票的价值也就越高。

你是否直接被激励去做这些事？说到底，金钱真的是你的动力吗？我穿着连帽衫，我是一个拥有工程学学位的工程师，想要解决问题并制造一些酷炫的东西；这就是我的全部。我现在的工作是帮助客户解决问题，创造一些酷炫的东西——我在帮忙，我喜欢这样做。如果我们多卖了一个小工具，我会得到额外的一分钱吗？**不会直接得到。** 也许在年底间接得到一点。但那不是我个人的北极星。我认为，需要一种特定类型的 CEO，才能按下刹车，并不认为大规模扩张会解决所有问题。因为在我看来，并非所有的增长都是好的。

**维克托·法尔西奇**：我想这取决于你追求的是什么。我有相同的感觉，我肯定是在追求钱，直到某个程度。我不能每月只赚 100 美元；但我也有一个限度，到了这个限度我就会觉得，“好吧，这已经没什么区别了，”除非我有雄心去买一架直升机之类的东西。

## 寻找你的北极星

**安迪·克莱门科**：那是你的北极星！暂停一下这次采访，我想问问你怎么看？我知道我们的讨论一直集中在我身上，但你怎么看待公司规模和拥抱 DevOps 这件事？

**维克托·法尔西奇**：关于公司规模，我跟你感觉类似，公司越大，我在其中工作的乐趣就越少。

**安迪·克莱门科**：很高兴你和我看法一致。

**维克托·法尔西奇**：我觉得这算是我的定义。我觉得做软件工程在某种程度上是一种特权。我之所以这么觉得，是因为我们是为数不多的，通常是为了乐趣而加入的职业，而且我们还能一直乐趣满满。归根结底，只要我还在玩得开心，那就太棒了。只是我觉得我们越大，乐趣就越少。

我访问了很多公司，我觉得他们没有希望。我和他们合作了短时间，教他们怎么做这做那。但一年后我回来，问他们在做什么，他们却问我，“你是什么意思，‘告诉我们在做什么’？你去年在这儿，知道我们在做什么！”

**安迪·克莱门科**：这就是问题——没有什么变化。就流行语或术语而言，官僚主义是与 DevOps 及其生活方式的反模式。我只是想做 DevOps 生活方式的公式，但在这些大型组织中，确实需要官僚主义，因为你必须在某种程度上组织这么多人。否则，就会变成西部荒野。你得做得像个更好的初创公司。我真的认为我们需要拆分那些大公司，把它们保持得小一点。CEO 必须有勇气不让公司发展到 10,000 名员工，因为一旦公司大了，你就会失去灵活性，也失去了适应这种生活方式以及随着风向变化，适应任何新北极星的能力。

但不幸的是，钱就是权力。我们需要的是大公司所拥有的资金，来资助那些小公司。这就像一种奇怪的共生关系，但并非互惠的；中间存在一个空白。我目前正在执行一个合同，已经工作了 1200 小时，或者说 50 天，我们的团队在过去两个月里，已经花费了 500 小时的时间，用来配置我们的笔记本电脑，跟他们说，“嘿，我们需要一个 NFS 共享，我们需要 Windows 虚拟机。”我们确实处于一种“需要这个需要那个”的状态。问题是公司的回应是，“是的，它正在来，伙计。让我们调查一下。”我有一台笔记本电脑，始终保持 VPN 连接。不错，这很好用，但突然之间，我无法通过 SSH 连接到 Linux 主机，然后他们又怪我们关闭了某些服务。

我的意思是，我可以通过跳跃和跳动来解决——我是个技术宅——但这显然是个防火墙问题。所以，接下来的自然反应是，“好吧，我们会提交一个工单。”没问题，但现在你得等六周，等网络团队处理。那时我会对网络团队说，“嘿，伙计们，你们想让这个项目成功吗？”公司会回应，“好的，我们会接受你们那张百万美元的支票，但现在我们的员工越来越沮丧和烦躁，因为我们没有做任何事情。”

**Viktor Farcic**：但在以前，我有一种感觉，当我处于这种情况时，我不会觉得这是在浪费我的时间，因为我有薪水可以拿，但你们完全是在浪费你们的钱。最终，我会拿到薪水，所以我不在乎。但后来我意识到，也许我们对事情的看法不同。实际上，我认为完全无关紧要——零进步——的事，对于别人来说可能是大事。

**Andy Clemenko**：我想这跟 DevOps 的生活方式有关，我认为这也是关于不断前进的。它意味着迈出一步，即使是从三个月缩短到两个月的微小步伐，那也是向前的一步。在精神上，当我没有前进时，无论是在公司、生活、财务还是其他方面，我都会感到沮丧。我喜欢那种前进的动力。我相信，有一个程度是，公司至少会感觉到前进的方向，尽管这不是你和我理想中的目标。

“问题是，一些公司只是说，‘我们想要 DevOps。’那是他们的目标，但你在那里却在想，他们根本不明白 DevOps 究竟是什么。”

—Andy Clemenko

我在开始合作时做的一件事就是尽力确立一个北极星目标，不管是短期的、中期的，还是长期的项目。这可以是多个北极星，或者是一个系列，但至少你知道你最终想要去的地方。因为这样，你在任何时候都可以问自己，“我是在朝着目标前进，还是偏离了方向？如果偏离了，原因是什么？”因为有时候你得回头重新寻找路径，那没问题，但至少你得理解自己正在倒退，远离最终的目标。

不幸的是，问题在于有些公司只是说，“我们想要 DevOps。”这是他们的目标，但你在想的是他们根本不理解 DevOps 实际上是什么。最让我感兴趣的是，当公司说他们想要 Docker，这几乎是他们常挂在嘴边的话。但问题是，Docker 对他们来说意味着什么？

我常开玩笑说 Docker 生活方式，因为 Docker 不仅仅是容器。它是 CI/CD，是版本控制。一些地方甚至没有持续的版本控制，无论是通过监控还是日志记录。它包括 ELK、Splunk、Prometheus 和 Grafana。所有这些都是你要添加到基础设施中的聚合系统。实际上，它甚至有点像 Puppet 或 Ansible。它是理解 Kubernetes 的 YAML 配置，而我只能说，“天啊，救命！”

**Viktor Farcic**：完全正确！

## 理解你买的是什么

**Andy Clemenko**：但它也包括 Jenkins、GitLab，所有这些东西。举个例子，以我现在的项目为例。我们需要版本控制，也需要一个 CI 系统。所以，我问客户，“你们有吗？”他们说，“嗯，那边的团队有——”我问，“你们有中央系统吗？”他们回答说，“没有，我们没有中央系统。”然后他们可能会问，“那我们能自己搞定吗？”但那其实不是他们的工作。最终的结果是，你得去找另一个团队，问他们，“你们知道自己在买什么吗？”

一个经典的例子是，你买了一辆车，开出车行，但 200 英里后，你会抓耳挠腮，因为车子停了。你没意识到你得加油，或者得换轮胎、加机油、清洁汽车，还要做其他的维护工作。你可能会想直接回去换一辆车。但不行，你得理解自己买的是什么。

**Viktor Farcic**：完全正确。我觉得我面临的一个重大困难是，当我和客户合作时——假设他们的目标是持续交付流水线——我觉得我不能欺骗他们，也许我应该告诉他们，他们不应该在这种情况下追求持续交付。

**安迪·克莱门科**：我曾与客户进行过具体的对话，并说过类似的话，也许容器并不适合他们。如果他们不愿意建立 CI 系统或版本控制，随后他们也不愿意理解构成 DevOps 生活方式的所有这些内容，那么也许容器并不适合他们。

有时会被误解，但我为自己能够对客户保持诚实而自豪，并告诉他们：“你们需要这个、这个、这个和这个。”事实上，我昨天在一个集成商那里做了同样的事。我在白板上写下了他们需要提供的清单，因为他们正在构建一个参考架构——基础设施、监控、日志记录和 CI/CD——而他们从开发角度出发，更担心 CI/CD，但我告诉他们，提供 CI/CD 只是其中一项工作，因为，嘿，你们在构建很棒的小部件，但它们要去哪里？怎么执行？如果你们无法高效部署，那就没有意义。

**维克托·法尔奇奇**：但有时，我认为这不仅仅是与意愿或能力有关。

**安迪·克莱门科**：如果你的目标是做最低限度的工作，那就继续做吧。同样，如果那对你有效，那就太好了。但请不要妨碍那些想要改变并向前迈进的人。

你必须足够勇敢地告诉那些人，也许你应该停留在过去。也许你应该坚持使用 Windows Server 2003，而不必担心容器、DevOps 和 CI/CD，因为这些都是生活方式。客户不一定总是喜欢听到真相，但我宁愿对客户保持诚实，而不是试图操控他们。我认为诚实能够建立更健康的关系，因为它建立了长期的信任，有时候，它甚至能促成客户的改变。偶尔给客户一点“耳光”也许并不是个坏主意。

**维克托·法尔奇奇**：完全正确，至少对于学术界或销售人员来说。

**安迪·克莱门科**：我昨天参加了一个销售电话会议，会议内容就是“卖、卖、卖”。这家公司关心的只是前进。那么问题是，他们应该为他们的 Jenkins 服务器使用哪个 Docker 引擎？我觉得关键在于问自己是否真的需要支持。你的公司政策是否规定你们一定要有支持？如果是的话，那我们可以直接为你们卖两张节点许可证，每个节点每年 1,500 美元。对于他们大多数预算来说，这几乎是一个四舍五入的误差。

我的回应是你可以运行 CE，而你实际需要的支持几乎为零，因为我一直在用 CI 系统构建 CE。公司的回应是让我们给他们发报价。缺点是我们无法销售专业服务，包括完整的产品套件。但你知道吗？归根结底，至少客户感觉他们从销售人员和我这里得到了一个诚实的答复。

“客户不一定总是喜欢听真话，但我宁愿一开始就对客户诚实，而不是试图操控他们。我认为诚实会创造更健康的关系，因为它建立了长期的信任，有时候，它还能推动客户的变化。”

—Andy Clemenko

**Viktor Farcic**：之前你提到过 Kubernetes 的 YAML，实际上我记得你说过，“天啊，帮助我们！”你为什么会这么说呢？

## 论 Kubernetes、Docker 和降低入门门槛

**Andy Clemenko**：每当有新技术出现时，开发者必须降低入门门槛，特别是对于改变抽象视图和改变工具来说，你必须让它变得容易。Rancher 在使编排变得简单方面做得非常出色。他们需要一个目录，天啊，真是太棒了。

我曾经有一个公司主管，他完全不是技术宅。能够通过点击两个按钮就部署一个 Ghost 博客服务器，让他大吃一惊。你必须把这个入门门槛降得非常低。我现在看到的 Kubernetes 问题是，YAML 本身在单个对象类型中用了四次`spec`。YAML 格式没问题，每个人都能做垂直线，并且在他们的代码中正确对齐空格。

但它的整体结构呢？昨天一个客户在谈论 Swarm 与 Kubernetes，如何在 Swarm 中使用一个对象，它描述了入口 URL-FQDN，表示副本数，表示端口数和其中的卷，且是一个对象——在 Kubernetes 的术语中，这是七个对象。那有点令人沮丧；更不用说目前 Kubernetes 有 37 个顶层对象了。然后是我最喜欢的一个，叫做 CRD，自定义资源。如果我们的理论足够适合你，你可以自己创建一个，我们就和它一起工作。Kelsey Hightower 曾说，Kubernetes 不是最终目标。有人需要出来，我要向 IBM 和 Red Hat 致敬，OpenShift 变成了一个有主见的 Kubernetes。这很酷，但那不是 Kubernetes，我认为把它卖成 Kubernetes 是不公平的。

**Viktor Farcic**：对，那么，在你看来，应该有什么东西来解决这个问题？

**Andy Clemenko**：有人需要出来说，我们都将在下面使用 Kubernetes。我们理解 Kubernetes 的 YAML 格式，但我们会简化它，并制作自己的转换应用程序来格式化它。

它将转化为更低层次的原语，转化为 37 个顶级对象，以至于开发人员只需说，“这是我的镜像，”或者更好的是，“我们讨论过元数据是与镜像一起临时存在的，但这是我的镜像。这里是副本数，这是它应该在的网络，这里是它正在监听的端口——端口号，而且非常简单，在 5-20 行内，最简化的形式。”

看看 Helm：他们一直在尝试做到这一点，但 Helm 本身就很复杂。你必须拉取图表。我甚至没看 Helm，而人们却说 Helm 很简单。但，不，事实并非如此。你一次又一次看到，在帮助这些公司理解 DevOps 生活方式时——这些工具非常难。

**维克托·法尔奇奇**：它很简单，直到它不能完全做到你想要的，然后它就变成了一场噩梦。

**安迪·克莱门科**：看看围绕 Kubernetes 的炒作周期。我有客户说，“我们想要 Kubernetes！”我就问，“你们在做什么特定的事情吗？你们是拉取的吗？为什么特别需要 Kubernetes？”这是一个他们无法回答的问题，因为他们根本没有答案。其实，这归根结底是因为某个高层看到它在《CIO 周刊》上，或者它现在正是流行的 buzzword，他们必须拥有它。然后你开始向他们展示那个 YAML，或者是为了将入口控制器与部署前面的服务连接，你必须有一个入口对象。现在这就是四个对象。

**维克托·法尔奇奇**：我问这个问题的原因是，当我跳入 Docker 时，我觉得它是我能为公司里每个人使用的少数几种技术工具之一。如果你是测试员，那它对你有用；如果你是开发人员，它对你也有用，就像你是操作员一样。当时，Docker 几乎是一个沟通工具。它对每个人都有用，入门门槛也很低。我甚至能向我妈妈解释它。但是后来，Kubernetes 来了，我很佩服它，因为 Kubernetes 非常强大且可扩展，它允许你做任何事情，甚至包括做咖啡。但现在，我实际上无法再解释 Kubernetes 是什么，除非某个人决定将自己的生命奉献给 Kubernetes。

**安迪·克莱门科**：这是一种信仰。

**维克托·法尔奇奇**：由于其复杂性，我认为 Kubernetes 不能只是你工具包中的另一个工具。你需要专注于它。因此，在我看来，它对开发人员是没用的，因为他们永远学不到 Kubernetes 所需的一切。虽然也许我有点悲观。

“所罗门·海克斯（Solomon Hykes）并没有发明容器；让我们诚实一点。[…] 他和他的团队所做的，只是让 Docker 以一种更简单的形式运行，对我来说，这是一个转折点。”

— 安迪·克莱门科

**Andy Clemenko**：不，我同意你的观点，因为我也有同感。对我们在 Docker 的激动之处在于，所罗门·海克斯并没有发明容器；让我们老实点。我们过去已经有了分区、属性和封装技术。他和他的团队能做的只是简化 Docker 的运行形式，对我来说，这是一个关键时刻。我真的认为我们需要一个操作平台——一个简化的框架，这也是我对 Kubernetes 被应用到 Docker Enterprise 中感到兴奋的原因。

如果我们能像苹果那样对待它：让它简单些；让它运行起来，降低入门障碍并向前推进，那么，希望我们能在 Kubernetes 之上进行足够的抽象。如果有人想要全天候使用`kubectl`，就留下这扇门开着，但要稍微抽象一点，使其足够简单可行。当我们谈到终身者与主动追求者以及大公司时，我认为，一旦入门门槛稍高于一英寸，就足以引起很大的阻力。如果你想在公司内推动变革，你必须让这种阻力——可能发生的阻力——降到零。我想这几乎就像一个数学函数。你越接近零阻力，组织内变革的可能性就越高。因为我知道，当我第一次接触 Docker 时，至少从系统管理员的角度来看，我把它看作是一种威胁。

**Viktor Farcic**：你真的把它看作是威胁？那么从那时起到现在有什么变化？因为你现在是 Docker 的高级解决方案工程师，所以你最初的看法一定是错的。

**Andy Clemenko**：当时，我把 Docker 视为威胁，因为开发者可以做那些需要系统管理员的事情。因此，我的第一反应是 Docker 反对系统管理员。但那是直到我第一次`docker run`。然后灵光乍现，我有了一个顿悟：“天哪！我得去这个了不起的公司工作。我决定了！”但再说一遍，你必须尽可能降低入门门槛。

你有没有看到新开发者看到那个 1,700 行的 Kubernetes YAML 文件用来部署 Prometheus 和 Grafana 时的表情？我昨天做了，他们的下巴都快掉地上了。

**Viktor Farcic**：我知道你的意思，我经常看到这种表情。人们经常打电话给我，说：“Viktor，你能帮我们处理这个问题吗？”，或者告诉我他们想要跳入 Kubernetes，前半个小时都是兴奋的，但随后现实开始显现。

我认为在我们讨论 DevOps 的背景下，这是一个有趣的话题。但我认为 Kubernetes 促进了这些角色的创建，并且系统管理员将能够使用它。

我希望未来我们作为一个行业，能够不再讨论 Kubernetes，而是看到它上面有一些只有少数人了解的东西。我猜这和你描述的 Docker E 差不多。

**安迪·克莱门科**：现在的内核开发者有一个问题；每一层总会有极端的专家，但直接与这一层互动的人数变得非常少。

**维克托·法尔西奇**：因为你没有在使用它。

**安迪·克莱门科**：没错，没必要。

**维克托·法尔西奇**：我现在在使用 Mac 和你交谈。我不知道它背后是什么，因为我不关心。

“老实说，我甚至不关心这个容器是否符合 OCI 标准。最终，我只希望它能工作。我希望它是可移植的。我希望它是安全的。我希望它是简单的。”

—安迪·克莱门科

**安迪·克莱门科**：这是一个很好的观点。我相信是来自 Sun 的斯科特·麦克尼利，曾在多年前谈到过 Sun Grid 的部署以及 SAS Grid 的首次亮相。他曾说，当你插上吹风机时，你不需要了解核能。你只需要插上吹风机，然后它就能工作。所以，今天应用同样的想法，因为我不关心下面的编排器是什么——老实说，我甚至不关心这个容器是否符合 OCI 标准。最终，我只希望它能工作。我希望它是可移植的。我希望它是安全的。我希望它是简单的。

## 展望未来

**维克托·法尔西奇**：那么，接下来呢？

**安迪·克莱门科**：在不久的将来，我认为无服务器架构会逐渐获得更多动力，但我仍在等待无服务器架构能够直接写入底层编排器，而不是像现在这样，作为一个额外的层级存在。对我来说，无服务器架构本质上只是一个快速反应调度器，某种程度上。

埃利亚斯·佩雷拉在 OpenVAS 方面做了一些非常棒的工作，甚至让它具备了自我自动扩展容器的能力，因为它部署了自己的 Prometheus。对我来说，从概念上讲，在多个层次上拥有类似的功能似乎有些多余。那么，我想问一下：如果我们能将 OpenVAS 集成到底层的编排器中，为什么不直接将它集成到 Kube 或者 Swarm 中呢？

至少这样的话，我会提倡一个 38 个顶层对象。但是，关键是，如果你有更多的批处理任务，比如无服务器架构，它们仍然可以使用相同的调度。你不需要在它们之上再构建和添加所有这些额外的东西来做同样的事。我的意思是，我希望能看到一个编排器只需要说：“好，1 到 5 是长时间运行的，6 和 7 是无服务器的。”我们刚才还提到了自我感知的特性。如果你有一个容器，它会说，“如果我在 10 分钟内没有被使用，关闭我”怎么办？

在这种情况下，你甚至不需要为无服务器架构或守护进程分别创建一个对象。这个东西本身是自我意识的，它会说：“嘿，我没被使用。把我关闭。”它会告诉编排器：“我不忙，把我关掉。”然后当下一个请求到来时，编排器会说：“醒来。”就这样，为什么不呢？我说我们应该模糊这些界限。你不觉得这样让事情变得更简单吗？让我问你，Viktor，你还记得第一次执行`docker run`时的那个时刻吗？

**Viktor Farcic**：这就是我在说的。当我第一次运行 Docker 时，我的反应是：“好吧，我十分钟前开始，现在我已经明白它是怎么回事了。我不知道幕后发生了什么，但它能工作。”

**Andy Clemenko**：你能够执行一个`docker run`并查看你的网页，这使你得到了那个灵感时刻，这正是我们对所有 DevOps 工具的需求。这就是变革真正发生的方式——通过这些灵感时刻。

**Viktor Farcic**：没错，不过回到无服务器架构，你会倾向于选择你所描述的那种方式，还是类似于 Lambda 和云服务商的专有技术那些东西？

**Andy Clemenko**：我不会下任何赌注，因为今天的计算发生在各个地方。它发生在你的手表上，发生在你的数据中心，也发生在别人数据中心。无论是本地部署还是云计算，还是无服务器架构和完整的守护进程，或者你想怎么称呼它——服务器/无服务器。可能不是 50/50 的比例，它们会流动。我认为会一直存在两者的平衡，因为安全和财务原因。我经常听到客户说，公司政策要求我们不能接触互联网，所以他们完全是隔离的。你不能使用亚马逊，也不能使用 Azure，或者有一个项目团队在构建一个 VPN 到 VPC，他们会专门配置一个链接，所有这些事情。但这种平衡将一直存在，事实上，我们所做的只是转移责任。

那么，我认为无服务器架构会取而代之吗？不，我认为它会占据今天容器空间的最多 20%。但是，猜猜看？后端的格式是什么是无服务器架构的？

**Viktor Farcic**：Kubernetes？

**Andy Clemenko**：所以，它是相同的基本对象和相同的构造。那么，为什么我们不能让这个构造更加自我意识呢？无论它是批处理作业——无服务器技术上就是这样——还是一个长时间运行的守护进程，持续提供流量？

**Viktor Farcic**：因为我目前对无服务器架构的担忧是，我需要选择使用哪个平台，然后几乎永远都得坚持使用它。从技术角度来看，我本来更喜欢你刚才描述的方式——告诉我如何解释某个事物，然后告诉我它会以 Lambda、Azure 函数或 VAS 的形式运行。但这不应该是我的担忧。

“我目前对无服务器架构的担忧是，我需要选择使用哪个平台，然后几乎永远都得坚持使用它。”

—Viktor Farcic

**Andy Clemenko**：这本不应该是，但对我来说，它是一个过程。从根本上讲，在容器内部，它只是一个执行任何操作的过程——无论它是包装在 Lambda 函数、Azure、OpenVAS 容器，还是一个长时间运行的 Kube 容器中，它本质上都是一个过程。这个过程并不关心它被封装在什么里。它并不知道自己不是一个有意识的存在，不会像“我活着了！我死了。我活着了！我死了”那样循环。它只是运行。

需要构建独立的框架在我看来是在制造更多的混乱。没错，这提供了工作保障。但话说回来，这并不是低准入门槛；不过，经过一番尝试，OpenVAS 确实相当流畅。创建一个函数很简单，集成它也很简单，执行它也毫不费力，更不用说它还有自动扩展等有趣的功能了。但我仍然希望看到它完全与一个单一的协调器集成。

我会给亚马逊很多肯定。我并不喜欢他们正在构建的东西，怎么说呢，但我会给他们很多肯定，因为他们降低了准入门槛。他们让在虚拟机和对象存储中消费数据库变得过于简单。但如果你深入挖掘的话，实际上非常复杂，包括 CloudFormation 模板、所有的 IM 策略和安全组。我个人不使用 AWS 或任何类似的东西，因为它太复杂且令人烦恼。

**Viktor Farcic**：但当你说他们让它变得太简单时，我第一个想到的是，过去确实是，但现在并不是。

**Andy Clemenko**：其实，你说得对。

**Viktor Farcic**：现在我更喜欢 DigitalOcean，因为它有我需要的东西，而且没有那五万多种我不需要的东西，尽管我还是被这些东西困扰。

**Andy Clemenko**：我是一个忠实的 DigitalOcean 粉丝。

**Viktor Farcic**：说实话，我与 AWS 合作过很多次，但我仍然完全不理解它是如何工作的。但现在想想，实际上没有人真正懂；这简直是一场疯狂。我有种感觉，他们走的路径和我们之前描述的 Kubernetes 的路径一样，但它正变得越来越复杂。

**Andy Clemenko**：没错，我认为亚马逊的一个不利之处或不公正之处在于，他们让 AWS 变得非常“粘性”，因为它非常复杂，某种程度上，Kubernetes 也走上了同样的道路。它之所以非常“粘性”，是因为一旦你学会了，你就不想再用其他任何东西。看看这个事实，如果你在简历上写上“AWS 架构师”或者“认证 Kubernetes”这些字眼，你的电话就会一直响。这对那个简历上的人来说是好事，但你知道，我认为它在某种程度上把许多小公司从市场上排除掉了。

**Viktor Farcic**：不过，你知道，如果 AWS 认证的需求很高，那就意味着它实际上太复杂了，因为我不认为有人像 Kubernetes 一样说自己是容器认证专家。

**Andy Clemenko**：或者说，我已经通过 Docker 和 Kube 认证了。

**维克托·法尔奇奇**：但在 Docker 中，你到底是为了什么获得认证的？只需要两天就能通过认证。

**安迪·克莱门科**：我们的认证内容是对注册表的基础理解，以及推送和拉取等相关内容。但是你完全可以在一两周内学会并通过考试，难度不大。

**维克托·法尔奇奇**：没错。不管怎样，我知道我们现在没时间了。很高兴和你聊天，安迪。非常感谢你的时间。
