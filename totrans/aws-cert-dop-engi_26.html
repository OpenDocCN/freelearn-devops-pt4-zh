<html><head></head><body><div id="sbo-rt-content"><div id="_idContainer305">
			<h1 id="_idParaDest-474"><a id="_idTextAnchor486"/>Chapter 22: Other Policy and Standards Services to Know</h1>
			<p>There are a number of other services that are incorporated into the DevOps professional exam that span the realm of policy and standards. Each of these services has a specific role to play in the AWS ecosystem, and knowing their use case as well as where they are a good fit can help solve problems for a particular organization. Although all of these services are important to know, we will review them only briefly. </p>
			<p>In this chapter, we're going to cover the following main topics:</p>
			<ul>
				<li>Detecting threats with <strong class="bold">GuardDuty</strong></li>
				<li>Seeing how to protect data with <strong class="bold">Amazon Macie</strong> </li>
				<li>Understanding Server Migration Service</li>
			</ul>
			<h1 id="_idParaDest-475"><a id="_idTextAnchor487"/>Detecting threats with Amazon GuardDuty</h1>
			<p><strong class="bold">Amazon GuardDuty</strong> gives you <a id="_idIndexMarker1713"/>a new type of threat detection <a id="_idIndexMarker1714"/>service that was made specifically <a id="_idIndexMarker1715"/>for the cloud. GuardDuty continuously monitors feeds from one or more accounts. It then continuously analyzes the network and account activity from the sources that are being driven into the GuardDuty service. From the input sources, the GuardDuty service then uses threat intelligence coupled with behavior models and machine learning to intelligently detect threats to your environment: </p>
			<div>
				<div id="_idContainer302" class="IMG---Figure">
					<img src="Images/Figure_22.1_B17405.jpg" alt="Figure 22.1 – The GuardDuty flow from enablement to taking action&#13;&#10;" width="743" height="236"/>
				</div>
			</div>
			<p class="figure-caption">Figure 22.1 – The GuardDuty flow from enablement to taking action</p>
			<p>From the <a id="_idIndexMarker1716"/>preceding diagram, we can see that <a id="_idIndexMarker1717"/>getting GuardDuty up and running in your account takes a few simple steps:</p>
			<ol>
				<li><strong class="bold">Enable the GuardDuty service</strong> – Activating the GuardDuty service will then start to analyze multiple types of logs within your account: VPC Flow Logs, DNS log entries, and CloudTrail Events.</li>
				<li><strong class="bold">Continuously analyze the incoming events</strong> – The GuardDuty service is constantly looking at various sources of data trying to detect either unauthorized or unexpected activity in your AWS environment. These sources include AWS CloudTrail event logs, CloudTrail management events, CloudTrail S3 data events, VPC Flow Logs, and DNS logs.  </li>
				<li><strong class="bold">Detect threats to your account intelligently</strong> – Using a multitude of machine learning algorithms to process the data it collects, GuardDuty then analyzes that data on a consistent basis. These become the different types of findings that GuardDuty reports on, which are categorized into EC2 findings, S3 findings, and IAM findings. </li>
				<li><strong class="bold">Take action on the threats presented</strong> – Once a finding has been presented to you, GuardDuty will present the details of where the threat was located so that you or a member of your team can take action. This could be a specific EC2 instance, an S3 bucket, or an IAM user or group. </li>
			</ol>
			<h2 id="_idParaDest-476"><a id="_idTextAnchor488"/>Key information to understand regarding GuardDuty </h2>
			<p>When studying for the DevOps professional exam, although the GuardDuty service may not be <a id="_idIndexMarker1718"/>one of the main services showcased on the exam, it may appear either as part of a question or an answer. In these cases, it helps to have an understanding of the service and its capabilities. </p>
			<p>GuardDuty has a <a id="_idIndexMarker1719"/>number of detection categories. These include the following categories:</p>
			<ul>
				<li><strong class="bold">Reconnaissance</strong> – Activity showing a potential attacker or unusual API activity or port scanning, or items such as multiple failed login requests.</li>
				<li><strong class="bold">Instance compromise</strong> – Unusual activity such as cryptocurrency mining, malware activity, and even outbound denial of service attacks are grouped into this category by the GuardDuty service.  </li>
				<li><strong class="bold">Account compromise</strong> – If your account has an attempt to turn off the CloudTrail logging, then this would fall into the account compromise category. Also, if there are attempts to try and log into the account from locations around the world that are not normal according to the account baseline, these would fall into this category. </li>
				<li><strong class="bold">S3 bucket compromise</strong> – These include items such as credential misusage, unauthorized access of an S3 bucket from a user or IP address that has no prior history of accessing the bucket, and even access of the bucket from known malicious IP addresses; all this information is gathered via CloudTrail API calls.</li>
			</ul>
			<p>GuardDuty allows your security team and other system administrators to use IAM Access Analyzer to help them identify resources inside of your accounts that would be able to be accessed from outside of your accounts. </p>
			<p>Within a findings action that the GuardDuty service provides, there are a number of details that will <a id="_idIndexMarker1720"/>help you and/or your security team help to remedy the situation. These include the following:</p>
			<ul>
				<li><strong class="bold">CreateThreatIntelSet</strong> – This grants permission to create GuardDuty ThreatIntelSets. </li>
				<li><strong class="bold">CreateDetectory</strong> – This grants permission to create a GuardDuty detector.</li>
				<li><strong class="bold">GetFindings</strong> – This allows GuardDuty to retrieve findings.</li>
				<li><strong class="bold">StartMonitoringMembers</strong> – This allows a GuardDuty administrator to monitor member accounts.</li>
			</ul>
			<p>Your skills <a id="_idIndexMarker1721"/>as a DevOps professional are also enhanced as you understand the integrations of security and the security tooling readily available to you.</p>
			<p>Next, let's look at some of the use cases for Amazon GuardDuty. </p>
			<h2 id="_idParaDest-477"><a id="_idTextAnchor489"/>Use cases for Amazon GuardDuty</h2>
			<p>Now that <a id="_idIndexMarker1722"/>we have an understanding of the abilities of the GuardDuty service, we can take a look at some of the potential use cases where using GuardDuty would make sense. </p>
			<h3>You have suspicions that internal employees or outside users may be mining for cryptocurrency on a corporate account</h3>
			<p>Amazon GuardDuty has the ability to notify you that an EC2 instance on any account in your organization has been contacting an IP address that is associated with the Bitcoin network or other cryptocurrency-related activity. GuardDuty, in the same vein, has the ability to detect when an instance is trying to direct internet traffic with a DNS name that is associated with cryptocurrency activity. </p>
			<p class="callout-heading">Important Note</p>
			<p class="callout">If you or your organization are legitimately trying to mine cryptocurrency or doing legitimate business with this activity, there are ways with the GuardDuty service to suppress these particular rules so that you don't get alerts that do not apply to your organization. </p>
			<h3>You have a variety of data stored in your S3 buckets or you are using S3 as storage for your data lake </h3>
			<p>Amazon GuardDuty has a special category of S3 protections, which it performs, and then once enabled, it will monitor all buckets in your account. In monitoring the access patterns of the S3 usage, you do not need to take extra steps such as turning on S3 logging for any or all S3 buckets since GuardDuty monitors actions that are happening to the various S3 buckets at an API level using CloudTrail. </p>
			<p>Understanding <a id="_idIndexMarker1723"/>how Amazon GuardDuty is used in the real world is key to answering the questions about the service in the DevOps professional exam. Next, let's look at how the GuardDuty service unites with another key security service on AWS, Security Hub. </p>
			<h2 id="_idParaDest-478"><a id="_idTextAnchor490"/>Amazon GuardDuty integrates naturally with AWS Security Hub</h2>
			<p>When trying to get a comprehensive view of the state of the security of your AWS environment, <strong class="bold">AWS Security Hub</strong> is a <a id="_idIndexMarker1724"/>service that can provide <a id="_idIndexMarker1725"/>you with this view. Security <a id="_idIndexMarker1726"/>Hub collects the data from the different accounts that you manage, along with the different services being run inside of those accounts. AWS Security Hub also supports third-party integrations from partners such as Cloud Custodian, Check Point, IBM's QRadar, CrowdStrike Falcon, and others. The full list of partner integrations can be found here: <a href="https://docs.aws.amazon.com/securityhub/latest/userguide/securityhub-partner-providers.html">https://docs.aws.amazon.com/securityhub/latest/userguide/securityhub-partner-providers.html</a>. </p>
			<p>Once initiated, Security Hub begins to ingest, organize, and even prioritize the findings from other AWS security services, such as Amazon GuardDuty, Amazon Inspector, and Amazon Macie. Using Security Hub also allows account holders to prioritize the findings that are discovered for an account so that the most vulnerable items may be addressed first.</p>
			<p>It's important to note that on the Security Hub console, detection and consolidation of events are only possible after you have started the Security Hub service. Any events that have occurred prior to starting the service are not collected, and hence findings are not generated for those events. </p>
			<p>With the enablement of the AWS Security Hub console in combination with the GuardDuty service, GuardDuty findings are not only sent to the security team but are also visible to anyone who has been given IAM permissions to use the Security Hub service. This helps with the visibility of issues and delegation of responsibility.  </p>
			<p>Now that <a id="_idIndexMarker1727"/>we have seen how <a id="_idIndexMarker1728"/>AWS Security Hub and Amazon Guard Duty work together to help protect your account, we will next look at how the Amazon Macie service can work constantly to help protect your data. </p>
			<h1 id="_idParaDest-479"><a id="_idTextAnchor491"/>Seeing how to protect data intelligently with Amazon Macie</h1>
			<p>Organizations that are either moving to the cloud or have established a cloud presence over the <a id="_idIndexMarker1729"/>past few years start to quickly accumulate data. In <a href="B17405_17_Final_JM_ePub.xhtml#_idTextAnchor417"><em class="italic">Chapter 17</em></a>, <em class="italic">Advanced and Enterprise Logging Scenarios</em>, we discussed <a id="_idIndexMarker1730"/>the importance of having a good system for data hygiene that includes tagging and metadata. And although this is the optimal solution, this is not always possible. The data that you create, acquire, and accumulate can fall into a range of sensitivity and classification levels. Once you get past the public level, access to that data from those who were not authorized to access it could be classified as a breach:</p>
			<div>
				<div id="_idContainer303" class="IMG---Figure">
					<img src="Images/Figure_22.2_B17405.jpg" alt="Figure 22.2 – An example of data classification levels &#13;&#10;" width="532" height="132"/>
				</div>
			</div>
			<p class="figure-caption">Figure 22.2 – An example of data classification levels </p>
			<p>Not every organization takes the time to classify and categorize the information stored in their cloud. This can lead to a number of vulnerabilities, both internal and external.  From an internal point of view, allowing internal users access to data that they should not have the ability to reach can leave an organization exposed from the standpoint that users have either not gone through the proper cybersecurity training, have unintentionally accumulated a piece of malware on their system and have now given this item access to data that is at a higher classification level, or even the fact that the internal user has malicious intentions. </p>
			<p>Amazon Macie is a fully managed data privacy and security service from AWS that utilizes machine learning along with pattern matching. This helps Macie to discover sensitive data in your account even without any tags in place for assistance. It then helps you to protect that data by presenting you with a list of the findings. </p>
			<p>There are also predetermined patterns that utilize Amazon EventBridge so that Macie can send all of the findings to EventBridge and then, using event-driven architecture, rules in EventBridge can be utilized to trigger Lambda functions that would then process the findings automatically. </p>
			<p>Amazon Macie <a id="_idIndexMarker1731"/>provides you with four main <a id="_idIndexMarker1732"/>features regarding the discovery and protection <a id="_idIndexMarker1733"/>of data in your accounts:</p>
			<ul>
				<li>You increase visibility and the ability to evaluate your data as Macie will do the following:<p>a. It will evaluate the S3 bucket inventory in your accounts.</p><p>b. It will evaluate the S3 bucket policies in your accounts.  </p><p>After completion, it will provide a high-level overview of the total number of buckets along with the total number of objects, the storage size of those objects, and will provide an overview of the policies of these objects and buckets. With the Macie service enabled, anytime there is a change to these policies, you will be provided with a real-time notification. </p></li>
				<li>It allows you to discover sensitive data.</li>
				<li>You can manage all of the data in all of your accounts centrally.</li>
				<li>It has the ability to add automation based on the findings.</li>
			</ul>
			<p>Once Amazon Macie has been set up, it allows you to set up <strong class="bold">alerts</strong>. These alerts allow you to be notified about a potential security issue that the Macie service has discovered. There are two different levels of alerts that get sent in the Macie service: basic and predictive. <em class="italic">Basic alerts</em> are the type of alerts that Macie generates from the security checks that it performs. <em class="italic">Predictive alerts</em> are sent based on the baseline that the Macie service determines for your account and then a determination of a deviation from normal activity in your account. </p>
			<p>When an alert is sent by the Amazon Macie service, it is assigned one of four security levels. </p>
			<p>It's important <a id="_idIndexMarker1734"/>to note that Amazon Macie is <a id="_idIndexMarker1735"/>a regional service. This means that you will need to enable Macie for each region that you would like to utilize its scanning and protection capabilities.</p>
			<p>Getting started with Amazon Macie is fairly simple. You start by going to the AWS Management Console and then navigating to the Amazon Macie service. </p>
			<h2 id="_idParaDest-480"><a id="_idTextAnchor492"/>Amazon Macie use cases</h2>
			<p>As we continue to look at the Amazon Macie service, exploring different use cases of businesses <a id="_idIndexMarker1736"/>and enterprises that use it will help us gain a better understanding of the value that the Macie service brings.</p>
			<h3>Assessing an organization's data privacy and security</h3>
			<p>If your organization does not currently know the classification levels of the data being stored, or it <a id="_idIndexMarker1737"/>does not currently have a baseline of data classification levels, then using the Amazon Macie service can see whether there is any sensitive data stored in the specified accounts and lets you take appropriate actions. </p>
			<h3>Knowing when sensitive data has been placed in your datastore </h3>
			<p>Even if you have established a baseline for data storage in your accounts, allowing the Macie service <a id="_idIndexMarker1738"/>to constantly monitor any new data being stored in your account can provide you with alerts if sensitive data has been added. This is especially useful if you are combining Macie with the Security Hub service so that prioritization can be added to any new alerts that get created.</p>
			<p>After reviewing <a id="_idIndexMarker1739"/>some of the other security tools that might appear in the AWS DevOps exam, we will next examine one other service – <strong class="bold">Server Migration Service</strong> (<strong class="bold">SMS</strong>). </p>
			<h1 id="_idParaDest-481"><a id="_idTextAnchor493"/>A brief look at the migration tools available from AWS</h1>
			<p>Many organizations are still in the beginning parts of their journey to the cloud. Yet, as they look at <a id="_idIndexMarker1740"/>contracts that are up for renewal at their current data centers, there comes a pressing need for an expedited exit. Many of these companies are running their workloads these days not on bare metal servers but on virtualized server farms, using popular software products such as VMware or Microsoft Hyper-V. </p>
			<p>Seeing the need to help customers move into the cloud quickly and easily, Amazon created SMS. </p>
			<p>This service helps navigate many of the challenges that are presented when trying to move current workloads into the cloud. </p>
			<h2 id="_idParaDest-482"><a id="_idTextAnchor494"/>Bringing your servers into AWS with SMS</h2>
			<p>SMS helps <a id="_idIndexMarker1741"/>simplify the migration of multiple servers <a id="_idIndexMarker1742"/>into the AWS cloud. </p>
			<p>Using SMS helps you achieve the following:</p>
			<ul>
				<li>It helps simplify the cloud migration process.</li>
				<li>It allows you to orchestrate multi-server migrations. </li>
				<li>It minimizes downtime during the migration process. </li>
				<li>SMS supports the most commonly used operating systems, including both the Windows operating system and quite a few of the major Linux distributions. </li>
				<li>It allows you to incrementally test your server migrations.</li>
			</ul>
			<p>Although originally crafted for VMware cases, SMS now works for VMware vSphere, Microsoft Hyper-V, and Microsoft Azure migrations. These are performed using an agentless migration. </p>
			<p>Now that we have an understanding of AWS SMS, let's take a look at the key features we need to know, both in practice and for the exam. </p>
			<p>There are a few different options to move workloads into AWS. There is the CloudEndure product, which requires an agent to be installed. There is also the Import/Export service, which includes the Snow Family of instances such as the Snowball service; however, these services are more for moving and migrating large amounts of data into the AWS cloud. </p>
			<p>The main use case for SMS is when you have a number of workloads on either VMware, Microsoft Hyper-V, or in Azure and either cannot install an agent or prefer not to install an agent to perform the migration. </p>
			<p>When would <a id="_idIndexMarker1743"/>you want to use SMS? The following <a id="_idIndexMarker1744"/>use cases are <a id="_idIndexMarker1745"/>the optimal times for using SMS: </p>
			<ul>
				<li>If you have a need to migrate to AWS but need to perform an agentless migration</li>
				<li>If you need a migration solution that meets <strong class="bold">HIPAA</strong> eligibility standards </li>
				<li>If you <a id="_idIndexMarker1746"/>need a migration solution that follows <strong class="bold">Federal Risk and Management Program</strong> (<strong class="bold">FedRAMP</strong>) compliance</li>
				<li>If you need to be able to have the ability to execute an automated launch of your migrated virtual machines</li>
				<li>If you <a id="_idIndexMarker1747"/>would like to have the option of having either <strong class="bold">Amazon Machine Images</strong> (<strong class="bold">AMIs</strong>) or CloudFormation templates as the output of your migration</li>
			</ul>
			<p>Now that we have an understanding of the benefits of SMS, along with which use cases would be best optimized for it, let's examine the key features to remember about SMS. </p>
			<h2 id="_idParaDest-483"><a id="_idTextAnchor495"/>Key features of SMS </h2>
			<p>The following <a id="_idIndexMarker1748"/>are some of the key features to know about SMS:</p>
			<ul>
				<li>SMS allows you to automate the VMware, Microsoft Hyper-V, or Microsoft Azure virtual machines you have into the AWS Cloud.</li>
				<li>SMS allows you to incrementally replicate virtual machines as AMIs. </li>
				<li>Using SMS, you can migrate a group of servers as a single application that has multiple tiers and intertwined dependencies, such as a web tier, a database tier, and an application tier.</li>
			</ul>
			<p>Now that we <a id="_idIndexMarker1749"/>understand the key features, let's look at how we would go about migrating an application that is composed of a number of layers. This would include a database tier, a file-server tier, a web tier, and an application tier. </p>
			<h2 id="_idParaDest-484"><a id="_idTextAnchor496"/>Migrating multi-tier applications with SMS </h2>
			<p>Because <a id="_idIndexMarker1750"/>SMS is agentless, there is a need to download and install a special image (<strong class="bold">Open virtualization Appliance</strong> (<strong class="bold">OVA</strong>) in the case of VMware), which is called a connector. With the <a id="_idIndexMarker1751"/>connector installed on the environment, you then create a vCenter user with the correct permissions who can create and delete snapshots on selected VMs. </p>
			<p>Servers that <a id="_idIndexMarker1752"/>contain multiple tiers of an application can be either replicated as a single AMI or they can be subdivided into smaller subgroups, creating multiple AMIs. If you do subdivide a larger application, then SMS can create a corresponding CloudFormation template to launch those AMIs in a coordinated manner:</p>
			<div>
				<div id="_idContainer304" class="IMG---Figure">
					<img src="Images/Figure_22.3_B17405.jpg" alt="Figure 22.3 – An example of a launch order for an SMS job &#13;&#10;" width="466" height="347"/>
				</div>
			</div>
			<p class="figure-caption">Figure 22.3 – An example of a launch order for an SMS job </p>
			<p>It's <a id="_idIndexMarker1753"/>important to <a id="_idIndexMarker1754"/>understand that SMS cannot migrate everything to AWS. What does this really mean? This means that although the majority of your workloads can be copied into AWS and turned into AMIs, you will still need to create the underlying infrastructure for those instances to run on. </p>
			<h1 id="_idParaDest-485"><a id="_idTextAnchor497"/>Summary</h1>
			<p>In this chapter, we discussed other relevant services that can appear in the DevOps professional exam with a focus on security and policy services. This included looking at the Amazon GuardDuty and Amazon Macie services, and how they can work with AWS organizations on a regional basis to protect your assets and accounts from bad actors looking for vulnerabilities. We also examined SMS. This service is useful to know since as companies are quickening the pace of moving into the cloud from their current data centers, the ability to update those workloads once they are in there starts to fall on DevOps professionals such as yourself. </p>
			<p>In the next chapter, we will look at the structure of the DevOps Professional certification exam. We'll discuss the formats available for taking the exam and talk about the exam blueprint. We will also give some pointers for studying for and passing the exam. </p>
			<h1 id="_idParaDest-486"><a id="_idTextAnchor498"/>Review questions </h1>
			<ol>
				<li value="1">You have been brought into a company that wants to start implementing CI/CD for their builds. This company has recently gone through a security posture analysis assessment and needs to make sure that any solution implemented is secure in nature. If any vulnerability is found after implementation, there then needs to be a plan for remediation, and action must be taken to remedy the vulnerability.  </li>
				<li>After setting up the pipeline builds in AWS CodePipeline, which further steps can you take to ensure that no underlying access on the S3 buckets is available, which you created during the process?<p>a. Every 15 days, use the Trusted Advisor service to check and see whether there is a misformed bucket policy for the S3 bucket. If the S3 bucket shows up in the vulnerable access list, then craft a bucket access policy that will only allow for the CodePipeline service account to access that bucket. </p><p>b. Turn on logging for the S3 bucket. Add versioning to the newly created S3 bucket. Create a CloudWatch alarm on the bucket that measures access to the bucket. Have the alarm go off if the bucket access is more than the number of build jobs that the AWS CodePipeline runs. Add object-level encryption to the objects with AWS Key Management Service (KMS). </p><p>c. Create a bucket policy for the S3 bucket that only allows access from the account itself and the service account that is running the pipeline. Add object-level encryption to the objects with KMS. </p><p>d. Turn on logging for the S3 bucket. Enable the GuardDuty service. If something is detected, follow the remediation steps presented by the GuardDuty service. Add object-level encryption to the objects with KMS. </p></li>
				<li>Your company has just started to allow partner companies to access subscription data that is being published in a few specific S3 buckets. Access is being provided via cross-account access. Since this is a new service offering and is supposed to be a new revenue source that the company is counting on, how can you ensure that access is only being obtained by those partners that have been granted access via a subscription? Your solution should be easy to maintain with minimal effort:<p>a. Turn on CloudTrail for all regions. Create a CloudWatch alarm for access to the bucket, which is greater than the number of customers times 30. Create a bucket access control list (ACL) to block any country ranges that have no current customers. </p><p>b. Turn on CloudTrail for all regions. Enable GuardDuty. Add your current customers to the access whitelist. Review the GuardDuty findings on a weekly basis to ensure that no unauthorized access is being granted. </p><p>c. Turn on logging for the S3 bucket. Enable advanced Trusted Advisor checks. Review the Trusted Advisor checks on a weekly basis to ensure that no unauthorized access is being granted. </p><p>d. Turn on logging for the S3 bucket. Enable advanced Trusted Advisor checks. Create a bucket ACL to block any country ranges that have no current customers. </p></li>
				<li>You have just joined a company that is in the midst of moving a large number of workloads out of their current data center into the AWS cloud. Their current workloads in their data center are running on VMware vSphere. These workloads on-premises are a combination of Windows Server, Red Hat Linux, and Ubuntu Server, which need to be moved to AWS. With 400–500 servers and a tight deadline, the company does not want to have to install an agent on each virtual machine. They would also prefer to be able to test the migration incrementally during the process. Which tool would help you accomplish all of the company's objectives?<p>a. Log on to the AWS Management Console and order a Snowball so that you can download the workloads securely to the Snowball hardware. Once the Snowball has been shipped back to AWS, download the data and create AMIs from the downloaded data. </p><p>b. Use AWS CloudEndure to discover the instances which need to be migrated to the AWS cloud. Create a migration job to start the replication of the instances to the specified AWS region. </p><p>c. Log on to the AWS Management Console and start a job using SMS. Create a catalog on an on-premises server. Create and configure your migration. Track and test your migration. </p><p>d. Make sure that you have the AWS CLI installed on the machine that you plan to perform the migrations. Use the VM Import/Export service to push the VMs to the Amazon S3 service. Create AMIs from the uploaded images. </p></li>
			</ol>
			<h1 id="_idParaDest-487"><a id="_idTextAnchor499"/>Review answers </h1>
			<ol>
				<li value="1">d</li>
				<li>b</li>
				<li>c</li>
			</ol>
		</div>
	</div></body></html>