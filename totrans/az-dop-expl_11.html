<html><head></head><body><div id="sbo-rt-content"><div id="_idContainer260">&#13;
			<p id="_idParaDest-152" class="chapter-number"><a id="_idTextAnchor165"/>Chapter 7:</p>&#13;
			<h1 id="_idParaDest-153"><a id="_idTextAnchor166"/>Using Artifacts with Azure DevOps</h1>&#13;
			<p>In the previous chapter, we covered how to host build agents in Azure Pipelines. In this chapter, we are going to cover how to use artifacts with Azure DevOps. We will begin by explaining what artifacts are. Then, we will look at how to create them in Azure DevOps, as well as how to produce the artifact package from a built pipeline. Next, we are going to cover how to deploy the feed using a release pipeline. Then, we are going to cover how to set the feed permissions and how to consume the package in Visual Studio. Finally, we are going to cover how to scan for package vulnerabilities using WhiteSource Bolt.</p>&#13;
			<p>The following topics will be covered in this chapter:</p>&#13;
			<ul>&#13;
				<li>Introducing Azure Artifacts</li>&#13;
				<li>Creating an artifact feed with Azure Artifacts</li>&#13;
				<li>Producing the package using a build pipeline</li>&#13;
				<li>Publishing the package to the feed from a build pipeline</li>&#13;
				<li>Configuring the feed permissions from the feed settings</li>&#13;
				<li>Consuming the package in Visual Studio from the Artifacts feed</li>&#13;
				<li>Scanning for package vulnerabilities using WhiteSource Bolt</li>&#13;
			</ul>&#13;
			<h1 id="_idParaDest-154"><a id="_idTextAnchor167"/>Technical requirements</h1>&#13;
			<p>To follow this chapter, you need to have an active Azure DevOps organization. The organization we'll be using in this chapter is the <strong class="bold">PartsUnlimited</strong> organization, which we created in <a href="B16392_01_Final_JM_ePub.xhtml#_idTextAnchor027"><em class="italic">Chapter 1</em></a><em class="italic">, Azure DevOps Overview</em>. You also need to have Visual Studio 2019 installed, which can be downloaded from <a href="https://visualstudio.microsoft.com/downloads/">https://visualstudio.microsoft.com/downloads/</a>.</p>&#13;
			<p>The source code for our sample application can be downloaded from <a href="https://github.com/PacktPublishing/Learning-Azure-DevOps---B16392/tree/master/Chapter%207">https://github.com/PacktPublishing/Learning-Azure-DevOps---B16392/tree/master/Chapter%207</a>.</p>&#13;
			<h1 id="_idParaDest-155"><a id="_idTextAnchor168"/>Introducing Azure Artifacts</h1>&#13;
			<p>It is likely that <a id="_idIndexMarker499"/>every developer has used a third-party or open source package in their code to add extra functionalities and speed up the development process of their application. Using popular, pre-built components that have been used and tested by the community will help you get things done more easily. </p>&#13;
			<p>Functionalities, scripts, and code that have been built by various teams in your organization are often reused by other teams and in different software development projects. These different artifacts can be moved into a library or package so that others can benefit from this.</p>&#13;
			<p>There are different ways to build and host these packages. For instance, you can use NuGet for hosting and managing packages for the Microsoft Development platform or npm for JavaScript packages, Maven for Java, and more. Azure Artifacts offers features so that you can share and reuse packages easily. In Azure Artifacts, packages are stored in feeds. A feed is a container that allows you to group packages and control who has access to them.</p>&#13;
			<p>You can store packages in feeds that have been created by yourself or other teams, but it also has built-in <a id="_idIndexMarker500"/>support for <strong class="bold">upstream sources</strong>. With upstream sources, you can create a single feed to store both the packages that your organization produces and the packages that are consumed from remote feeds, such as NuGet, npm, Maven, Chocolatey, RubyGems, and more. </p>&#13;
			<p>It is highly recommended to use Azure Artifacts as the main source for publishing internal packages and remote feeds. This is because it allows you to keep a comprehensive overview of all the packages being used by the organization and different teams. The feed knows the provenance of all the packages that are saved using upstream resources; the packages are saved into the feed even when the original source goes down or the package is deleted. Packages are versioned, and you typically reference a package by specifying the version of the package that you want to use in your application.</p>&#13;
			<p>Many packages allow for unrestricted access, without the need for users to sign in. However, there are packages that require us to authenticate by using a username and password <a id="_idIndexMarker501"/>combination or access token. Regarding the latter, access tokens can be set to expire after a given time period.</p>&#13;
			<p>In the next section, we are going to look at how to create an <strong class="bold">Artifact Feed</strong> in Azure DevOps.</p>&#13;
			<h1 id="_idParaDest-156"><a id="_idTextAnchor169"/>Creating an artifact feed with Azure Artifacts</h1>&#13;
			<p>In this demo, we are <a id="_idIndexMarker502"/>going to create an artifact feed in Azure Artifacts. Packages are stored in feeds, which are basically organizational constructs <a id="_idIndexMarker503"/>that allow us to group packages and manage their permissions. Every package type (NuGet, npm, Maven, Python, and Universal) can be stored in a single feed.</p>&#13;
			<p>For this demonstration, we are going to use our <strong class="bold">PartsUnlimited</strong> sample project again and add a new artifact feed to the project. To do this, perform the following steps:</p>&#13;
			<ol>&#13;
				<li>Open <a id="_idIndexMarker504"/>a web browser and navigate to <a href="https://dev.azure.com/">https://dev.azure.com/</a>.</li>&#13;
				<li>Log in with your Microsoft account and from the left menu, select <strong class="bold">Artifacts</strong>. Then, click the <strong class="bold">+ Create Feed</strong> button.</li>&#13;
				<li>In the <strong class="bold">Create new feed</strong> dialog box, add the following values (make sure that <strong class="bold">Upstream sources</strong> is disabled; we are not going to use packages from remote feeds in this chapter):<div id="_idContainer233" class="IMG---Figure"><img src="Images/Figure_7.01_B16392.jpg" alt="Figure 7.1 – Creating a new feed&#13;&#10;"/></div><p class="figure-caption">&#13;
Figure 7.1 – Creating a new feed</p></li>&#13;
				<li>Click the <strong class="bold">Create</strong> button.</li>&#13;
			</ol>&#13;
			<p>With that, we have <a id="_idIndexMarker505"/>created a new feed so that we can <a id="_idIndexMarker506"/>store our packages. In the next section, we are going to produce a package using a build pipeline.</p>&#13;
			<h1 id="_idParaDest-157"><a id="_idTextAnchor170"/>Producing the package using a build pipeline</h1>&#13;
			<p>Now that <a id="_idIndexMarker507"/>we have created our feed, we are going to create <a id="_idIndexMarker508"/>a build pipeline that automatically creates a package during the build of the project. For this example, you can use the sample project provided in this book's GitHub repository. This sample project consists of all the models from the <strong class="bold">PartsUnlimited</strong> project. We are going to add all the models to a package and distribute it from Artifacts. This way, you can easily share the data model across different projects.</p>&#13;
			<p>The first <a id="_idIndexMarker509"/>step is to import the GitHub repository <a id="_idIndexMarker510"/>into the <strong class="bold">PartsUnlimited</strong> organization in Azure DevOps. </p>&#13;
			<h2 id="_idParaDest-158"><a id="_idTextAnchor171"/>Adding the sample project to the PartsUnlimited repository</h2>&#13;
			<p>To add <a id="_idIndexMarker511"/>the sample models <a id="_idIndexMarker512"/>project to the PartsUnlimited repository, perform the following steps:</p>&#13;
			<ol>&#13;
				<li value="1">Navigate to the <strong class="bold">PartsUnlimited</strong> project in Azure DevOps and go to <strong class="bold">Repos &gt; Files</strong>.</li>&#13;
				<li>Select <strong class="bold">Import repository</strong> from the <strong class="bold">PartsUnlimited</strong> dropdown:<div id="_idContainer234" class="IMG---Figure"><img src="Images/Figure_7.02_B16392.jpg" alt="Figure 7.2 – Importing a repository&#13;&#10;"/></div><p class="figure-caption">Figure 7.2 – Importing a repository</p></li>&#13;
				<li>Enter the URL of the source repository into the <strong class="bold">Clone URL</strong> box and add a name for your new GitHub repository:<div id="_idContainer235" class="IMG---Figure"><img src="Images/Figure_7.03_B16392.jpg" alt="Figure 7.3 – Specifying the repository's URL&#13;&#10;"/></div><p class="figure-caption">Figure 7.3 – Specifying the repository's URL</p></li>&#13;
				<li>Click <strong class="bold">Import</strong>.</li>&#13;
				<li>Once <a id="_idIndexMarker513"/>the project <a id="_idIndexMarker514"/>has been imported, the repository will look as follows:<div id="_idContainer236" class="IMG---Figure"><img src="Images/Figure_7.04_B16392.jpg" alt="Figure 7.4 – Repository in Azure DevOps&#13;&#10;"/></div></li>&#13;
			</ol>&#13;
			<p class="figure-caption">&#13;
Figure 7.4 – Repository in Azure DevOps</p>&#13;
			<p>Now that we have imported the <strong class="bold">PartsUnlimited.Models</strong> project into an Azure DevOps repository, we <a id="_idIndexMarker515"/>can use in a build <a id="_idIndexMarker516"/>pipeline to create a NuGet package of it.</p>&#13;
			<p>In the next section, we are going to create a build pipeline that will automatically package our project into an Artifact package.</p>&#13;
			<h2 id="_idParaDest-159"><a id="_idTextAnchor172"/>Creating the build pipeline</h2>&#13;
			<p>Now that <a id="_idIndexMarker517"/>the project has been added to the repository, we can <a id="_idIndexMarker518"/>create the build pipeline. To do this, perform the following steps:</p>&#13;
			<ol>&#13;
				<li value="1">Navigate to Azure DevOps and open the <strong class="bold">PartsUnlimited.Models</strong> project once more. From the left menu, click on <strong class="bold">Pipelines</strong>. </li>&#13;
				<li>Click on <strong class="bold">New pipeline</strong> from the top-right menu and select <strong class="bold">Use the classic editor</strong> on the first screen of the wizard. </li>&#13;
				<li>On the second screen, set the properties shown in the following screenshot and click <strong class="bold">Continue</strong>:<div id="_idContainer237" class="IMG---Figure"><img src="Images/Figure_7.05_B16392.jpg" alt="Figure 7.5 – Selecting a source&#13;&#10;"/></div><p class="figure-caption">Figure 7.5 – Selecting a source</p></li>&#13;
				<li>Select <strong class="bold">ASP.NET</strong> on <a id="_idIndexMarker519"/>the next screen of the wizard <a id="_idIndexMarker520"/>and click <strong class="bold">Apply</strong>. With that, the Build pipeline will be created. Click on the <strong class="bold">+</strong> sign on the right-hand side of <strong class="bold">Agent job 1</strong> and search for <strong class="bold">NuGet</strong>.</li>&#13;
				<li>Add the NuGet task to the pipeline:<div id="_idContainer238" class="IMG---Figure"><img src="Images/Figure_7.06_B16392.jpg" alt="Figure 7.6 – Adding the NuGet task&#13;&#10;"/></div><p class="figure-caption">&#13;
Figure 7.6 – Adding the NuGet task</p></li>&#13;
				<li>Reorder <a id="_idIndexMarker521"/>the tasks and drag the NuGet task so that it's <a id="_idIndexMarker522"/>after the <strong class="bold">Build Solution</strong> task. Delete the <strong class="bold">Test Assemblies</strong> method since we don't have any tests in this project:<div id="_idContainer239" class="IMG---Figure"><img src="Images/Figure_7.07_B16392.jpg" alt="Fig. 7.7 – Reordering the tasks&#13;&#10;"/></div><p class="figure-caption">&#13;
Fig. 7.7 – Reordering the tasks</p></li>&#13;
				<li>Make <a id="_idIndexMarker523"/>the following changes to the settings <a id="_idIndexMarker524"/>of the newly added task:<p>--<strong class="bold">Display name</strong>: <strong class="source-inline">NuGet pack</strong></p><p>--<strong class="bold">Command</strong>: <strong class="source-inline">pack</strong></p><p>--<strong class="bold">Path to csproj or nuspec file(s) to pack</strong>: <strong class="source-inline">**/*.csproj</strong></p></li>&#13;
				<li>After making these changes, the task will look as follows:<div id="_idContainer240" class="IMG---Figure"><img src="Images/Figure_7.08_B16392.jpg" alt="Figure 7.8 – Configuring the task&#13;&#10;"/></div><p class="figure-caption">Figure 7.8 – Configuring the task</p></li>&#13;
				<li>Next, let's <a id="_idIndexMarker525"/>set the versioning of the package. A recommended <a id="_idIndexMarker526"/>approach to versioning packages is to use <strong class="bold">Semantic Versioning</strong>. Expand the <strong class="bold">Pack Options</strong> section and add the following values to set up versioning:<p>--<strong class="bold">Automatic package versioning</strong>: Use the date and time</p><p>--<strong class="bold">Major</strong>: <strong class="source-inline">1</strong></p><p>--<strong class="bold">Minor</strong>: <strong class="source-inline">0</strong></p><p>--<strong class="bold">Patch</strong>: <strong class="source-inline">0</strong></p><p>--<strong class="bold">Time zone</strong>: <strong class="bold">UTC</strong></p></li>&#13;
				<li>From <a id="_idIndexMarker527"/>the top menu, select <strong class="bold">Save &amp; queue</strong> and then <strong class="bold">Save and run.</strong></li>&#13;
			</ol>&#13;
			<p>The build <a id="_idIndexMarker528"/>pipeline will now run successfully. In the next section, we are going to publish the <strong class="bold">PartsUnlimited.Models</strong> NuGet package that we created in the first demo to our feed.</p>&#13;
			<h1 id="_idParaDest-160"><a id="_idTextAnchor173"/>Publishing the package to the feed from a build pipeline</h1>&#13;
			<p>Now that <a id="_idIndexMarker529"/>we've built the application and the <a id="_idIndexMarker530"/>package from our build pipeline, we can <a id="_idIndexMarker531"/>publish the package to the feed that we created in our first demo. </p>&#13;
			<p>For this, we need to set the required permissions on the feed. The identity that the build will run under needs to have <strong class="bold">Contributor</strong> permissions on the feed. Once these permissions have been set, we can extend our pipeline to push the package to the feed.</p>&#13;
			<h2 id="_idParaDest-161"><a id="_idTextAnchor174"/>Setting the required permissions on the feed</h2>&#13;
			<p>To set <a id="_idIndexMarker532"/>the required permissions, we need to go to the settings of our feed:</p>&#13;
			<ol>&#13;
				<li value="1">Log in with your Microsoft account and from the left menu, select <strong class="bold">Artifacts</strong>.</li>&#13;
				<li>Go to the settings of the feed by selecting the <strong class="bold">Settings</strong> button from the top-right menu:<p class="figure-caption"> </p><div id="_idContainer241" class="IMG---Figure"><img src="Images/Figure_7.09_B16392.jpg" alt="Figure 7.9 – Opening the feed's settings&#13;&#10;"/></div><p class="figure-caption">Figure 7.9 – Opening the feed's settings</p></li>&#13;
				<li>Then, click <a id="_idIndexMarker533"/>on <strong class="bold">Permissions</strong> from the top menu and click on <strong class="bold">+ Add users/groups</strong>:<div id="_idContainer242" class="IMG---Figure"><img src="Images/Figure_7.10_B16392.jpg" alt="Figure 7.10 – Feed permission settings&#13;&#10;"/></div><p class="figure-caption">Figure 7.10 – Feed permission settings</p></li>&#13;
				<li>Add the <a id="_idIndexMarker534"/>build that has the same name as the project, which in my case is the <strong class="bold">Parts.Unlimited Build Service</strong> identity:<div id="_idContainer243" class="IMG---Figure"><img src="Images/Figure_7.11_B16392.jpg" alt="Figure 7.11 – Adding the build identity&#13;&#10;"/></div><p class="figure-caption">Figure 7.11 – Adding the build identity</p></li>&#13;
				<li>Click <strong class="bold">Save</strong>.</li>&#13;
			</ol>&#13;
			<p>Now that the identity of the build pipeline has the required permissions on the feed, we can push the <a id="_idIndexMarker535"/>package to it during while it's being built.</p>&#13;
			<p>Publishing the package</p>&#13;
			<p>We are <a id="_idIndexMarker536"/>now ready to extend our build pipeline and push the package from it to the feed. To do this, we need to perform the following steps:</p>&#13;
			<ol>&#13;
				<li value="1">Navigate to Azure DevOps and open the <strong class="bold">PartsUnlimited.Models</strong> project. Click on <strong class="bold">Pipelines</strong> in the left menu. </li>&#13;
				<li>Select the build pipeline that we created in the previous step and click on the <strong class="bold">Edit</strong> button, which can be found in the top-right menu.</li>&#13;
				<li>Click on the <strong class="bold">+</strong> button again next to <strong class="bold">Agent job 1</strong> and search for NuGet. Add the task to the pipeline.</li>&#13;
				<li>Drag the newly added task below the NuGet task that we created in the previous step. Make the following changes to the settings of the task:<p>--<strong class="bold">Display name</strong>: <strong class="source-inline">NuGet push</strong></p><p>--<strong class="bold">Command</strong>: <strong class="bold">push</strong></p><p>--Path to <strong class="bold">NuGet package(s) to publish</strong>: <strong class="source-inline">$(Build.ArtifactStagingDirectory)/**/*.nupkg;!$(Build.ArtifactStagingDirectory)/**/*.symbols.nupkg</strong></p><p>--<strong class="bold">Target feed location</strong>: <strong class="bold">This organization/collection</strong></p><p>--<strong class="bold">Target feed</strong>: <strong class="bold">PacktLearnDevOps</strong></p></li>&#13;
				<li>After making these changes, the task will look as follows:<div id="_idContainer244" class="IMG---Figure"><img src="Images/Figure_7.12_B16392.jpg" alt="Figure 7.12 – Adding a NuGet push task&#13;&#10;"/></div><p class="figure-caption">&#13;
Figure 7.12 – Adding a NuGet push task</p></li>&#13;
				<li>From <a id="_idIndexMarker537"/>the top menu, select <strong class="bold">Save &amp; queue</strong> and then <strong class="bold">Save and run.</strong> Wait until the build pipeline has finished successfully. </li>&#13;
				<li>Finally, let's check whether the package has been successfully published. Click on <strong class="bold">Artifacts</strong> from the left menu. You will see that the package has been pushed to the feed:</li>&#13;
			</ol>&#13;
			<div>&#13;
				<div id="_idContainer245" class="IMG---Figure">&#13;
					<img src="Images/Figure_7.13_B16392.jpg" alt="Figure 7.13 – Pushed package&#13;&#10;"/>&#13;
				</div>&#13;
			</div>&#13;
			<p class="figure-caption">Figure 7.13 – Pushed package</p>&#13;
			<p>Now that we have a package with models, we can use it in our Visual Projects. In the next section, we are <a id="_idIndexMarker538"/>going to create an application and consume the package from the feed in Azure DevOps.</p>&#13;
			<h1 id="_idParaDest-162"><a id="_idTextAnchor175"/>Consuming the package in Visual Studio from the Artifacts feed</h1>&#13;
			<p>Now that our <strong class="bold">PartsUnlimited.Models</strong> package has been pushed to our feed in Artifacts, we can <a id="_idIndexMarker539"/>consume this package from <a id="_idIndexMarker540"/>Visual Studio. In this section, we are <a id="_idIndexMarker541"/>going to create a new console app in Visual Studio and connect to the feed from there. </p>&#13;
			<p>Therefore, we need to perform the following steps:</p>&#13;
			<ol>&#13;
				<li value="1">Open Visual Studio 2019 and create a new .NET Core console application:<p class="figure-caption"> </p><div id="_idContainer246" class="IMG---Figure"><img src="Images/Figure_7.14_B16392.jpg" alt="Figure 7.14 – Creating a new console package&#13;&#10;"/></div><p class="figure-caption">Figure 7.14 – Creating a new console package</p></li>&#13;
				<li>Once <a id="_idIndexMarker542"/>the application has been <a id="_idIndexMarker543"/>created, navigate to Azure DevOps and from the left menu, select <strong class="bold">Artifacts</strong>. </li>&#13;
				<li>From <a id="_idIndexMarker544"/>the top menu, select <strong class="bold">Connect to feed</strong>:<div id="_idContainer247" class="IMG---Figure"><img src="Images/Figure_7.15_B16392.jpg" alt="Figure 7.15 – Connect to feed &#13;&#10;"/></div><p class="figure-caption">&#13;
Figure 7.15 – Connect to feed </p></li>&#13;
				<li>On <a id="_idIndexMarker545"/>the next screen, select <strong class="bold">Visual Studio</strong> from <a id="_idIndexMarker546"/>the list. We <a id="_idIndexMarker547"/>are going to use these settings to set up the machine in the next step:<div id="_idContainer248" class="IMG---Figure"><img src="Images/Figure_7.16_B16392.jpg" alt="Figure 7.16 – Visual Studio machine setup&#13;&#10;"/></div><p class="figure-caption">&#13;
Figure 7.16 – Visual Studio machine setup</p></li>&#13;
				<li>Navigate <a id="_idIndexMarker548"/>back to the console app in <a id="_idIndexMarker549"/>Visual Studio. Then, from <a id="_idIndexMarker550"/>the top menu, select <strong class="bold">Tools</strong> &gt; <strong class="bold">NuGet package manager</strong> &gt; <strong class="bold">Manage NuGet Packages for Solution</strong>:<div id="_idContainer249" class="IMG---Figure"><img src="Images/Figure_7.17_B16392.jpg" alt="Figure 7.17 – NuGet package installer&#13;&#10;"/></div><p class="figure-caption">&#13;
Figure 7.17 – NuGet package installer</p></li>&#13;
				<li>To <a id="_idIndexMarker551"/>add the feed to the project, click <a id="_idIndexMarker552"/>on the settings <a id="_idIndexMarker553"/>icon:<div id="_idContainer250" class="IMG---Figure"><img src="Images/Figure_7.18_B16392.jpg" alt="Figure 7.18 – NuGet settings&#13;&#10;"/></div><p class="figure-caption">&#13;
Figure 7.18 – NuGet settings</p></li>&#13;
				<li>Click on the <strong class="bold">+</strong> sign in the top-right menu and specify the following values to add the feed:<p>--<strong class="bold">Name</strong>: <strong class="bold">LearnAzureDevOps</strong>.</p><p>--<strong class="bold">Source</strong>: Copy <a id="_idIndexMarker554"/>the feed URL from <a id="_idIndexMarker555"/>the machine's setup <a id="_idIndexMarker556"/>into Azure DevOps. In my case, this is <strong class="source-inline">https://pkgs.dev.azure.com/PacktLearnDevOps/_packaging/PacktLearnDevOps/nuget/v3/index.json</strong>.</p><p>The outcome of adding these values will look as follows:</p><div id="_idContainer251" class="IMG---Figure"><img src="Images/Figure_7.19_B16392.jpg" alt="Figure 7.19 – Adding the feed's package source&#13;&#10;"/></div><p class="figure-caption">&#13;
Figure 7.19 – Adding the feed's package source</p></li>&#13;
				<li>Click <strong class="bold">Update</strong> and then <strong class="bold">OK</strong>.</li>&#13;
				<li>Now, we <a id="_idIndexMarker557"/>can consume the <a id="_idIndexMarker558"/>feed in our application. In <a id="_idIndexMarker559"/>the NuGet package manager, select the package source that we just added. Make sure that <strong class="bold">Include prelease</strong> is selected since this package hasn't been released yet:<div id="_idContainer252" class="IMG---Figure"><img src="Images/Figure_7.20_B16392.jpg" alt="Figure 7.20 – Selecting the package source&#13;&#10;"/></div><p class="figure-caption">Figure 7.20 – Selecting the package source</p></li>&#13;
				<li>Select <a id="_idIndexMarker560"/>the package and install it in the project. </li>&#13;
				<li>Now, we <a id="_idIndexMarker561"/>can reference <a id="_idIndexMarker562"/>the package in our code and use the model classes. Add a <strong class="source-inline">using</strong> statement and create a new <strong class="source-inline">CarItem</strong> by replacing the code in the <strong class="source-inline">Program.cs</strong> file with the following:<p class="source-code">using System;</p><p class="source-code">using PartsUnlimited.Models;</p><p class="source-code">namespace AzureArtifacts</p><p class="source-code">{</p><p class="source-code">    class Program</p><p class="source-code">    {</p><p class="source-code">        static void Main(string[] args)</p><p class="source-code">        {</p><p class="source-code">            Console.WriteLine("Hello World!");</p><p class="source-code">            CartItem caritem = new CartItem()</p><p class="source-code">            {</p><p class="source-code">                CartId = "1",</p><p class="source-code">                Count = 10,</p><p class="source-code">                DateCreated = DateTime.Now,</p><p class="source-code">                Product = new Product()</p><p class="source-code">                {</p><p class="source-code">                    Title = "Product1"</p><p class="source-code">                },</p><p class="source-code">                ProductId = 21</p><p class="source-code">            };</p><p class="source-code">        }</p><p class="source-code">    }</p><p class="source-code">}</p></li>&#13;
			</ol>&#13;
			<p>In this <a id="_idIndexMarker563"/>demonstration, we consumed <a id="_idIndexMarker564"/>the package that is automatically <a id="_idIndexMarker565"/>built and released from the feed. In the next and last section of this chapter, we are going to look at how to scan a package for vulnerabilities using WhiteSource Bolt.</p>&#13;
			<h1 id="_idParaDest-163"><a id="_idTextAnchor176"/>Scanning for package vulnerabilities using WhiteSource Bolt</h1>&#13;
			<p>WhiteSource <a id="_idIndexMarker566"/>Bolt can be used to <a id="_idIndexMarker567"/>scan packages for vulnerabilities directly from the build pipeline. It is a developer tool for scanning for security vulnerabilities in application code, as well as open source applications and packages. It offers extensions that can be installed through the Azure DevOps marketplace and through GitHub. WhiteSource Bolt can be downloaded free of charge, but this version is limited to five scans per day, per repository.</p>&#13;
			<p class="callout-heading">Important Note</p>&#13;
			<p class="callout">For more <a id="_idIndexMarker568"/>information about WhiteSource Bolt, you can refer to the following website: <a href="https://bolt.whitesourcesoftware.com/">https://bolt.whitesourcesoftware.com/</a>.</p>&#13;
			<p>In this <a id="_idIndexMarker569"/>section, we are going to install <a id="_idIndexMarker570"/>the extension in our Azure DevOps project and implement the tasks that come with it into our existing build pipeline. Let's get started:</p>&#13;
			<ol>&#13;
				<li value="1">Open a browser and navigate to <a href="https://marketplace.visualstudio.com/">https://marketplace.visualstudio.com/</a>.</li>&#13;
				<li>Search for WhiteSource Bolt in the search box and select the <strong class="bold">WhiteSource Bolt</strong> extension:<div id="_idContainer253" class="IMG---Figure"><img src="Images/Figure_7.21_B16392.jpg" alt="Figure 7.21 – Installing WhiteSource Bolt&#13;&#10;"/></div><p class="figure-caption">&#13;
Figure 7.21 – Installing WhiteSource Bolt</p></li>&#13;
				<li>Install <a id="_idIndexMarker571"/>the extension <a id="_idIndexMarker572"/>in your DevOps organization by selecting the organization and clicking the <strong class="bold">Install</strong> button:<div id="_idContainer254" class="IMG---Figure"><img src="Images/Figure_7.22_B16392.jpg" alt="Figure 7.22 – Installing the extension in your organization&#13;&#10;"/></div><p class="figure-caption">&#13;
Figure 7.22 – Installing the extension in your organization</p></li>&#13;
				<li>Once <a id="_idIndexMarker573"/>you've installed <a id="_idIndexMarker574"/>the package, navigate back to <strong class="bold">Azure DevOps</strong> &gt;<strong class="bold"> Pipelines</strong>. You will see that <strong class="bold">WhiteSource Bolt</strong> has been added to the menu. Select it:<div id="_idContainer255" class="IMG---Figure"><img src="Images/Figure_7.23_B16392.jpg" alt="Figure 7.23 – WhiteSource Bolt menu item&#13;&#10;"/></div><p class="figure-caption">&#13;
Figure 7.23 – WhiteSource Bolt menu item</p></li>&#13;
				<li>On <a id="_idIndexMarker575"/>the <strong class="bold">Settings</strong> screen, specify a work email address, company name, and country. Then, click <a id="_idIndexMarker576"/>the <strong class="bold">Get Started</strong> button:<div id="_idContainer256" class="IMG---Figure"><img src="Images/Figure_7.24_B16392.jpg" alt="Figure 7.24 – WhiteSource Bolt settings&#13;&#10;"/></div><p class="figure-caption">&#13;
Figure 7.24 – WhiteSource Bolt settings</p></li>&#13;
				<li>We can now use WhiteSource Bolt tasks in our pipeline. Select the build pipeline that we created in section <em class="italic">Creating the build pipeline</em>. Now, edit the pipeline.</li>&#13;
				<li>Add <a id="_idIndexMarker577"/>a new task to the pipeline again, just like we did in the in <em class="italic">Creating the build pipeline section</em>, and search for <strong class="bold">WhiteSource Bolt</strong>. Add the task to the pipeline:<div id="_idContainer257" class="IMG---Figure"><img src="Images/Figure_7.25_B16392.jpg" alt="Figure 7.25 – Adding the WhiteSource Bolt task&#13;&#10;"/></div><p class="figure-caption">&#13;
Figure 7.25 – Adding the WhiteSource Bolt task</p></li>&#13;
				<li>Drag <a id="_idIndexMarker578"/>the task below the <strong class="bold">Build solution</strong> task since we want to scan the solution before the package is packed and pushed into the Artifact feed. This will look as follows:<div id="_idContainer258" class="IMG---Figure"><img src="Images/Figure_7.26_B16392.jpg" alt="Figure 7.26 – Overview of the build pipeline&#13;&#10;"/></div><p class="figure-caption">Figure 7.26 – Overview of the build pipeline</p></li>&#13;
				<li>You <a id="_idIndexMarker579"/>don't have to specify any configuration values; this task will run without them.</li>&#13;
				<li>From <a id="_idIndexMarker580"/>the top menu, select <strong class="bold">Save &amp; queue</strong> and then <strong class="bold">Save and run</strong>. Wait until the build pipeline has finished successfully. </li>&#13;
				<li>Go to the top menu once more and select <strong class="bold">WhiteSource Bolt Build Support</strong>. There, you will see an overview of the scan:<div id="_idContainer259" class="IMG---Figure"><img src="Images/Figure_7.27_B16392.jpg" alt="Figure 7.27 – WhiteSource Bolt vulnerability report&#13;&#10;"/></div></li>&#13;
			</ol>&#13;
			<p class="figure-caption">&#13;
Figure 7.27 – WhiteSource Bolt vulnerability report</p>&#13;
			<p>With <a id="_idTextAnchor177"/>that, we <a id="_idIndexMarker581"/>have installed <a id="_idIndexMarker582"/>the WhiteSource <a id="_idIndexMarker583"/>Bolt extension <a id="_idIndexMarker584"/>and scanned our solution for vulnerabilities before packaging and pushing the NuGet package to our feed in Azure Artifacts.</p>&#13;
			<p>This concludes this chapter.</p>&#13;
			<h1 id="_idParaDest-164"><a id="_idTextAnchor178"/>Summary</h1>&#13;
			<p>In this chapter, we looked at Azure Artifacts in more depth. First, we set up a feed and created a new NuGet package using the model classes in the <strong class="bold">PartsUnlimited</strong> project. Then, we created a build pipeline where we packed and pushed the package to the feed automatically during the build process. Finally, we used the WhiteSource Bolt extension from the Azure marketplace to scan the package for vulnerabilities. </p>&#13;
			<p>In the next chapter, we are going to focus on how to deploy applications in Azure DevOps using release pipelines.</p>&#13;
			<h1 id="_idParaDest-165"><a id="_idTextAnchor179"/>Further reading</h1>&#13;
			<p>Check out the following links for more information about the topics that were covered in this chapter:</p>&#13;
			<ul>&#13;
				<li>What is Azure Artifacts?: <a href="https://docs.microsoft.com/en-us/azure/devops/artifacts/overview?view=azure-devops">https://docs.microsoft.com/en-us/azure/devops/artifacts/overview?view=azure-devops</a></li>&#13;
				<li>Get started with NuGet packages in Azure DevOps Services and TFS: <a href="https://docs.microsoft.com/en-us/azure/devops/artifacts/get-started-nuget?view=azure-devops">https://docs.microsoft.com/en-us/azure/devops/artifacts/get-started-nuget?view=azure-devops</a></li>&#13;
			</ul>&#13;
		</div>&#13;
	</div></body></html>