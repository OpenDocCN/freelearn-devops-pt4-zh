["```\n$ gcloud components update && gcloud components install beta\n```", "```\n$ mkdir helloServerless\n$ cd helloServerless\n```", "```\n/**\n* HTTP Cloud Function.\n * @param {Object} req Cloud Function request context.\n * @param {Object} res Cloud Function response context.\n */\nexports.helloServerless = (req, res) => {\n  res.send('Hello My Serverless World!');\n};\n```", "```\n$ gcloud beta functions deploy helloServerless --trigger-http\n\nDeploying function (may take a while - up to 2 minutes)...done.\n availableMemoryMb: 256\n entryPoint: helloServerless\n httpsTrigger:\n url: https://[GCP_REGION]-[PROJECT_ID].cloudfunctions.net/helloServerless\n labels:\n deployment-tool: cli-gcloud\n name: projects/my-serverless-project-201920/locations/us-central1/functions/helloServerless\n serviceAccountEmail: my-serverless-project-201920@appspot.gserviceaccount.com\n sourceUploadUrl: https://storage.googleapis.com/gcf-upload-us-central1-39234144-2d9a-4a19-bf5f-82ef8d19a71b/d2611724-50d0-4339-9ee5-9d140aa674ae.zip?GoogleAccessId=37314512027@cloudservices.gserviceaccount.com&Expires=1524947393&Signature=WCwiJ8E%2B8a6EMMZiz5cWG%2FE%2F7pt8V%2FbqIDyW68utF%2FQXMJR0Pt94e0fC8DcqHbWBAEqHaE9%2B71fOYoWVcXg%2FWos38q%2FIfl%2BTNfaavRr9WyIi6V3M5our8aNI%2FGcntOrHm%2FpMK2LdiBzN6QI%2FiDjPDaA5%2FXohjLD%2BLaGGDHEoHp97%2BqCA7Mzifs%2B%2BhNcYknZ0vjLdpegUqfTUVjDF1h%2BQqg68sIurtT14Bay3uXryeMqYB%2FZv0lTjZIsd7svnUZtXZTNi72HOzP2J7vo1qo%2B74hO7Yy7WJOj2yvDKiFJ4ZXyk8cXvPu3ooNV%2BGy2dc758CFl3u87M%2FuKJV%2Bl0VkDwnQ%3D%3D\n status: ACTIVE\n timeout: 60s\n updateTime: '2018-04-28T19:59:54Z'\n versionId: '1'\n```", "```\n$ gcloud beta functions describe helloServerless\n```", "```\nHello My Serverless World!\n```", "```\n$ npm install -g @google-cloud/functions-emulator\n\n/usr/local/bin/functions-emulator -> /usr/local/lib/node_modules/@google-cloud/functions-emulator/bin/functions\n /usr/local/bin/functions -> /usr/local/lib/node_modules/@google-cloud/functions-emulator/bin/functions\n\n> @google-cloud/functions-emulator@1.0.0-beta.4 postinstall /usr/local/lib/node_modules/@google-cloud/functions-emulator\n > node scripts/upgrade-warning\n\n If you're using the Emulator via the Firebase CLI, you can\n disregard this message.\n\nIf you're upgrading @google-cloud/functions-emulator, these\n are the recommended upgrade steps:\n1\\. Stop the currently running emulator, if any:\nfunctions stop\n2\\. Uninstall the current emulator, if any:\nnpm uninstall -g @google-cloud/functions-emulator\n3\\. Install the new version of the emulator:\nnpm install -g @google-cloud/functions-emulator\n\nIf you have trouble after upgrading, try deleting the config\n directory found in:\n\n~/.config/configstore/@google-cloud/functions-emulator\n\nThen restart the emulator. You can also check for any renegade\n Node.js emulator processes that may need to be killed:\n\nps aux | grep node\n+ @google-cloud/functions-emulator@1.0.0-beta.4\n added 314 packages in 21.252s\n```", "```\n$ functions start\n Warning: You're using Node.js v8.9.2 but Google Cloud Functions only supports v6.11.5.\n Starting Google Cloud Functions Emulator...\n Google Cloud Functions Emulator STARTED\n No functions deployed \"_\". Run functions deploy --help for how to deploy a function.\n```", "```\n$ functions deploy helloServerless --trigger-http\n Warning: You're using Node.js v8.9.2 but Google Cloud Functions only supports v6.11.5.\n Copying file:///var/folders/mj/74rcnfp94ll_sj3s95z4nnx00000gn/T/tmp-6681yxqJsPl2WsYI.zip...\n Waiting for operation to finish...done.\n Deploying function......done.\n Function helloServerless deployed.\n ┌────────────┬──────────────────────────────────────────────────────────────────────────────────┐\n │ Property │ Value │\n ├────────────┼──────────────────────────────────────────────────────────────────────────────────┤\n │ Name │ helloServerless │\n ├────────────┼──────────────────────────────────────────────────────────────────────────────────┤\n │ Trigger │ HTTP │\n ├────────────┼──────────────────────────────────────────────────────────────────────────────────┤\n │ Resource │ http://localhost:8010/my-serverless-project-201920/us-central1/helloServerless │\n ├────────────┼──────────────────────────────────────────────────────────────────────────────────┤\n │ Timeout │ 60 seconds │\n ├────────────┼──────────────────────────────────────────────────────────────────────────────────┤\n │ Local path │ /Users/<username>/Documents/packt/chapter6/googlefunction_hello_world │\n ├────────────┼──────────────────────────────────────────────────────────────────────────────────┤\n │ Archive │ file:///var/folders/mj/74rcnfp94ll_sj3s95z4nnx00000gn/T/tmp-6681yxqJsPl2WsYI.zip │\n └────────────┴──────────────────────────────────────────────────────────────────────────────────┘\n```", "```\n$ functions call helloServerless\n Warning: You're using Node.js v8.9.2 but Google Cloud Functions only supports v6.11.5.\n ExecutionId: 4b32f8b9-2452-45ee-a0c9-57f2fd3f9d8a\n Result: Hello My Serverless World!\n```", "```\n $ functions call helloServerless\n Warning: You're using Node.js v8.9.2 but Google Cloud Functions only supports v6.11.5.\n ExecutionId: 4b32f8b9-2452-45ee-a0c9-57f2fd3f9d8a\n Result: Hello My Serverless World!\n <username>s-MacBook-Pro:googlefunction_hello_world <username>$ functions logs read\n Warning: You're using Node.js v8.9.2 but Google Cloud Functions only supports v6.11.5.\n 2018-04-28T20:54:55.907Z - info: User function triggered, starting execution\n 2018-04-28T20:54:55.914Z - info: Execution took 11 ms, user function completed successfully\n 2018-04-28T20:56:10.393Z - info: User function triggered, starting execution\n 2018-04-28T20:56:10.394Z - info: Execution took 1 ms, user function completed successfully\n 2018-04-28T21:07:14.853Z - info: User function triggered, starting execution\n 2018-04-28T21:07:14.859Z - info: Execution took 6 ms, user function completed successfully\n 2018-04-28T21:12:13.228Z - info: User function triggered, starting execution\n 2018-04-28T21:12:13.229Z - info: Execution took 0 ms, user function completed successfully\n```", "```\n├── /build/                # Compiled output for Node.js 6.x\n├── /src/                    # Application source files\n│   ├── someFuncA.js         # Function A\n│   ├── someFuncA.test.js    # Function A unit tests\n│   ├── someFuncB.js         # Function B\n│   ├── someFuncB.test.js    # Function B unit tests\n├── index.js                 # Main export(s)\n└── package.json             # List of project dependencies and NPM scripts\n```", "```\n$ git clone https://github.com/shzshi/google-functions-helloworld.git\n```", "```\n$ cd google-functions-helloworld\n```", "```\n$ docker image build -t google-functions .\n```", "```\n$ docker run --rm -it -p 50000:50000 -p 8080:8080 -v /My/Local/Host/PATH/chapter6/google-functions/jenkins:/var/jenkins_home google-functions:latest\n```", "```\ngcloud auth activate-service-account --key-file=${WORKSPACE}/My-Serverless-Project-1d8bacd4886d.json\n gcloud config set project ${YOUR_GCP_PROJECT_ID}\n npm install\n\n export NODE_PATH=${WORKSPACE}/node_modules\n\n# executing unit test\n ${WORKSPACE}/node_modules/.bin/ava test/unit.http.test.js\n\n # executing integration test\n export BASE_URL=http://localhost:8010/${YOUR_GCP_PROJECT_ID}/${YOUR_GCF_REGION}\n${WORKSPACE}/node_modules/.bin/functions start\n${WORKSPACE}/node_modules/.bin/functions deploy helloHttp --trigger-http\n${WORKSPACE}/node_modules/.bin/ava test/integration.http.test.js\n # deploying to GCP project and executing system test\n gcloud beta functions deploy helloHttp --trigger-http\nexport BASE_URL=https://${YOUR_GCF_REGION}-${YOUR_GCP_PROJECT_ID}.cloudfunctions.net/helloHttp\n${WORKSPACE}/node_modules/.bin/ava test/system.http.test.js\n```", "```\nBuilding in workspace /var/jenkins_home/workspace/my-serverless-google-functions\n > git rev-parse --is-inside-work-tree # timeout=10\nFetching changes from the remote Git repository\n > git config remote.origin.url https://github.com/shzshi/google-functions-helloworld.git # timeout=10\nFetching upstream changes from https://github.com/shzshi/google-functions-helloworld.git\n > git --version # timeout=10\n > git fetch --tags --progress https://github.com/shzshi/google-functions-helloworld.git +refs/heads/*:refs/remotes/origin/*\n > git rev-parse refs/remotes/origin/master^{commit} # timeout=10\n > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10\nChecking out Revision bbfb5c17a65dab7f0a8e0b3dc3de82e5792fe21d (refs/remotes/origin/master)\n > git config core.sparsecheckout # timeout=10\n > git checkout -f bbfb5c17a65dab7f0a8e0b3dc3de82e5792fe21d\nCommit message: \"added function emulator\"\n > git rev-list --no-walk bbfb5c17a65dab7f0a8e0b3dc3de82e5792fe21d # timeout=10\n[my-serverless-google-functions] $ /bin/sh -xe /tmp/jenkins2470859504083131546.sh\n+ gcloud auth activate-service-account --key-file=/var/jenkins_home/workspace/my-serverless-google-functions/My-Serverless-Project-1d8bacd4886d.json\nActivated service account credentials for: [jenkins@my-serverless-project-201920.iam.gserviceaccount.com]\n+ gcloud config set project my-serverless-project-201920\nUpdated property [core/project].\n+ npm install\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.3 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.3: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n\nup to date in 30.041s\n+ export NODE_PATH=/var/jenkins_home/workspace/my-serverless-google-functions/node_modules\n+ /var/jenkins_home/workspace/my-serverless-google-functions/node_modules/.bin/ava test/unit.http.test.js\n\n   helloHttp: should print a name\n   helloHttp: should print hello world\n\n  2 tests passed\n\n+ export BASE_URL=http://localhost:8010/my-serverless-project-201920/us-central1\n+ /var/jenkins_home/workspace/my-serverless-google-functions/node_modules/.bin/functions start\nWarning: You're using Node.js v8.11.1 but Google Cloud Functions only supports v6.11.5.\nStarting Google Cloud Functions Emulator...\nGoogle Cloud Functions Emulator STARTED\n┌────────┬───────────┬─────────┬──────────────────────────────────────────────────────────────────────────┐\n│ Status │ Name      │ Trigger │ Resource                                                                 │\n├────────┼───────────┼─────────┼──────────────────────────────────────────────────────────────────────────┤\n│ READY  │ helloHttp │ HTTP    │ http://localhost:8010/my-serverless-project-201920/us-central1/helloHttp │\n└────────┴───────────┴─────────┴──────────────────────────────────────────────────────────────────────────┘\n+ /var/jenkins_home/workspace/my-serverless-google-functions/node_modules/.bin/functions deploy helloHttp --trigger-http\nWarning: You're using Node.js v8.11.1 but Google Cloud Functions only supports v6.11.5.\nCopying file:///tmp/tmp-1653qKGF3wXgKZdC.zip...\nWaiting for operation to finish...done.\nDeploying function............done.\nFunction helloHttp deployed.\n┌────────────┬──────────────────────────────────────────────────────────────────────────┐\n│ Property   │ Value                                                                    │\n├────────────┼──────────────────────────────────────────────────────────────────────────┤\n│ Name       │ helloHttp                                                                │\n├────────────┼──────────────────────────────────────────────────────────────────────────┤\n│ Trigger    │ HTTP                                                                     │\n├────────────┼──────────────────────────────────────────────────────────────────────────┤\n│ Resource   │ http://localhost:8010/my-serverless-project-201920/us-central1/helloHttp │\n├────────────┼──────────────────────────────────────────────────────────────────────────┤\n│ Timeout    │ 60 seconds                                                               │\n├────────────┼──────────────────────────────────────────────────────────────────────────┤\n│ Local path │ /var/jenkins_home/workspace/my-serverless-google-functions               │\n├────────────┼──────────────────────────────────────────────────────────────────────────┤\n│ Archive    │ file:///tmp/tmp-1653qKGF3wXgKZdC.zip                                     │\n└────────────┴──────────────────────────────────────────────────────────────────────────┘\n+ /var/jenkins_home/workspace/my-serverless-google-functions/node_modules/.bin/ava test/integration.http.test.js\n\n   helloHttp: should print a name (110ms)\n   helloHttp: should print hello world (104ms)\n\n  2 tests passed\n\n+ gcloud beta functions deploy helloHttp --trigger-http\nDeploying function (may take a while - up to 2 minutes)...\n.............done.\navailableMemoryMb: 256\nentryPoint: helloHttp\nhttpsTrigger:\n  url: https://us-central1-my-serverless-project-201920.cloudfunctions.net/helloHttp\nlabels:\n  deployment-tool: cli-gcloud\nname: projects/my-serverless-project-201920/locations/us-central1/functions/helloHttp\nserviceAccountEmail: my-serverless-project-201920@appspot.gserviceaccount.com\nsourceUploadUrl: https://storage.googleapis.com/gcf-upload-us-central1-39234144-2d9a-4a19-bf5f-82ef8d19a71b/5433a10a-52ed-4330-b68a-f3c3be016035.zip?GoogleAccessId=37314512027@cloudservices.gserviceaccount.com&Expires=1525049193&Signature=C3H2oyjrieTuykum%2BH09BqZO63bCXE4vlrWVzOhEMTBAoPAUFTHU96JVqTk7ZiGdl2iv34a7FlR70vE9oo4jnnZApVtCYHVSY9JA3X%2BAn4VR4Aw510UUC7ilZbGGJ5U3eyk1bVlzQxTkx20Mq6yx8JUQqRMj%2FTisHqs0MCHC9k83NJj6JQdF%2BbgVLzPg%2Bfrm06kZzhKqKmLQ7XOMXwSHlm%2F74N6%2B5JyByPvtPlHqgGoIdW8X7eyys4%2B22X3zU0Z3MjXG7emlA9t4Hrpa3oQ0AUiSD78b1Mnfbz%2FYXdj%2BKDY4fjv5JQcOBZLj8DEw8sbcSdJcIvvAKrPwcKy7Y1eiMg%3D%3D\nstatus: ACTIVE\ntimeout: 60s\nupdateTime: '2018-04-30T00:16:35Z'\nversionId: '2'\n+ export BASE_URL=https://us-central1-my-serverless-project-201920.cloudfunctions.net/helloHttp\n+ /var/jenkins_home/workspace/my-serverless-google-functions/node_modules/.bin/ava test/system.http.test.js\n\n   helloHttp: should print hello world (371ms)\n   helloHttp: should print a name (1.3s)\n\n  2 tests passed\n\nFinished: SUCCESS\n\n```"]