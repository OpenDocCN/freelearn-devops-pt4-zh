- en: '*Chapter 1*: Introduction to Monitoring'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第1章*：监控简介'
- en: Monitoring is a vast area and there is a confusing array of tools and solutions
    that address various requirements in that space. However, upon a closer look,
    it would become very clear that there are a lot of common features shared by these
    products. Therefore, before we start discussing Datadog as a monitoring tool,
    it is important to understand the core ideas and terminology in monitoring.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 监控是一个广泛的领域，涉及许多工具和解决方案，它们满足该领域不同的需求。然而，仔细观察后会发现，这些产品有很多共同的特征。因此，在我们开始讨论 Datadog
    作为监控工具之前，理解监控的核心理念和术语非常重要。
- en: 'In this chapter, we are going to cover the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Why monitoring?
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为什么要监控？
- en: Proactive monitoring
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主动监控
- en: Monitoring use cases
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控用例
- en: Monitoring terminology and processes
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控术语和流程
- en: Types of monitoring
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控的类型
- en: Overview of monitoring tools
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控工具概览
- en: Technical requirements
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: There are no technical requirements for this chapter
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 本章没有技术要求
- en: Why monitoring?
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为什么要监控？
- en: Monitoring is a generic term in the context of operating a business. As part
    of effectively running a business, various elements of the business operations
    are measured for their health and effectiveness. The outputs of such measurements
    are compared against the business goals. When such efforts are done periodically
    and systematically, it could be called monitoring.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 监控是经营业务中的一个通用术语。在有效运营企业的一部分过程中，企业运营的各个要素会被衡量其健康状况和效果。这些测量结果会与企业目标进行比较。当这些工作周期性和系统性地进行时，就可以称之为监控。
- en: Monitoring could be done directly or indirectly, and voluntarily or dictated
    by some law. Successful businesses are good at tracking growth by using various
    metrics and taking corrective actions to fine-tune their operations and goals
    as needed.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 监控可以是直接或间接的，也可以是自愿的或由某些法律强制的。成功的企业擅长通过使用各种指标来跟踪增长，并根据需要采取纠正措施，以调整他们的运营和目标。
- en: The previous statements are common knowledge and applicable to any successful
    operation, even if it is a one-time event. However, there are a few important
    keywords we already mentioned – metrics, measurement, and goal. A monitoring activity
    is all about measuring something and comparing that result against a goal or a
    target.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 之前的陈述是常识，适用于任何成功的运营，即使它是一次性事件。然而，我们已经提到了一些重要的关键词——指标、测量和目标。监控活动就是测量某些内容，并将结果与目标或指标进行比较。
- en: While it is important to keep track of every aspect of running a business, this
    book focuses on monitoring software application systems running in production.
    **Information Technology** (**IT**) is a key element of running businesses and
    that involves operating software systems. With software available as a service
    through the internet (commonly referred to as **Software as a Service** or just
    **SaaS**), most software users don't need to run software systems in-house, and
    thus there's no need for them to monitor it.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然跟踪企业运营的各个方面很重要，但本书的重点是监控在生产中运行的软件应用系统。**信息技术**（**IT**）是运营企业的关键要素，它涉及到软件系统的运营。随着软件作为服务通过互联网提供（通常称为**软件即服务**或**SaaS**），大多数软件用户不需要在内部运行软件系统，因此他们无需监控它。
- en: However, SaaS providers need to monitor the software systems they run for their
    customers. Big corporations such as banks and retail chains may still have to
    run software systems in-house due to the non-availability of the required software
    service in the cloud or due to security or privacy reasons.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，SaaS 提供商需要监控他们为客户运行的软件系统。像银行和零售连锁等大型企业可能仍然需要在内部运行软件系统，因为云中可能没有所需的软件服务，或者出于安全性或隐私原因。
- en: The primary focus of monitoring a software system is to check its health. By
    keeping track of the health of a software system, it is possible to determine
    whether the system is available or its health is deteriorating.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 监控软件系统的主要关注点是检查其健康状况。通过跟踪软件系统的健康状况，可以判断系统是否可用，或者其健康状况是否在恶化。
- en: If it is possible to catch the deteriorating state of a software system ahead
    of time, it might be possible to fix the underlying issue before any outage happens,
    which would ensure business continuity. Such a method of proactive monitoring
    that provides warnings well in advance is the ideal method of monitoring. But
    that is not always possible. There must also be processes in place to deal with
    the outage of software systems.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 如果能提前捕捉到软件系统恶化的状态，那么在发生停机之前修复潜在问题就可能成为可能，从而确保业务连续性。提供提前警告的这种主动监控方法是理想的监控方式。但这并非总是可行的。必须也有应对软件系统停机的相关流程。
- en: 'A software system running in production has three major components:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 运行在生产环境中的软件系统有三个主要组成部分：
- en: '**Application software**: A software service provider builds applications that
    will be used by customers or the software is built in-house for internal use.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**应用软件**：软件服务提供商构建的应用程序供客户使用，或者软件是为内部使用而在公司内部构建的。'
- en: '**Third-party software**: Existing third-party software such as databases and
    messaging platforms are used to run application software. These are subscribed
    to as SaaS services or deployed internally.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第三方软件**：现有的第三方软件，例如数据库和消息平台，被用来运行应用程序软件。这些软件可以通过SaaS服务订阅，或者在内部部署使用。'
- en: '**Infrastructure**: This usually refers to the network, compute, and storage
    infrastructure used to run the application and third-party software. This could
    be bare-metal equipment in data centers or services provisioned on a public cloud
    platform such as AWS, Azure, or GCP.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基础设施**：通常指用于运行应用程序和第三方软件的网络、计算和存储基础设施。这可以是数据中心中的裸金属设备，也可以是通过 AWS、Azure 或
    GCP 等公共云平台提供的服务。'
- en: Though we discussed monitoring software systems in broad terms earlier, upon
    a closer look, it is clear that monitoring of the three main components mentioned
    previously is involved in it. The information, measured using related metrics,
    is different for each category.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我们之前广泛讨论了软件系统的监控，但仔细看就会发现，监控之前提到的三个主要组成部分是其中的关键。使用相关度量标准所测量的信息对于每个类别都是不同的。
- en: The monitoring of these three components constitutes core monitoring. There
    are many other aspects – both internal to the system, such as its health, and
    external, such as security – that would make the monitoring of a software system
    complete. We will look at all the major aspects of software system monitoring
    in general in this introductory chapter, and as it is supported by Datadog in
    later chapters.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这三个组成部分的监控构成了核心监控。还有许多其他方面——包括系统内部的健康状况和外部的安全性——也需要纳入软件系统的监控当中。我们将在本章中简要介绍软件系统监控的所有主要方面，并在后续章节中介绍Datadog如何支持这些方面。
- en: Proactive monitoring
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 主动监控
- en: Technically, monitoring is not part of a software system running in production.
    The applications in a software system can run without any monitoring tools rolled
    out. As a best practice, software applications must be decoupled from monitoring
    tools anyway.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 从技术角度来看，监控并不是生产环境中运行的一个软件系统的组成部分。软件系统中的应用程序可以在没有任何监控工具的情况下运行。作为最佳实践，软件应用程序必须与监控工具解耦。
- en: 'This scenario sometimes results in taking software systems to production with
    minimal or no monitoring, which would eventually result in issues going unnoticed,
    or, in the worst-case scenario, users of those systems discovering those issues
    while using the software service. Such situations are not good for the business
    due to these reasons:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 这种情况有时会导致将软件系统以最小或没有监控的状态投入生产，这最终会导致问题未被发现，或者在最糟糕的情况下，用户在使用软件服务时发现这些问题。由于以下原因，这种情况对业务来说是不利的：
- en: An issue in production impacts the business continuity of the customers and,
    usually, there would be a financial cost associated with it.
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 生产环境中的问题会影响客户的业务连续性，通常还会产生与之相关的财务成本。
- en: Unscheduled downtime of a software service would leave a negative impression
    on the users about the software service and its provider.
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 软件服务的计划外停机会给用户留下关于软件服务及其提供商的负面印象。
- en: Unplanned downtime usually creates chaos at the business level and triaging
    and resolving such issues can be stressful for everyone involved and expensive
    to the businesses impacted by it.
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 非计划停机会在业务层面造成混乱，处理和解决这些问题可能对每个相关方造成压力，并且对受影响的企业来说也是昂贵的。
- en: One of the mitigating steps taken in response to a production issue is adding
    some monitoring so the same issue will be caught and reported to the operations
    team. Usually, such a reactive approach increases the coverage of monitoring organically,
    but not following a monitoring strategy. While such an approach will help to catch
    issues sometimes, there is no guarantee that an organically grown monitoring infrastructure
    would be capable of checking the health of the software system and warning about
    it, so remediation steps can be taken proactively to minimize outages in the future.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在应对生产问题时采取的缓解措施之一是增加一些监控，以便捕捉并报告相同的问题给运维团队。通常，这种反应式方法会有机地增加监控覆盖范围，但并没有遵循监控策略。虽然这种方法有时能帮助捕捉问题，但不能保证有机增长的监控基础设施能够检查软件系统的健康状况并发出警告，从而采取主动的修复措施，以最小化未来的故障。
- en: Proactive monitoring refers to rolling out monitoring solutions for a software
    system to report on issues with the components of the software system, and the
    infrastructure the system runs on. Such reporting can help with averting an impending
    issue by taking mitigating steps manually or automatically. The latter method
    is usually called self-healing, a highly desirable end state of monitoring, but
    hard to implement.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 主动监控是指为软件系统推出监控解决方案，以报告软件系统组件及其运行基础设施的问题。这种报告有助于通过手动或自动采取缓解措施来避免即将发生的问题。后一种方法通常称为自我修复，这是监控的一个高度理想的终极目标，但实现起来困难。
- en: The key aspects of a proactive monitoring strategy are as follows.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 主动监控策略的关键要素如下。
- en: Implementing a comprehensive monitoring solution
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 实施全面的监控解决方案
- en: Traditionally, the focus of monitoring has been the infrastructure components
    – compute, storage, and network. As you will see later in this chapter, there
    are more aspects of monitoring that would make the list complete. All relevant
    types of monitoring have to be implemented for a software system so issues with
    any component, software, or infrastructure would be caught and reported.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上，监控的重点一直是基础设施组件——计算、存储和网络。正如你将在本章稍后看到的，还有更多的监控方面需要完成这个清单。必须为软件系统实施所有相关类型的监控，以便捕捉并报告任何组件、软件或基础设施的问题。
- en: Setting up alerts to warn of impending issues
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置警报以警告即将发生的问题
- en: The monitoring solution must be designed to warn of impending issues with the
    software system. This is easy with infrastructure components as it is easy to
    track metrics such as memory usage, CPU utilization, and disk space, and alert
    on any usage over the limits.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 监控解决方案必须设计为预警软件系统中即将发生的问题。对于基础设施组件来说，这是容易的，因为可以轻松追踪内存使用、CPU 利用率和磁盘空间等指标，并在任何超出限制的使用情况下发出警报。
- en: However, such a requirement would be tricky at the application level. Sometimes
    applications can fail on perfectly configured infrastructure. To mitigate that,
    software applications should provide insights into what is going under the hood.
    In monitoring jargon, it is called observability these days and we will see later
    in the book how that can be implemented in Datadog.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，在应用程序层面，满足这样的需求可能会很棘手。有时应用程序可能会在配置完美的基础设施上发生故障。为了解决这个问题，软件应用程序应该提供对其内部运行情况的洞察。在监控术语中，现在通常称为可观察性，稍后我们将在本书中看到如何在
    Datadog 中实现这一点。
- en: Having a feedback loop
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 建立反馈回路
- en: A mature monitoring system warning of impending issues that would help to take
    mitigation steps is not good enough. Such warnings must also be used to resolve
    issues automatically (for example, spinning off a new virtual machine with enough
    disk space when an existing virtual host runs out of disk space), or be fed into
    the redesigning of the application or infrastructure to avoid the issue from happening
    in the future.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 一个成熟的监控系统，能够预警即将发生的问题并帮助采取缓解措施，还不够好。这些警告还必须用于自动解决问题（例如，当现有虚拟主机的磁盘空间耗尽时，启动一个新虚拟机并分配足够的磁盘空间），或被反馈到应用程序或基础设施的重新设计中，以避免未来发生类似问题。
- en: Monitoring use cases
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监控用例
- en: Monitoring applications are installed and configured based on where the applications
    to be monitored are run. Here, we will look at a few use cases of how monitoring
    is rolled out in different scenarios to understand the typical configurations.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 监控应用程序的安装和配置是根据要监控的应用程序运行的位置进行的。在这里，我们将查看几个不同场景中监控如何推出的使用案例，以理解典型的配置。
- en: All in a data center
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据中心中的所有内容
- en: This is a classic scenario of monitoring in which both the infrastructure that
    hosts the applications and the monitoring tools are in one or more data centers.
    The data centers could be privately owned by the business or a hosting facility
    that is rented out from a data center provider. The latter option is usually called
    co-location.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个经典的监控场景，其中托管应用程序的基础设施和监控工具都位于一个或多个数据中心中。数据中心可能是由企业私有拥有，也可能是从数据中心提供商那里租用的托管设施。后一种选择通常称为共址（co-location）。
- en: This figure illustrates how both the software application and monitoring tool
    are running from the same data center.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 该图展示了软件应用和监控工具如何在同一个数据中心中运行。
- en: '![Figure 1.1 – Single data center'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 1.1 – 单一数据中心'
- en: '](img/Figure_1.1_B16483.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.1_B16483.jpg)'
- en: Figure 1.1 – Single data center
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.1 – 单一数据中心
- en: 'The following figure illustrates how the software application and monitoring
    tool are running from two data centers, which ensures the availability of the
    software system:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图示展示了软件应用和监控工具如何在两个数据中心中运行，这确保了软件系统的可用性：
- en: '![Figure 1.2 – All in a data center with multiple data centers'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 1.2 – 在一个数据中心与多个数据中心'
- en: '](img/Figure_1.2_B16483.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.2_B16483.jpg)'
- en: Figure 1.2 – All in a data center with multiple data centers
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.2 – 在一个数据中心与多个数据中心
- en: If the application is hosted from multiple data centers, and if one of them
    becomes inaccessible, it would be possible for the monitoring system to alert
    on that. If only one data center is in use, then that will not be viable as the
    entire monitoring system would also become inaccessible along with the software
    system it monitors.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 如果应用程序托管在多个数据中心中，且其中一个数据中心无法访问，监控系统能够发出警报。如果仅使用一个数据中心，则不可行，因为整个监控系统将与其监控的软件系统一起无法访问。
- en: Application in a data center with cloud monitoring
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在数据中心中应用与云监控
- en: This is an emerging scenario where businesses have their infrastructure hosted
    in data centers and a cloud monitoring service such as Datadog is used for monitoring.
    In this scenario, the monitoring backend is in the cloud and its agents run in
    the data centers alongside the application system.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个新兴的场景，企业将其基础设施托管在数据中心，并使用像Datadog这样的云监控服务进行监控。在这种情况下，监控后端位于云端，其代理程序与应用系统一起在数据中心中运行。
- en: '![Figure 1.3 – Application in a data center with cloud monitoring'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 1.3 – 在数据中心中应用与云监控'
- en: '](img/Figure_1.3_B16483.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.3_B16483.jpg)'
- en: Figure 1.3 – Application in a data center with cloud monitoring
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.3 – 在数据中心中应用与云监控
- en: There is no need to monitor the monitoring system itself as the SaaS providers
    provide its status.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 不需要监控监控系统本身，因为SaaS提供商会提供其状态。
- en: All in the cloud
  id: totrans-60
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 完全云端
- en: There could be two different cases in an all-in-the-cloud scenario of monitoring.
    In both cases, the infrastructure that runs the software system will be in the
    cloud, typically on a public cloud platform such as AWS. The entire monitoring
    system can be deployed on the same infrastructure or a cloud monitoring service
    such as Datadog can be used, in which case, only its agent will be running alongside
    the application system.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 在完全云端的监控场景中，可能有两种不同的情况。在这两种情况下，运行软件系统的基础设施都会位于云端，通常是公共云平台，如AWS。整个监控系统可以部署在相同的基础设施上，或者使用云监控服务，如Datadog，在这种情况下，只有它的代理会与应用系统一同运行。
- en: '![Figure 1.4 – All in the cloud with in-house monitoring'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 1.4 – 完全云端与内部监控'
- en: '](img/Figure_1.4_B16483.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.4_B16483.jpg)'
- en: Figure 1.4 – All in the cloud with in-house monitoring
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.4 – 完全云端与内部监控
- en: In the first case of an all-in-the-cloud scenario, you need to set up monitoring
    or leverage monitoring services provided by a public cloud provider such as CloudWatch
    on AWS or use a combination of both.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在完全云端的场景下，您需要设置监控系统，或利用由公共云提供商提供的监控服务，比如AWS的CloudWatch，或者两者结合使用。
- en: '![Figure 1.5 – All in the cloud with cloud monitoring'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 1.5 – 完全云端与云监控'
- en: '](img/Figure_1.5_B16483.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.5_B16483.jpg)'
- en: Figure 1.5 – All in the cloud with cloud monitoring
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.5 – 完全云端与云监控
- en: In the second case of an all-in-the-cloud scenario, a third-party SaaS monitoring
    service such as Datadog is used. The main attractions of using SaaS monitoring
    services are their rich set of features, the high availability of such services,
    and the minimal overhead of rolling out and maintaining monitoring.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在完全云化的第二种情况下，使用的是第三方 SaaS 监控服务，例如 Datadog。使用 SaaS 监控服务的主要吸引力在于其丰富的功能集、高可用性以及部署和维护监控时的最小开销。
- en: 'Using cloud infrastructure has the added advantage of having access to native
    monitoring tools such as CloudWatch on AWS. These services are highly reliable
    and can be used to enhance monitoring in multiple ways to do the following:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 使用云基础设施的额外优势之一是可以访问原生监控工具，例如 AWS 上的 CloudWatch。这些服务具有高度可靠性，可以通过多种方式增强监控，以完成以下任务：
- en: Monitor cloud resources that are hard to monitor using standard monitoring tools
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控通过标准监控工具难以监控的云资源
- en: Be used as a secondary monitoring system, mainly to cover infrastructure monitoring
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 作为二级监控系统，主要用于覆盖基础设施监控
- en: Monitor the rest of the monitoring infrastructure as a meta-monitoring tool
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 作为元监控工具监控其余的监控基础设施
- en: The scenarios we discussed here were simplified to explain the core concepts.
    In real life, a monitoring solution is rolled out with multiple tools and some
    of them might be deployed in-house and others might be cloud-based. When such
    complex configurations are involved, not losing track of the main objectives of
    proactive monitoring is the key to having a reliable monitoring system that can
    help to minimize outages and provide operational insights that will contribute
    to fine-tuning the application system.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在这里讨论的场景是经过简化的，以便解释核心概念。在现实生活中，监控解决方案会结合多个工具，一些工具可能是在本地部署的，另一些则可能是基于云的。当涉及到如此复杂的配置时，不丢失主动监控的主要目标是拥有一个可靠的监控系统的关键，这样可以帮助减少故障，并提供操作性洞察，从而有助于对应用系统进行微调。
- en: Monitoring terminology and processes
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监控术语和流程
- en: Now, let's look at the most commonly used monitoring terminology in both literature
    and tools. The difference between some of these terms is subtle and you may have
    to pay close attention to understand them.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们来看一下文献和工具中最常用的监控术语。某些术语之间的差异微妙，您可能需要特别留意才能理解它们。
- en: Host
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 主机
- en: A host used to mean a physical server during the data center era. In the monitoring
    world, it usually refers to a device with an IP address. That covers a wide variety
    of equipment and resources – bare-metal machines, network gear, IoT devices, virtual
    machines, and even containers.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在数据中心时代，主机通常指的是物理服务器。在监控领域，它通常指具有 IP 地址的设备。这涵盖了各种各样的设备和资源——裸金属机器、网络设备、物联网设备、虚拟机，甚至容器。
- en: Some of the first-generation monitoring tools, such as Nagios and Zenoss are
    built around the concept of a host, meaning everything that can be done on those
    platforms must be tied to a host. Such restrictions are relaxed in new-generation
    monitoring tools such as Datadog.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 一些第一代监控工具，如 Nagios 和 Zenoss，是围绕主机概念构建的，这意味着在这些平台上执行的所有操作都必须与主机相关联。在 Datadog
    等新一代监控工具中，这种限制已被放宽。
- en: Agent
  id: totrans-80
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 代理
- en: An agent is a service that runs alongside the application software system to
    help with monitoring. It runs various tasks for the monitoring tools and reports
    information back to the monitoring backend.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 代理是与应用软件系统一起运行的服务，帮助进行监控。它执行监控工具的各种任务，并将信息报告回监控后台。
- en: The agents are installed on the hosts where the application system runs. It
    could be a simple process running directly on the operating system or a microservice.
    Datadog supports both options and when the application software is deployed as
    microservices, the agent is also deployed as a microservice.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 代理安装在应用系统运行的主机上。它可以是直接在操作系统上运行的简单进程，也可以是微服务。Datadog 支持这两种选项，当应用软件以微服务方式部署时，代理也以微服务方式部署。
- en: Metrics
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 指标
- en: 'Metrics in monitoring refers to a time-bound measurement of some information
    that would provide insight into the workings of the system being monitored. These
    are some familiar examples:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 监控中的指标是指某些信息的时间度量，这些信息能够提供被监控系统的工作状态的洞察。以下是一些常见的例子：
- en: Disk space available on the root partition of a machine
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 机器根分区上可用的磁盘空间
- en: Free memory on a machine
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查看机器上的空闲内存
- en: Days left until the expiration of an SSL certificate
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SSL 证书到期前剩余的天数
- en: The important thing to note here is that a metric is time-bound and its value
    will change. For that reason, the total disk space on the root partition is not
    considered a metric.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 这里需要注意的重要一点是，度量是有时间限制的，并且其值会变化。出于这个原因，根分区的总磁盘空间不被视为度量。
- en: A metric is measured periodically to generate time-series data. We will see
    that this time-series data can be used in various ways – to plot charts on dashboards,
    to analyze trends, and to set up monitors.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 一个度量是定期测量的，用于生成时间序列数据。我们将看到，这些时间序列数据可以以多种方式使用——在仪表盘上绘制图表、分析趋势，以及设置监控。
- en: 'A wide variety of metrics, especially those related to infrastructure, are
    generated by monitoring tools. There are options to generate your own custom metrics
    too:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 监控工具生成了各种各样的度量，特别是与基础设施相关的度量。也可以选择生成自己的自定义度量：
- en: Monitoring tools provide options to run scripts to generate metrics.
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控工具提供运行脚本生成度量的选项。
- en: Applications can publish metrics to the monitoring tool.
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序可以将度量发布到监控工具。
- en: Either the monitoring tool or others might provide plugins to generate metrics
    specific to third-party tools used by the software system. For example, Datadog
    provides such integrations for most of the popular tools, such as NGINX. So, if
    you are using NGINX in your application stack by enabling the integration, you
    can get NGINX-specific metrics.
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控工具或其他工具可能提供插件，用于生成与软件系统使用的第三方工具相关的度量。例如，Datadog 为大多数流行工具（如 NGINX）提供这样的集成。所以，如果你在应用栈中使用
    NGINX，启用集成后，你就可以获得 NGINX 特定的度量。
- en: Up/down status
  id: totrans-94
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 启用/禁用状态
- en: 'A metric measurement can have a range of values, but up or down is a binary
    status. These are a few examples:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 一个度量的测量值可以有一个范围，但启用或禁用是一个二进制状态。以下是一些示例：
- en: A process is up or down
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个进程是否运行
- en: A website is up or down
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个网站是否可用
- en: A host is pingable or not
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个主机是否可 ping
- en: Tracking the up/down status of various components of a software system is core
    to all monitoring tools and they have built-in features to check on a variety
    of resources.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 跟踪软件系统各个组件的启用/禁用状态是所有监控工具的核心，它们具备内置的功能来检查各种资源。
- en: Check
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 检查
- en: A check is used by the monitoring system to collect the value of metrics. When
    it is done periodically, time-series data for that metric is generated.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 检查是监控系统用来收集度量值的工具。当它定期执行时，会为该度量生成时间序列数据。
- en: While time-series data for standard infrastructure-level metrics is available
    out of the box in monitoring systems, custom checks could be implemented to generate
    custom metrics that would involve some scripting.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然标准基础设施级度量的时间序列数据在监控系统中是现成可用的，但可以实现自定义检查来生成需要一些脚本的自定义度量。
- en: '![Figure 1.6 – Active check/pull model'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 1.6 – 主动检查/拉模式'
- en: '](img/Figure_1.6_B16483.jpg)'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.6_B16483.jpg)'
- en: Figure 1.6 – Active check/pull model
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.6 – 主动检查/拉模式
- en: A check can be active or passive. An active check is initiated by the monitoring
    backend to collect metrics values and up/down status info, with or without the
    help of its agents. This is also called the pull method of data collection.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 一个检查可以是主动的或被动的。主动检查由监控后端发起，用于收集度量值和启用/禁用状态信息，可以有也可以没有代理的帮助。这也被称为数据收集的拉取方法。
- en: '![Figure 1.7 – Passive check/push model'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 1.7 – 被动检查/推模式'
- en: '](img/Figure_1.7_B16483.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.7_B16483.jpg)'
- en: Figure 1.7 – Passive check/push model
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.7 – 被动检查/推模式
- en: A passive check reports such data to the monitoring backend, typically with
    its own agents or some custom script. This is also called the push method of data
    collection.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 一个被动检查将此类数据报告给监控后端，通常通过其自身的代理或一些自定义脚本。这也被称为数据收集的推送方法。
- en: The active/passive or pull/push model of data collection is standard across
    all monitoring systems. The method would depend on the type of metrics a monitoring
    system collects. You will see in later chapters that Datadog supports both methods.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 数据收集的主动/被动或拉/推模型在所有监控系统中都是标准的。该方法取决于监控系统收集的度量类型。你将在后续章节中看到，Datadog 支持这两种方法。
- en: Threshold
  id: totrans-112
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 阈值
- en: A threshold is a fixed value in the range of values possible for a metric. For
    example, on a root partition with a total disk space of 8 GB, the available disk
    space could be anything from 0 GB to 8 GB. A threshold in this specific case could
    be 1 GB, which could be set as an indication of low storage on the root partition.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 阈值是度量值可能范围内的固定值。例如，在一个总磁盘空间为 8 GB 的根分区上，可用磁盘空间可能是从 0 GB 到 8 GB 之间的任何值。这个特定情况下的阈值可以是
    1 GB，它可以设置为指示根分区存储不足。
- en: There could be multiple thresholds defined too. In this specific example, 1
    GB could be a warning threshold and 500 MB could be a critical or high-severity
    threshold.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 也可以定义多个阈值。在这个具体示例中，1 GB 可能是警告阈值，500 MB 可能是关键或高严重性阈值。
- en: Monitor
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 监视器
- en: A monitor looks at the time-series data generated for a metric and alerts the
    alert recipients if the values cross the thresholds. A monitor can also be set
    up for the up/down status, in which case it alerts the alert recipients if the
    related resource is down.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 监视器查看为度量标准生成的时间序列数据，并且在值越过阈值时向警报接收者发出警报。监视器也可以设置为上/下状态，这种情况下，如果相关资源停机，它将向警报接收者发送警报。
- en: Alert
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 警报
- en: An alert is produced by a monitor when the associated check determines that
    the metric value crosses a threshold set on the monitor. A monitor could be configured
    to notify the alert recipients of the alerts.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 当关联检查确定度量值越过监视器设置的阈值时，监视器生成警报。监视器可以配置为通知警报接收者警报。
- en: Alert recipient
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 警报接收者
- en: The alert recipient is a user in the organization who signs up to receive alerts
    sent out by a monitor. An alert could be received by the recipient through one
    or more communication channels such, as E-Mail, SMS, and Slack.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 警报接收者是组织中注册接收监视器发送的警报的用户。警报接收者可以通过多个通信渠道接收到警报，例如电子邮件、短信和Slack。
- en: Severity level
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 严重级别
- en: Alerts are classified by the seriousness of the issue that they unearth about
    the software system and that is set by the appropriate severity level. The response
    to an alert is tied to the severity level of the alert.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 警报根据其揭示的软件系统问题的严重性进行分类，并由适当的严重级别设置。对警报的响应与警报的严重级别相关联。
- en: A sample set of severity levels could consist of the levels **Informational**,
    **Warning**, and **Critical**. For example, with our example of available disk
    space on the root partition, at 30% of available disk space, the monitor could
    be configured to alert as a warning and at 20% it could alert as critical.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 一个示例的严重级别集合可以包括 **信息**、**警告** 和 **关键**。例如，在根分区可用磁盘空间的示例中，当可用磁盘空间为30%时，监视器可以配置为警告，并且在20%时可以配置为关键警报。
- en: As you can see, setting up severity levels for an increasing level of seriousness
    would provide the opportunity to catch issues and take mitigative actions ahead
    of time, which is the main objective of proactive monitoring. Note that this is
    possible in situations where a system component degenerates over a period of time.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您所看到的，为不断加重的严重性设置警报级别将提供捕捉问题并及时采取缓解措施的机会，这是积极监控的主要目标。请注意，在系统组件随时间退化的情况下，这种方法是可行的。
- en: A monitor that tracks an up/down status will not be able to provide any warning,
    and so a mitigative action would be to bring up the related service at the earliest.
    However, in a real-life scenario, there must be multiple monitors so at least
    one of them would be able to catch an underlying issue ahead of time. For example,
    having no disk space on the root partition can stop some services, and monitoring
    the available space on the root partition would help prevent those services from
    going down.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 跟踪上/下状态的监视器将无法提供任何警告，因此应尽快启动相关服务来采取缓解措施。然而，在实际情况中，必须有多个监视器，这样至少其中一个监视器可以提前捕捉到潜在问题。例如，在根分区没有磁盘空间时，可能会停止某些服务，监视根分区的可用空间将有助于防止这些服务停止运行。
- en: Notification
  id: totrans-126
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通知
- en: A message sent out as part of an alert specific to a communication platform
    such as email is called a notification. There is a subtle difference between an
    alert and a notification, but at times they are considered the same. An alert
    is a state within the monitoring system that can trigger multiple actions such
    as sending out notifications and updating monitoring dashboards with that status.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 作为电子邮件等通信平台特定警报的一部分发送出去的消息被称为通知。警报和通知之间有微妙的区别，但有时它们被视为相同。警报是监视系统内的一个状态，可以触发多个动作，如发送通知和更新监视仪表板的状态。
- en: Traditionally, email distribution groups used to be the main communication method
    used to send out notifications. Currently, there are much more sophisticated options,
    such as chat and texting, available out of the box on most monitoring platforms.
    Also, escalation tools such as PagerDuty could be integrated with modern monitoring
    tools such as Datadog to route notifications based on severity.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上，电子邮件分发组是发送通知的主要通信方式。目前，有更多复杂的选项，如聊天和短信，几乎所有监控平台都原生支持这些选项。此外，PagerDuty等升级工具可以与现代监控工具如Datadog集成，根据严重性路由通知。
- en: Downtime
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 停机时间
- en: The downtime of a monitor is a time window during which alerting is disabled
    on that monitor. Usually, this is done for a temporary period while some change
    to the underlying infrastructure or software component is rolled out, during which
    time monitoring on that component is irrelevant. For example, a monitor that tracks
    the available space on a disk drive will be impacted while the maintenance task
    to increase the storage size is ongoing.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 监控系统的停机时间是指该监控系统在一定时间窗口内禁用警报功能的时段。通常，这种做法是为了临时停用警报，当基础设施或软件组件的变更正在进行时，监控该组件变得无关紧要。例如，当增加存储空间的维护任务进行时，跟踪磁盘驱动器可用空间的监控将受到影响。
- en: Monitoring platforms such as Datadog support this feature. The practical use
    of this feature is to avoid receiving notifications from the impacted monitors.
    By integrating a CI/CD pipeline with the monitoring application, the downtimes
    could be scheduled automatically as a prerequisite for deployments.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 如Datadog等监控平台支持这一功能。该功能的实际应用是避免从受影响的监控系统接收通知。通过将CI/CD管道与监控应用程序集成，停机时间可以自动安排，作为部署的先决条件。
- en: Event
  id: totrans-132
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 事件
- en: 'An event published by a monitoring system usually provides details of a change
    that happened in the software system. Some examples are the following:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 监控系统发布的事件通常会提供软件系统发生变化的详细信息。一些常见的示例如下：
- en: The restart of a process
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 进程重启
- en: The deployment or shutting down of a microservice due to a change in user traffic
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于用户流量变化而进行微服务的部署或关闭
- en: The addition of a new host to the infrastructure
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向基础设施添加新的主机
- en: A user logging into a sensitive resource
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户登录敏感资源
- en: Note that none of these events demand immediate action but are informational.
    That's how an event differs from an alert. A critical alert is actionable but
    there is no severity level attached to an event and so it is not actionable. Events
    are recorded in the monitoring system and they are valuable information when triaging
    an issue.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，这些事件不需要立即采取行动，而是提供信息。这就是事件与警报的区别。警报是可操作的，而事件没有严重性级别，因此不可操作。事件会记录在监控系统中，并且在问题排查时是有价值的信息。
- en: Incident
  id: totrans-139
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 事故
- en: When a product feature is not available to users it is called an incident. An
    incident occurs when some outage happens in the infrastructure, this being hardware
    or software, but not always. It could also happen due to external network or internet-related
    access issues, though such issues are uncommon.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 当产品功能无法提供给用户时，这称为事故。事故发生在基础设施出现故障时，可能是硬件或软件问题，但也不一定。它也可能由于外部网络或互联网相关的访问问题而发生，尽管这种情况较为少见。
- en: 'The process of handling incidents and mitigating them is an area by itself
    and not generally considered part of core monitoring. However, monitoring and
    incident management are intertwined for these reasons:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 处理事故并进行缓解的过程本身就是一个独立领域，通常不被视为核心监控的一部分。然而，监控和事故管理因以下原因密切相关：
- en: Not having comprehensive monitoring would always cause incidents because, without
    that, there is no opportunity to mitigate an issue before it causes an outage.
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果没有全面的监控，事故总是会发生，因为没有监控系统，就无法在问题导致故障之前进行缓解。
- en: And of course, action items from a **Root Cause Analysis** (**RCA**) of an incident
    would have tasks to implement more monitors, a typical reactive strategy (or the
    lack thereof) that must be avoided.
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当然，**根本原因分析**（**RCA**）的行动项通常会包括实施更多监控任务，这是一种典型的反应性策略（或者说没有反应性策略），必须避免这种情况。
- en: On call
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 值班
- en: The critical alerts sent out by monitors are responded to by an on-call team.
    Though the actual requirements can vary based on the **Service-Level Agreement**
    (**SLA**) requirements of the application being monitored, on-call teams are usually
    available 24x7\.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 由监控系统发送的关键警报由值班团队响应。尽管实际需求可能会根据被监控应用程序的**服务级别协议**（**SLA**）要求有所不同，但值班团队通常是24小时全天候待命的。
- en: 'In a mature service engineering organization, three levels of support would
    be available, where an issue is escalated from L1 to L3:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 在成熟的服务工程组织中，将提供三个级别的支持，问题从L1升到L3：
- en: The L1 support team consists of product support staff who are knowledgeable
    about the applications and can respond to issues using runbooks.
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: L1支持团队由了解应用程序的产品支持人员组成，能够使用运行手册来响应问题。
- en: The L2 support team consists of **Site Reliability Engineers** (**SREs**) who
    might also rely on runbooks, but they are also capable of triaging and fixing
    the infrastructure and software components.
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: L2支持团队由**站点可靠性工程师**（**SREs**）组成，他们可能也依赖运行手册，但他们还能够进行故障排查和修复基础设施和软件组件。
- en: The L3 support team would consist of the DevOps and software engineers who designed
    and built the infrastructure and software system in production. Usually, this
    team gets involved only to triage issues that are not known.
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: L3支持团队通常由设计并构建生产环境中的基础设施和软件系统的DevOps和软件工程师组成。通常，只有在处理未知问题时，这个团队才会介入。
- en: Runbook
  id: totrans-150
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 运行手册
- en: A runbook provides steps to respond to an alert notification for on-call support
    personnel. The steps might not always provide a resolution to the reported issue
    and it could be as simple as escalating the issue to an engineering point of contact
    to investigate the issue.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 运行手册为值班支持人员提供响应警报通知的步骤。步骤可能并不总是提供解决报告问题的方法，有时仅仅是将问题升级到工程联系人，以便进一步调查。
- en: Types of monitoring
  id: totrans-152
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监控类型
- en: There are different types of monitoring. All types of monitoring that are relevant
    to a software system must be implemented to make it a comprehensive solution.
    Another aspect to consider is the business need of rolling out a certain type
    of monitoring. For example, if customers of a software service insist on securing
    the application they subscribe to, the software provider has to roll out security
    monitoring.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 监控有不同的类型。与软件系统相关的所有监控类型都必须实施，才能使其成为一个全面的解决方案。另一个需要考虑的方面是推出某种类型的监控的业务需求。例如，如果软件服务的客户坚持要求确保他们订阅的应用程序的安全性，那么软件提供商就必须推出安全监控。
- en: (The discussion on types of monitoring in this section originally appeared in
    the article *Proactive Monitoring*, published by me on [DevOps.com](http://DevOps.com).)
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: （本节讨论的监控类型最初出现在我发表的文章《主动监控》中，文章发布于[DevOps.com](http://DevOps.com)网站。）
- en: '![Figure 1.8 – Types of monitoring'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 1.8 – 监控类型'
- en: '](img/Figure_1.8_B16483.jpg)'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_1.8_B16483.jpg)'
- en: Figure 1.8 – Types of monitoring
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.8 – 监控类型
- en: Let us now explore these types of monitoring in detail.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们详细探讨这些监控类型。
- en: Infrastructure monitoring
  id: totrans-159
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 基础设施监控
- en: 'The infrastructure that runs the application system is made up of multiple
    components: servers, storage devices, a load balancer, and so on. Checking the
    health of these devices is the most basic requirement of monitoring. The popular
    monitoring platforms support this feature out of the box. Very little customization
    is required except for setting up the right thresholds on those metrics for alerting.'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 运行应用系统的基础设施由多个组件组成：服务器、存储设备、负载均衡器等。检查这些设备的健康状况是监控的最基本要求。流行的监控平台提供了开箱即用的支持此功能。除了为这些度量设置合适的阈值以便触发警报外，几乎不需要其他定制。
- en: Platform monitoring
  id: totrans-161
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 平台监控
- en: 'An application system is usually built using multiple third-party tools such
    as the following:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 一个应用系统通常是由多个第三方工具构建的，以下是一些示例：
- en: Databases, both RDBMS (MySQL, Postgres) and NoSQL (MongoDB, Couchbase, Cassandra)
    data repositories
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据库，包括关系型数据库（MySQL，Postgres）和NoSQL数据库（MongoDB，Couchbase，Cassandra）数据存储
- en: Full-text search engines (Elasticsearch)
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 全文搜索引擎（Elasticsearch）
- en: Big data platforms (Hadoop, Spark)
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大数据平台（Hadoop，Spark）
- en: Messaging systems (RabbitMQ)
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 消息传递系统（RabbitMQ）
- en: Memory object caching systems (Memcached, Redis)
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内存对象缓存系统（Memcached，Redis）
- en: BI and reporting tools (MicroStrategy, Tableau)
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: BI和报告工具（MicroStrategy，Tableau）
- en: Checking the health of these application components is important too. Most of
    these tools provide an interface, mainly via the REST API, that can be leveraged
    to implement plugins on the main monitoring platform.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 检查这些应用组件的健康状况也很重要。大多数这些工具提供了一个接口，主要通过REST API，可以利用它在主监控平台上实现插件。
- en: Application monitoring
  id: totrans-170
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 应用监控
- en: Having a healthy infrastructure and platform is not good enough for an application
    to function correctly. Defective code from a recent deployment or third-party
    component issues or incompatible changes with external systems can cause application
    failures. Application-level checks can be implemented to detect such issues. As
    mentioned earlier, a functional or integration test would unearth such issues
    in a testing/staging environment, and an equivalent of that should be implemented
    in the production environment also.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 拥有健康的基础设施和平台并不足以保证应用程序正确运行。最近部署的有缺陷的代码、第三方组件问题或与外部系统的不兼容更改，都可能导致应用失败。可以实现应用层检查来检测这些问题。如前所述，功能性或集成测试能够在测试/预发布环境中发现这些问题，并且在生产环境中也应该实现相应的检查。
- en: The implementation of application-level monitoring could be simplified by building
    hooks or API endpoints in the application. In general, improving the observability
    of the application is the key.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 实现应用层监控可以通过在应用中构建钩子或 API 端点来简化。通常，提高应用的可观测性是关键。
- en: Monitoring is usually an after-thought and the requirement of such instrumentation
    is overlooked during the design phase of an application. The participation of
    the DevOps team in design reviews improves the operability of a system. Planning
    for application-level monitoring in production is one area where DevOps can provide
    inputs.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 监控通常是事后考虑的，应用的设计阶段往往忽视了这种工具的需求。DevOps 团队参与设计评审可以提升系统的可操作性。规划生产环境中的应用层监控是 DevOps
    可以提供建议的一个方面。
- en: Business monitoring
  id: totrans-174
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 业务监控
- en: The application system runs in production to meet certain business goals. You
    could have an application that runs flawlessly on a healthy infrastructure but
    still, the business might not be meeting its goals. It is important to provide
    that feedback to the business at the earliest opportunity to take corrective actions
    that might trigger enhancements of the application features and/or the way the
    business is run using the application.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 应用系统在生产环境中运行，以实现特定的业务目标。你可能有一个在健康基础设施上完美运行的应用，但业务可能仍未达到其目标。在最早的机会提供反馈给业务非常重要，这样可以采取纠正措施，进而触发应用功能的增强和/或业务运作方式的改善。
- en: These efforts should only complement the more complex BI-based data analysis
    methods that could provide deeper insights into the state of the business. Business-level
    monitoring can be based on transactional data readily available in the data repositories
    and the data aggregates generated by BI systems.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 这些努力应该仅仅作为更加复杂的基于 BI 的数据分析方法的补充，后者可以提供更深入的业务状态洞察。业务级监控可以基于数据仓库中现有的事务数据和 BI 系统生成的数据聚合。
- en: Both application- and business-level monitoring are company-specific, and plugins
    have to be developed for such monitoring requirements. Implementing a framework
    to access standard sources of information such as databases and REST APIs from
    the monitoring platform could minimize the requirement of building plugins from
    scratch every time.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 应用层监控和业务层监控都是公司特定的，必须为这些监控需求开发插件。从监控平台访问标准信息源（如数据库和 REST API）实现一个框架，可以最大程度地减少每次都需要从零开始构建插件的需求。
- en: Last-mile monitoring
  id: totrans-178
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 最后一公里监控
- en: A monitoring platform deployed in the same public cloud or data center environment
    as where the applications run cannot check the end user experience. To address
    that gap, there are several SaaS products available on the market, such as Catchpoint
    and Apica. These services are backed up by actual infrastructure to monitor the
    applications in specific geographical locations. For example, if you are keen
    on knowing how your mobile app performs on iPhones in Chicago, that could be tracked
    using the service provider's testing infrastructure in Chicago.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 在与应用程序运行的相同公有云或数据中心环境中部署的监控平台，无法检查最终用户体验。为了解决这个问题，市场上有多个 SaaS 产品，例如 Catchpoint
    和 Apica。这些服务由实际的基础设施支持，用于监控特定地理位置的应用。例如，如果你想知道你的移动应用在芝加哥的 iPhone 上的表现，便可以通过服务提供商在芝加哥的测试基础设施进行跟踪。
- en: Alerts are set up on these tools to notify the site reliability engineering
    team if the application is not accessible externally or if there are performance
    issues with the application.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 在这些工具上设置警报，若应用无法从外部访问或出现性能问题时，通知站点可靠性工程团队。
- en: Log aggregation
  id: totrans-181
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 日志聚合
- en: In a production environment, a huge amount of information is logged in various
    log files, by operating system, platform components, and application. They will
    get some attention when issues happen and normally are ignored otherwise. Traditional
    monitoring tools such as Nagios couldn't handle the constantly changing log files
    except for alerting on some patterns.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 在生产环境中，操作系统、平台组件和应用程序会在各种日志文件中记录大量信息。当出现问题时，这些信息会引起关注，否则通常会被忽略。传统的监控工具如Nagios除了在某些模式下发出警报外，无法处理不断变化的日志文件。
- en: The advent of log aggregation tools such as Splunk changed that situation. Using
    aggregated and indexed logs, it is possible to detect issues that would have gone
    unnoticed earlier. Alerts can be set up based on the info available in the indexed
    log data. For example, Splunk provides a custom query language to search indexes
    for operational insights. Using APIs provided by these tools, the alerting can
    actually be integrated with the main monitoring platform.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 日志聚合工具的出现，如Splunk，改变了这一局面。通过聚合和索引日志，可以检测到之前可能被忽略的问题。可以根据索引日志数据中的信息设置警报。例如，Splunk提供了自定义查询语言，可以搜索索引以获取操作洞察。通过这些工具提供的API，警报功能实际上可以与主要的监控平台集成。
- en: To leverage the aggregation and indexing capabilities of these tools, structured
    data outputs can be generated by the application or scripts that will be indexed
    by the log aggregation tool later.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 为了充分利用这些工具的聚合和索引功能，应用程序或脚本可以生成结构化数据输出，这些输出稍后会被日志聚合工具索引。
- en: Meta-monitoring
  id: totrans-185
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 元监控
- en: It is important to make sure that the monitoring infrastructure itself is up
    and running. Disabling alerting during deployment and forgetting about enabling
    it later is one of the common oversights that has been seen in operations. Such
    missteps are hard to monitor and only improvements in the deployment process can
    address such issues.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 确保监控基础设施本身正常运行非常重要。在部署期间禁用警报并忘记稍后启用它，是操作中常见的疏忽之一。这类错误很难监控，只有在部署过程中改进才能解决这些问题。
- en: 'Let''s look at a couple of popular methods used in meta-monitoring:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看一看在元监控中使用的几种流行方法：
- en: Pinging hosts
  id: totrans-188
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Ping主机
- en: If there are multiple instances of the monitoring application running, or if
    there is a standby node, then cross-checks can be implemented to verify the availability
    of hosts used for monitoring. In AWS, CloudWatch can be used to monitor the availability
    of an EC2 node.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 如果有多个监控应用程序实例在运行，或者有一个备用节点，则可以实施交叉检查，以验证用于监控的主机的可用性。在AWS中，可以使用CloudWatch监控EC2节点的可用性。
- en: Health-check for monitoring
  id: totrans-190
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 监控健康检查
- en: Checking on the availability of monitoring UI and activity in a monitoring tool's
    log files would ensure that the monitoring system itself is fully functional and
    it continues to watch for issues in the production environment. If a log aggregation
    tool is used, tracking the application's log files would be the most effective
    method to check whether there is any activity in the log file. The same index
    can also be queried for any potential issues by using standard keywords such as
    `Error` and `Exception`.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 检查监控UI的可用性以及监控工具日志文件中的活动，以确保监控系统本身是完全正常运行的，并且它继续在生产环境中监视问题。如果使用了日志聚合工具，跟踪应用程序的日志文件将是检查日志文件中是否有任何活动的最有效方法。通过使用标准关键字，如`Error`和`Exception`，同一索引也可以查询潜在的问题。
- en: Noncore monitoring
  id: totrans-192
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 非核心监控
- en: The monitoring types that have been discussed thus far make up the components
    of a core monitoring solution. You will see most of these monitoring categories
    in a comprehensive solution. There are more monitoring types that are highly specialized
    and that would be important components in a specific business situation.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止讨论的监控类型构成了核心监控解决方案的组成部分。在综合解决方案中，你会看到大多数这些监控类别。还有一些高度专业化的监控类型，在特定的业务情况下会成为重要组成部分。
- en: Security monitoring
  id: totrans-194
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安全监控
- en: 'Security monitoring is a vast area by itself and there are specialized tools
    available for that, such as **SIEM** tools. However, that is slowly changing and
    general-purpose monitoring tools including Datadog have started offering security
    features to be more competitive in the market. Security monitoring usually covers
    these aspects:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 安全监控是一个庞大的领域，并且有专门的工具可供使用，如**SIEM**工具。然而，这种情况正在慢慢改变，包括Datadog在内的通用监控工具开始提供安全功能，以在市场中保持竞争力。安全监控通常包括以下几个方面：
- en: The vulnerability of the application system, including infrastructure, due to
    changes made to its state
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用系统，包括基础设施，由于其状态变化而导致的脆弱性
- en: The vulnerability of infrastructure components with respect to known issues
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基础设施组件相对于已知问题的脆弱性
- en: Monitoring attacks and catching security breaches
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控攻击并捕捉安全漏洞
- en: As you can see, these objectives might not strictly be covered by the core monitoring
    concepts we have discussed thus far and we'll have to bring in a new set of terminology
    and concepts to understand it better, and we will look at those details later
    in the book.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，这些目标可能并不完全由我们迄今为止讨论的核心监控概念所涵盖，我们将需要引入一组新的术语和概念来更好地理解这些内容，稍后在书中我们将详细讨论这些内容。
- en: Application Performance Monitoring (APM)
  id: totrans-200
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 应用性能监控（APM）
- en: As the name suggests, APM helps to fine-tune the application's performance.
    This is made possible by the improved observability of the application system
    in which the interoperability of various components is made more visible. Though
    these monitoring tools started off as dedicated APM solutions, full-stack monitoring
    is available these days so they can be used for general-purpose monitoring.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 正如其名称所示，APM帮助精细调整应用程序的性能。这是通过改进对应用系统的可观察性来实现的，从而使各个组件的互操作性变得更加明显。尽管这些监控工具最初是作为专用APM解决方案推出的，但如今它们已经提供全栈监控，因此也可以用于通用监控。
- en: Overview of monitoring tools
  id: totrans-202
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监控工具概述
- en: In this section, you will obtain a good understanding of all the popular monitoring
    tools available on the market that will help you to evaluate Datadog better.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，您将深入了解市场上所有流行的监控工具，帮助您更好地评估Datadog。
- en: There are lots of monitoring tools available on the market, from open source,
    freeware products through licensed and cloud-based. While lots of tools such as
    Datadog are general-purpose applications that cover various monitoring types we
    have discussed earlier, some tools, such as Splunk and AppDynamics, address very
    specialized monitoring problems.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 市场上有很多监控工具，从开源、免费软件到许可和基于云的产品应有尽有。尽管许多工具（如Datadog）是通用应用程序，涵盖我们之前讨论的各种监控类型，但一些工具，如Splunk和AppDynamics，则解决了非常专业的监控问题。
- en: One challenge a DevOps architect would encounter when planning a monitoring
    solution is to evaluate the available tools for rolling out a proactive monitoring
    solution. In that respect, as we will see in this book, Datadog stands out as
    one of the best general-purpose monitoring tools as it supports the core monitoring
    features and also provides some non-core features such as security monitoring.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 在规划监控解决方案时，DevOps架构师面临的一个挑战是评估现有工具，以便推出主动监控解决方案。在这方面，正如我们在本书中所看到的，Datadog凭借其核心监控功能以及提供一些非核心功能（如安全监控）而脱颖而出，是最好的通用监控工具之一。
- en: To bring some structure to the large and varied collection of monitoring tools
    available on the market, they are classified into three broad categories on the
    basis of where they actually run. Some of these applications are offered both
    on-premises and as a SaaS solution.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 为了给市场上大量种类繁多的监控工具带来一些结构，它们根据实际运行的位置被分为三大类。其中一些应用程序同时提供本地部署和SaaS解决方案。
- en: We will briefly look at what other monitoring applications are available on
    the market besides Datadog. Some of these applications are competing with Datadog
    and the rest could be complementary solutions to complete the stack of tools needed
    for rolling out proactive monitoring.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将简要了解除了Datadog之外，市场上还有哪些其他监控应用程序。其中一些应用程序与Datadog竞争，而其余的则可能是补充解决方案，用于完善推出主动监控所需的工具组合。
- en: On-premises tools
  id: totrans-208
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 本地工具
- en: This group of monitoring applications have to be deployed on your infrastructure
    to run alongside the application system. Some of these tools might also be available
    as an SaaS, and that will be mentioned where needed.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 这一类监控应用程序必须部署在您的基础设施上，与应用系统一起运行。其中一些工具也可能作为SaaS提供，我们将在需要时提到这一点。
- en: The objective here is to introduce the landscape of the monitoring ecosystem
    to newcomers to the area and show how varied it is.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的目标是向新手介绍监控生态系统的全貌，并展示其多样性。
- en: Nagios
  id: totrans-211
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Nagios
- en: Nagios is a popular, first-generation monitoring application that is well known
    for monitoring systems and network infrastructure. Nagios is general-purpose,
    open source software that has both free and licensed versions. It is highly flexible
    software that could be extended using hundreds of plugins available widely. Also,
    writing plugins and deploying them to meet custom monitoring requirements is relatively
    easy.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: Nagios 是一款流行的第一代监控应用，广泛用于监控系统和网络基础设施。Nagios 是通用的开源软件，提供免费和许可版本。它是一款高度灵活的软件，支持通过广泛可用的数百个插件进行扩展。此外，编写插件并部署以满足定制监控需求也相对容易。
- en: Zabbix
  id: totrans-213
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Zabbix
- en: Zabbix is another popular, first-generation monitoring application that is open
    source and free. It's a general-purpose monitoring application like Nagios.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: Zabbix 是另一款流行的第一代开源免费监控应用。它是类似于 Nagios 的通用监控应用。
- en: TICK Stack
  id: totrans-215
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: TICK Stack
- en: '**TICK** stands for **Telegraf**, **InfluxDB**, **Chronograf**, and **Kapacitor**.
    These open source software components make up a highly distributed monitoring
    application stack and it is one of the popular new-generation monitoring platforms.
    While first-generation monitoring tools are basically monolithic software, new-generation
    platforms are divided into components that make them flexible and highly scalable.
    The core components of the TICK Stack perform these tasks:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: '**TICK** 代表 **Telegraf**、**InfluxDB**、**Chronograf** 和 **Kapacitor**。这些开源软件组件构成了一个高度分布的监控应用栈，是一款受欢迎的新一代监控平台。与第一代监控工具基本是单体软件不同，下一代平台被分为多个组件，使其更加灵活和高度可扩展。TICK
    Stack 的核心组件执行以下任务：'
- en: '**Telegraf**: Generates metrics time-series data.'
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Telegraf**：生成度量时间序列数据。'
- en: '**InfluxDB**: Stores time-series monitoring data for it to be consumed in various
    ways.'
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**InfluxDB**：存储时间序列监控数据，以便以多种方式进行消费。'
- en: '**Chronograf**: Provides a UI for metrics times-series data.'
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Chronograf**：为度量时间序列数据提供 UI。'
- en: '**Kapacitor**: Sets monitors on metrics time-series data.'
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Kapacitor**：为度量时间序列数据设置监控。'
- en: Prometheus
  id: totrans-221
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Prometheus
- en: 'Prometheus is a popular, new-generation, open source monitoring tool that collects
    metrics values by scraping the target systems. Basically, a monitoring system
    relies on collecting data using active checks or the pull method, as we discussed
    earlier. Prometheus-based monitoring has the following components:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: Prometheus 是一款流行的新一代开源监控工具，通过拉取目标系统收集度量值。基本上，监控系统依赖于使用主动检查或拉取方法收集数据，正如我们前面所讨论的。基于
    Prometheus 的监控具有以下组件：
- en: The **Prometheus server** scrapes and stores time-series monitoring data.
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Prometheus 服务器** 拉取并存储时间序列监控数据。'
- en: '**Alertmanager** handles alerts and integrates with other communication platforms,
    especially escalation tools such as PagerDuty and OpsGenie.'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Alertmanager** 处理警报并与其他通信平台集成，特别是像 PagerDuty 和 OpsGenie 这样的升级工具。'
- en: '**Node exporter** is an agent that queries the operating system for a variety
    of metrics and exposes them over HTTP for other services to consume.'
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Node exporter** 是一个代理程序，它查询操作系统的各种度量，并通过 HTTP 暴露它们供其他服务使用。'
- en: '**Grafana** is not part of the Prometheus suite of tools specifically, but
    it is the most popular data visualization tool used along with Prometheus.'
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Grafana** 并非 Prometheus 工具集的一部分，但它是与 Prometheus 一起使用的最流行的数据可视化工具。'
- en: The ELK Stack
  id: totrans-227
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ELK Stack
- en: 'The ELK Stack is one of the most popular log aggregation and indexing systems
    currently in use. ELK stands for Elasticsearch, Logstash, and Kibana. Each component
    performs the following task in the stack:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: ELK Stack 是目前最流行的日志聚合和索引系统之一。ELK 代表 Elasticsearch、Logstash 和 Kibana。每个组件在栈中的功能如下：
- en: '**Elasticsearch**: It is the search and analytics engine.'
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Elasticsearch**：这是搜索和分析引擎。'
- en: '**Logstash**: Logstash aggregates and indexes the logs for Elasticsearch.'
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Logstash**：Logstash 聚合并索引日志以供 Elasticsearch 使用。'
- en: '**Kibana**: It is the UI visualization tool that users use to interact with
    the stack.'
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Kibana**：这是用户与栈进行交互的 UI 可视化工具。'
- en: The ELK Stack components are open source software and free versions are available.
    SaaS versions of the stack are also available from multiple vendors as a licensed
    software service.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: ELK Stack 组件是开源软件，并提供免费版本。栈的 SaaS 版本也可以通过多个供应商作为许可软件服务提供。
- en: Splunk
  id: totrans-233
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Splunk
- en: Splunk is pioneering licensed software with a large install base in the log
    aggregation category of monitoring applications.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: Splunk 是在日志聚合类别中开创性的许可软件，具有较大的安装基础。
- en: Zenoss
  id: totrans-235
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Zenoss
- en: Zenoss is a first-generation monitoring application like Nagios and Zabbix.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: Zenoss 是类似 Nagios 和 Zabbix 的第一代监控应用。
- en: Cacti
  id: totrans-237
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Cacti
- en: Cacti is a first-generation monitoring tool primarily known for network monitoring.
    Its features include automatic network discovery and network map drawing.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: Cacti是一个第一代监控工具，主要以网络监控而闻名。它的特点包括自动网络发现和网络地图绘制。
- en: Sensu
  id: totrans-239
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Sensu
- en: Sensu is a modern monitoring platform that recognizes the dynamic nature of
    infrastructure at various levels. Using Sensu, the monitoring requirements can
    be implemented as code. The latter feature makes it stand out in a market with
    a large number of competing monitoring products.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: Sensu是一个现代监控平台，认识到基础设施在不同层面的动态特性。使用Sensu，监控需求可以作为代码来实现。这个特点使得它在竞争激烈的监控产品市场中脱颖而出。
- en: Sysdig
  id: totrans-241
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Sysdig
- en: The Sysdig platform offers standard monitoring features available with a modern
    monitoring system. Its focus on microservices and security makes it an important
    product to consider.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: Sysdig平台提供了现代监控系统的标准监控功能。它专注于微服务和安全性，使其成为一个重要的产品值得考虑。
- en: AppDynamics
  id: totrans-243
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: AppDynamics
- en: AppDynamics is primarily known as an **Application Performance Monitoring**
    (**APM**) platform. However, its current version covers standard monitoring features
    as well. However, tools like this are usually an add-on to a more general-purpose
    monitoring platform.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: AppDynamics主要作为**应用性能监控**（**APM**）平台而闻名。然而，它的当前版本也涵盖了标准的监控功能。然而，这类工具通常是作为更通用的监控平台的附加功能。
- en: SaaS solutions
  id: totrans-245
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: SaaS解决方案
- en: Most new-generation monitoring tools such as Datadog are primarily offered as
    monitoring services in the cloud. What this means is that the backend of the monitoring
    solution is hosted on the cloud, and yet, its agent service must run on-premises
    to collect metrics data and ship that to the backend. Some tools are available
    both on-premises and as a cloud service.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数新一代监控工具，如Datadog，主要作为云中的监控服务提供。这意味着监控解决方案的后端托管在云端，但其代理服务必须在本地运行，以收集指标数据并将其发送到后端。有些工具既可以在本地使用，也可以作为云服务提供。
- en: Sumo Logic
  id: totrans-247
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Sumo Logic
- en: '**Sumo Logic** is a SaaS service offering for log aggregation and searching
    primarily. However, its impressive security-related features could also be used
    as a **Security Information and Event Management** (**SIEM**) platform.'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: '**Sumo Logic**是一个主要用于日志聚合和搜索的SaaS服务。然而，其令人印象深刻的安全相关功能也可以用作**安全信息与事件管理**（**SIEM**）平台。'
- en: New Relic
  id: totrans-249
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: New Relic
- en: Though primarily known as an APM platform initially, like AppDynamics, it also
    supports standard monitoring features.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管最初主要作为一个APM平台，像AppDynamics一样，它也支持标准的监控功能。
- en: Dynatrace
  id: totrans-251
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Dynatrace
- en: Dynatrace is also a major player in the APM space, like AppDynamics and New
    Relic. Besides having the standard APM features, it also positions itself as an
    AI-driven tool that correlates monitoring events and flags abnormal activities.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: Dynatrace与AppDynamics和New Relic一样，也是APM领域的主要参与者。除了具有标准的APM功能外，它还将自己定位为一个由AI驱动的工具，能够关联监控事件并标记异常活动。
- en: Catchpoint
  id: totrans-253
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Catchpoint
- en: Catchpoint is an end user experience monitoring or last-mile monitoring solution.
    By design, such a service needs to be third-party provided as the related metrics
    have to be measured close to where the end users are.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: Catchpoint是一个最终用户体验监控或最后一公里监控解决方案。按设计，这样的服务需要由第三方提供，因为相关的指标必须接近最终用户所在的位置进行测量。
- en: There are several product offerings in this type of monitoring. Apica and Pingdom
    are other well-known vendors in this space.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 这种类型的监控产品有多个供应商。Apica和Pingdom是该领域的其他知名厂商。
- en: Cloud-native tools
  id: totrans-256
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 云原生工具
- en: Popular public cloud platforms such as AWS, Azure, and GCP offer a plethora
    of services and monitoring is just one of them. Actually, there are multiple services
    that could be used for monitoring purposes. For example, AWS offers CloudWatch,
    which is primarily an infrastructure and platform monitoring service, and there
    are services such as GuardDuty that provide sophisticated security monitoring
    options.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 像AWS、Azure和GCP这样的流行公有云平台提供了大量的服务，监控只是其中之一。实际上，有多个服务可以用于监控目的。例如，AWS提供CloudWatch，主要是一个基础设施和平台监控服务，还有像GuardDuty这样的服务提供先进的安全监控选项。
- en: Cloud-native monitoring services are yet to be widely used as general-purpose
    monitoring solutions outside of the related cloud platform even though Google
    operations and Azure Monitor are full-featured monitoring platforms.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管Google Operations和Azure Monitor是功能齐全的监控平台，但云原生监控服务在相关云平台以外的通用监控解决方案中尚未得到广泛应用。
- en: However, when it comes to monitoring a cloud-specific compute, storage, or networking
    service, a cloud-native monitoring tool might be better suited. In such scenarios,
    the integration provided by the main monitoring platform can be used to consolidate
    monitoring in one place.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，当涉及到监控特定于云的计算、存储或网络服务时，云原生的监控工具可能更为合适。在这种情况下，可以使用主监控平台提供的集成功能，将监控集中到一个地方。
- en: AWS CloudWatch
  id: totrans-260
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: AWS CloudWatch
- en: AWS CloudWatch provides infrastructure-level monitoring for the cloud services
    offered on AWS. It could be used as an independent platform to augment the main
    monitoring system or be integrated with the main monitoring system.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: AWS CloudWatch 提供 AWS 上云服务的基础设施级别监控。它可以作为独立的平台来增强主监控系统，或与主监控系统集成。
- en: Google operations
  id: totrans-262
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Google 操作
- en: This monitoring service available on GCP (formerly known as Stackdriver) is
    a full-stack, API-based monitoring platform that also provides log aggregation
    and APM features.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 这个在 GCP（前称 Stackdriver）上提供的监控服务是一个全栈的、基于 API 的监控平台，同时还提供日志聚合和 APM 特性。
- en: Azure Monitor
  id: totrans-264
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Azure Monitor
- en: Azure Monitor is also a full-stack monitoring platform like operations on GCP.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: Azure Monitor 也是一个全栈的监控平台，类似于 GCP 上的操作。
- en: Enterprise monitoring solutions
  id: totrans-266
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 企业级监控解决方案
- en: 'Though they don''t strictly fall into the category of monitoring tools used
    for rolling out proactive monitoring, there have been other monitoring solutions
    used in large enterprises to cover varied requirements such as ITIL compliance.
    Let''s look at some of those for the completeness of this overview:'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管它们严格来说不属于用于实施主动监控的监控工具类别，但在大型企业中也使用了其他监控解决方案，以满足如 ITIL 合规性等多样化的需求。为了完整呈现此概述，我们来看看一些相关的解决方案：
- en: '**IBM Tivoli Netcool/OMNIbus**: An SLM system to monitor large, complex networks
    and IT domains. It''s used in large IBM setups.'
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**IBM Tivoli Netcool/OMNIbus**：一个用于监控大型复杂网络和 IT 域的 SLM 系统，广泛应用于大型 IBM 系统中。'
- en: '**Oracle Enterprise Manager Grid Control**: System management software that
    delivers centralized monitoring, administration, and life cycle management functionality
    for the complete Oracle IT infrastructure, including non-Oracle technologies.
    Commonly found in large Oracle hardware and software setups.'
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Oracle Enterprise Manager Grid Control**：一款系统管理软件，提供集中化的监控、管理和生命周期管理功能，适用于整个
    Oracle IT 基础设施，包括非 Oracle 技术。通常出现在大型 Oracle 硬件和软件系统中。'
- en: '**HPE Oneview**: Hewlett Packard''s Enterprise integrated IT solution for system
    management, monitoring, and software-defined infrastructure. Used in big HP, TANDEM,
    and HPE installations.'
  id: totrans-270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**HPE Oneview**：惠普企业集成的 IT 解决方案，用于系统管理、监控和软件定义基础设施。广泛应用于大型 HP、TANDEM 和 HPE
    安装环境中。'
- en: Summary
  id: totrans-271
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, you learned the importance of monitoring a software system
    and how that is important for operating the business. You were also introduced
    to various types of monitoring, real-life use cases of monitoring, popular monitoring
    tools on the market, and, most importantly, the monitoring core concepts and terminology
    that are used across all the monitoring tools.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中，您了解了监控软件系统的重要性及其对业务运营的重要作用。您还了解了各种类型的监控、监控的实际应用案例、市场上流行的监控工具，最重要的是，掌握了所有监控工具中使用的核心监控概念和术语。
- en: While this chapter provided a comprehensive overview of monitoring concepts,
    tools, and the market, the next chapter will introduce you to Datadog specifically
    and provide details on its agent, which has to be installed on your infrastructure
    to start using Datadog.
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 本章提供了关于监控概念、工具和市场的全面概述，下一章将专门介绍 Datadog，并提供有关其代理的详细信息，该代理需要安装在您的基础设施上才能开始使用
    Datadog。
