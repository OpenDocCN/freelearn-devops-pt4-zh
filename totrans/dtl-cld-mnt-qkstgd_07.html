<html><head></head><body><div id="sbo-rt-content"><div id="_idContainer101">
			<h1 id="_idParaDest-118"><em class="italic"><a id="_idTextAnchor214"/>Chapter 6</em>: Monitoring Infrastructure</h1>
			<p>In the previous chapter, we learned about events that occur in a software system that are useful for monitoring purposes and how they are handled in Datadog. The metrics and events, when combined with tags, provide Datadog users with a rich set of data and the means to group and filter that information for multiple monitoring requirements.</p>
			<p>In <a href="B16483_01_Final_VK_ePub.xhtml#_idTextAnchor014"><em class="italic">Chapter 1</em></a>, <em class="italic">Introduction to Monitoring</em>, we looked at different types of monitoring that make up a comprehensive, proactive monitoring process. One of the basic types of monitoring is infrastructure monitoring, which is all about monitoring the compute, storage, and network infrastructure where the application system runs. All major monitoring applications offer infrastructure monitoring features out of the box. And at times, in many organizations, the scope of monitoring is limited to this type of monitoring. Datadog provides excellent support for infrastructure monitoring and we will learn about that in this chapter. We will look at the following topics specifically:</p>
			<ul>
				<li>Inventorying the hosts</li>
				<li>Listing containers</li>
				<li>Viewing system processes</li>
				<li>Monitoring serverless computing resources </li>
			</ul>
			<h1 id="_idParaDest-119"><a id="_idTextAnchor215"/>Technical requirements</h1>
			<p>To try out the examples mentioned in this book, you need to have the following tools installed and resources available:</p>
			<ul>
				<li>A Datadog account and a user with admin-level access.</li>
				<li>A Datadog Agent running at host level or as a microservice depending on the example, pointing to the Datadog account.<a id="_idTextAnchor216"/></li>
			</ul>
			<h1 id="_idParaDest-120"><a id="_idTextAnchor217"/>Inventorying the hosts</h1>
			<p>There are two interfaces available in Datadog that provide a list of hosts: <strong class="bold">Host Map</strong> and <strong class="bold">Infrastructure List</strong>. Each host <a id="_idIndexMarker354"/>listed on these interfaces will have a Datadog <a id="_idIndexMarker355"/>agent running on it. The host could be a bare-metal <a id="_idIndexMarker356"/>machine or a <strong class="bold">virtual machine</strong> (<strong class="bold">VM</strong>) that has been provisioned in a public cloud service such as AWS or Azure.</p>
			<p>Let's look at the <strong class="bold">Host Map</strong> feature first. To access that interface, navigate to <strong class="bold">Infrastructure</strong> | <strong class="bold">Host Map</strong> on Datadog's dashboard. You will see a dashboard similar to the following:</p>
			<div>
				<div id="_idContainer079" class="IMG---Figure">
					<img src="Images/Figure_6.1_B16483.jpg" alt="Figure 6.1 – Sample host map&#13;&#10;" width="1628" height="914"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.1 – Sample host map</p>
			<p>Each hexagonal shape on the dashboard represents a host in the infrastructure monitored by Datadog. The CPU utilization (in percent) of a host is color coded, with less usage represented by green and higher usage represented by orange. The legend at the bottom-right corner <a id="_idIndexMarker357"/>of the dashboard provides details about the color coding being used. The gear button provided with the legend can be used to customize this color coding to your preference.</p>
			<p>The size of the hexagon can be tied to the value of a metric. At this point, the size of a hexagon pertaining to a host will be proportional to the value of the metric reported by that host. To use the <em class="italic">percentage CPU utilized for sizing</em> metric in the hexagons in the host map, select that metric from the <strong class="bold">Fill by and Size by</strong> dropdowns at the top-right end of the dashboard. The resulting host map will look as follows:</p>
			<div>
				<div id="_idContainer080" class="IMG---Figure">
					<img src="Images/Figure_6.2_B16483.jpg" alt="Figure 6.2 – Host Map with size option used&#13;&#10;" width="1154" height="704"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.2 – Host Map with size option used</p>
			<p>As you can see, the hexagons are smaller for those hosts with lower percentage CPU utilization. Any other <a id="_idIndexMarker358"/>metric that is published by the hosts can be used for this purpose.</p>
			<p>The hosts listed on the <strong class="bold">Host Map</strong> dashboard can be filtered and grouped by available tags. Searching for a specific set of hosts using tags is useful in general. For example, while troubleshooting issues, narrowing down the search to a few hosts would be convenient if there are hundreds of hosts in the infrastructure.</p>
			<p>Let's take a look at the options that are available for filtering hosts using tags.</p>
			<p>By choosing one or more tags in the <strong class="bold">Filter by</strong> field, only the related hosts will be listed, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer081" class="IMG---Figure">
					<img src="Images/Figure_6.3_B16483.jpg" alt="Figure 6.3 – Host Map with a filter enabled&#13;&#10;" width="1640" height="790"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.3 – Host Map with a filter enabled</p>
			<p>In this case, the <strong class="source-inline">metadata_platform:linux</strong> tag is used as the filter to view only the Linux hosts.</p>
			<p>By selecting one <a id="_idIndexMarker359"/>or more tags in the <strong class="bold">Group hosts by tags</strong> field, the hosts can be listed in clusters on the <strong class="bold">Host Map</strong> dashboard, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer082" class="IMG---Figure">
					<img src="Images/Figure_6.4_B16483.jpg" alt="Figure 6.4 – Host Map with hosts grouped&#13;&#10;" width="1650" height="754"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.4 – Host Map with hosts grouped</p>
			<p>In this case, the tag that was selected to group the hosts is <strong class="source-inline">metadata_platform</strong>. Here, we can see that <a id="_idIndexMarker360"/>the five Linux hosts are grouped together and that the lone Mac (<strong class="bold">darwin</strong>) host is shown separately from the Linux group.  </p>
			<p class="callout-heading">Important note</p>
			<p class="callout">The <strong class="bold">Group hosts by tags</strong> option only uses the key of a tag, but the <strong class="bold">Filter by</strong> option requires its value also. </p>
			<p>You have already seen that there are multiple ways to list and locate a host on the <strong class="bold">Host Map</strong> dashboard. If you would like to look at a specific host, you can click on it, which will provide you with a zoomed-in version of it in another window containing host-specific details:</p>
			<div>
				<div id="_idContainer083" class="IMG---Figure">
					<img src="Images/Figure_6.5_B16483.jpg" alt="Figure 6.5 – Host Map with host details zoomed in&#13;&#10;" width="1631" height="639"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.5 – Host Map with host details zoomed in</p>
			<p>This interface provides host-level information and links to related resources so that you can gather all <a id="_idIndexMarker361"/>the details of the host, both when static and at runtime.</p>
			<p>The details of the following resources can be looked up from the host dashboard:</p>
			<ul>
				<li><strong class="bold">Apps</strong>: The links <a id="_idIndexMarker362"/>to details about the integrations that have been implemented for this host are listed in the hexagonal shape.</li>
				<li><strong class="bold">Agent</strong>: The <a id="_idIndexMarker363"/>version of the agent.</li>
				<li><strong class="bold">System</strong>: The <a id="_idIndexMarker364"/>operating system-level details are provided here, which can be drilled down into multiple levels.</li>
				<li><strong class="bold">Container</strong>: If containers <a id="_idIndexMarker365"/>are running on the host, the related information will be available here.</li>
				<li><strong class="bold">Metrics</strong>: Host-level <a id="_idIndexMarker366"/>metrics that were published recently are listed here.</li>
				<li><strong class="bold">Tags</strong>: The host-level tags <a id="_idIndexMarker367"/>are listed here. While the <strong class="source-inline">host</strong> tag pointing to the name of the host is available by default, more <strong class="source-inline">host</strong>-level tags can be set using the <strong class="source-inline">tags</strong> option in the Datadog agent configuration file.</li>
			</ul>
			<p>At the top of this interface, the host name and host aliases are provided. Also, links to the following dashboards with some relation to the host are available at the same location:</p>
			<ul>
				<li><strong class="bold">Dashboard</strong>: This is <a id="_idIndexMarker368"/>a dashboard that's specific to the host with charts on important host-level metrics. We will look at this dashboard soon.</li>
				<li><strong class="bold">Networks</strong>: The <a id="_idIndexMarker369"/>dashboard for <strong class="bold">Network Performance Monitoring</strong>. This feature needs to be enabled in the Datadog <a id="_idIndexMarker370"/>agent for this to be available.</li>
				<li><strong class="bold">Processes</strong>: If the <a id="_idIndexMarker371"/>Live Processes feature is enabled from the Datadog agent, this dashboard will be populated with details about the processes running on the host. We will look at it in detail in the <em class="italic">System processes</em> section.</li>
				<li><strong class="bold">Containers</strong>: This link <a id="_idIndexMarker372"/>will lead you to the dashboard where containers running on the host are listed.</li>
			</ul>
			<p>Now, let's look at <a id="_idIndexMarker373"/>some of these detailed dashboards that we can access from the <strong class="bold">Host Map</strong> zoom-in window.</p>
			<p>By navigating to <strong class="bold">Apps</strong> | <strong class="bold">Agent</strong>, you can pull up a dashboard with Datadog agent-specific metrics listed, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer084" class="IMG---Figure">
					<img src="Images/Figure_6.6_B16483.jpg" alt="Figure 6.6– Datadog agent-specific metrics&#13;&#10;" width="1620" height="618"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.6– Datadog agent-specific metrics</p>
			<p>The <strong class="bold">datadog_agent.</strong> category of metrics is not directly useful for monitoring the application system, but it can provide insights into how well the Datadog agent runs on that specific host.</p>
			<p>By navigating to <strong class="bold">Apps</strong> | <strong class="bold">system</strong>, you will see a dashboard containing charts about the core infrastructure metrics for the host, such as CPU usage, load averages, disk usage and latency, memory availability and usage, and network traffic. The following screenshot provides such a sample dashboard:</p>
			<div>
				<div id="_idContainer085" class="IMG---Figure">
					<img src="Images/Figure_6.7_B16483.jpg" alt="Figure 6.7 – Host dashboard with system metrics&#13;&#10;" width="623" height="186"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.7 – Host dashboard with system metrics</p>
			<p>We have already <a id="_idIndexMarker374"/>seen that the block-links listed under the <strong class="bold">Apps</strong> section in <em class="italic">Figure 6.5</em> are related to integrations running on that host. Besides the common links such as <strong class="bold">agent</strong> and <strong class="bold">system</strong> that we have just looked at, the rest of the links will depend on what integrations are enabled on the host. For example, in <em class="italic">Figure 6.5</em>, there was <strong class="bold">docker</strong> and <strong class="bold">redisdb</strong>, which were enabled explicitly. By clicking on <strong class="bold">docker</strong>, a dashboard with charts for Docker-specific metrics can be pulled up, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer086" class="IMG---Figure">
					<img src="Images/Figure_6.8_B16483.jpg" alt="Figure 6.8 – Dashboard for Docker metrics&#13;&#10;" width="1639" height="620"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.8 – Dashboard for Docker metrics</p>
			<p>By navigating to <strong class="bold">Apps</strong> | <strong class="bold">system</strong>, we can see how a dashboard with system-level metrics for the host can be viewed, as illustrated in <em class="italic">Figure 6.7</em>. </p>
			<p>The system metrics can be looked up in a much better fashion by clicking the <strong class="bold">View host in:</strong> | <strong class="bold">Dashboard</strong> link from the host zoom-in window. This dashboard provides charts for each category of system metrics that are useful in inspecting the metrics for a time range. Let's look at which of these systems metrics make up the core of infrastructure monitoring.</p>
			<p>For each category <a id="_idIndexMarker375"/>of system metrics, a widget is available on the host dashboard with related metrics charted. Using the menu options available in the top-right corner, it's possible to drill down further into these widgets.</p>
			<p>By clicking on the left button, the widget can be viewed in full-screen mode with more options. The middle button pulls up a menu with options that are related to managing the chart. The right button provides details on the metrics that are being used on the chart. A screenshot of these menus, with the middle button highlighted, is as follows:</p>
			<div>
				<div id="_idContainer087" class="IMG---Figure">
					<img src="Images/Figure_6.9_B16483.jpg" alt="Figure 6.9 – Widget common menu options&#13;&#10;" width="198" height="240"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.9 – Widget common menu options</p>
			<p>Now, let's take <a id="_idIndexMarker376"/>a look at the main widgets available on the host dashboard. </p>
			<h2 id="_idParaDest-121"><a id="_idTextAnchor218"/>CPU usage</h2>
			<p>By hovering <a id="_idIndexMarker377"/>over the <strong class="bold">CPU usage</strong> chart, the related metrics can be displayed on the dashboard, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer088" class="IMG---Figure">
					<img src="Images/Figure_6.10_B16483.jpg" alt="Figure 6.10 – CPU usage metrics&#13;&#10;" width="1650" height="615"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.10 – CPU usage metrics</p>
			<p>These are the <a id="_idIndexMarker378"/>main CPU usage-related metrics and their meanings:</p>
			<ul>
				<li><strong class="source-inline">system.cpu.idle</strong>: The percentage of time the CPU spent in an idle state.</li>
				<li><strong class="source-inline">system.cpu.system</strong>: The percentage of time the CPU spent running the kernel.</li>
				<li><strong class="source-inline">system.cpu.iowait</strong>: The percentage of time the CPU spent waiting for the I/O operations to finish.</li>
				<li><strong class="source-inline">system.cpu.user</strong>: The percentage of time the CPU spent running the processes in the user space.</li>
			</ul>
			<p>By tracking these metrics, you will get an overall picture of the CPU usage on the host and by building monitors around those, the tracking of these metrics could be made automated.</p>
			<h2 id="_idParaDest-122"><a id="_idTextAnchor219"/>Load averages</h2>
			<p>The load on a <a id="_idIndexMarker379"/>host that runs some UNIX-based operating system such as Linux or macOS is measured in terms of the number of concurrent processes running on it. Usually, the load is tracked as the average of that measurement over the last 1 minute, 5 minutes, and 15 minutes. That's why a UNIX command such as <strong class="source-inline">uptime</strong> returns three measurements for load averages, as shown in the following example:</p>
			<p class="source-code">$ uptime</p>
			<p class="source-code">12:18  up 2 days,  3:29, 4 users, load averages: 1.45 1.71 1.76</p>
			<p>The load averages data for the host are plotted on the <strong class="bold">Load Averages</strong> chart on the <strong class="bold">host</strong> dashboard, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer089" class="IMG---Figure">
					<img src="Images/Figure_6.11_B16483.jpg" alt="Figure 6.11 – Load Averages chart on the host dashboard&#13;&#10;" width="624" height="325"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.11 – Load Averages chart on the host dashboard</p>
			<p>By hovering <a id="_idIndexMarker380"/>over the chart, the averages for 1-minute, 5-minute and 15-minute loads can be displayed, as shown in the preceding screenshot. The important metrics in this category are the following, all of which have self-documented names:</p>
			<ul>
				<li><strong class="source-inline">System.load.1</strong>: Average load in the last 1 minute</li>
				<li><strong class="source-inline">System.load.5</strong>: Average load in the last 5 minutes</li>
				<li><strong class="source-inline">System.load.15</strong>: Average load in the last 15 minutes</li>
			</ul>
			<p>In this section, we looked at system load-related metrics. Now, let's look swap memory metrics.</p>
			<h2 id="_idParaDest-123"><a id="_idTextAnchor220"/>Available swap</h2>
			<p>Swap space on a Linux host allows the inactive pages in memory to be moved to disk to make room <a id="_idIndexMarker381"/>in the RAM. The following system metrics are plotted on this chart on the host dashboard:</p>
			<ul>
				<li><strong class="source-inline">system.swap.free</strong>: The size of the free swap space in bytes</li>
				<li><strong class="source-inline">system.swap.used</strong>: The size of the swap space used in bytes</li>
			</ul>
			<p>The swap memory metrics can be viewed on the dashboard, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer090" class="IMG---Figure">
					<img src="Images/Figure_6.12_B16483.jpg" alt="Figure 6.12 – Available swap&#13;&#10;" width="624" height="295"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.12 – Available swap</p>
			<p>There are more swap-related metrics that are published by Datadog besides those being used on this chart, and they could be used on custom charts and monitors as well.</p>
			<h2 id="_idParaDest-124"><a id="_idTextAnchor221"/>Disk latency</h2>
			<p>The disk latency of a storage device is determined by the delay in getting an I/O request processed, and that <a id="_idIndexMarker382"/>also includes the waiting time in the queue. This is tracked by the <strong class="source-inline">system.io.await</strong> metric:</p>
			<div>
				<div id="_idContainer091" class="IMG---Figure">
					<img src="Images/Figure_6.13_B16483.jpg" alt="Figure 6.13 – Disk latency widget in full-screen mode&#13;&#10;" width="1086" height="662"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.13 – Disk latency widget in full-screen mode</p>
			<p>This metric value is reported for each storage device on the host. In the preceding screenshot, a sample view of this widget has been provided in full-screen mode.</p>
			<h2 id="_idParaDest-125"><a id="_idTextAnchor222"/>Memory breakdown</h2>
			<p>Though Datadog publishes a large set of metrics related to the available memory and its usage on <a id="_idIndexMarker383"/>the host, this widget charts only two metrics: <strong class="source-inline">system.memory.usable</strong> and a diff of <strong class="source-inline">system.memory.total</strong> and <strong class="source-inline">system.memory.usable</strong>, which provides an estimate of the reserved memory:</p>
			<div>
				<div id="_idContainer092" class="IMG---Figure">
					<img src="Images/Figure_6.14_B16483.jpg" alt="Figure 6.14 – Memory breakdown widget in full-screen view&#13;&#10;" width="1090" height="620"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.14 – Memory breakdown widget in full-screen view</p>
			<p>These are static metrics and don't provide any information on the dynamic usage of memory <a id="_idIndexMarker384"/>on the host. Now, let's look at some of the important metrics from this category:</p>
			<ul>
				<li><strong class="source-inline">system.mem.cached</strong>: The amount of RAM used for the cache in bytes</li>
				<li><strong class="source-inline">system.mem.free</strong>: The amount of RAM free in bytes</li>
				<li><strong class="source-inline">system.mem.paged</strong>: The amount of physical memory used for paging in bytes</li>
				<li><strong class="source-inline">system.mem.used</strong>: The amount of RAM being used in bytes</li>
			</ul>
			<p>In this section, we have looked at important memory-related metrics. In the next section, we'll look at how disk storage usage can be monitored using the related metrics.</p>
			<h2 id="_idParaDest-126"><a id="_idTextAnchor223"/>Disk usage</h2>
			<p>Tracking the <a id="_idIndexMarker385"/>use of storage on disks attached to a host is one of the most common aspects of infrastructure monitoring. This widget charts the disk usage for every device by using the <strong class="source-inline">system.disk.in_use</strong> metric, which is the amount of disk space that's being used as a fraction of the total available on the device:</p>
			<div>
				<div id="_idContainer093" class="IMG---Figure">
					<img src="Images/Figure_6.15_B16483.jpg" alt="Figure 6.15 – Disk usage widget&#13;&#10;" width="1636" height="712"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.15 – Disk usage widget</p>
			<p>There are several <a id="_idIndexMarker386"/>disk-related metrics that are published by Datadog. The important ones are as follows:</p>
			<ul>
				<li><strong class="source-inline">system.disk.free</strong>: The amount of disk space that's free on the device in bytes</li>
				<li><strong class="source-inline">system.disk.total</strong>: The total amount of disk space on the device in bytes</li>
				<li><strong class="source-inline">system.disk.used</strong>: The amount of disk space being used on the device in bytes</li>
				<li><strong class="source-inline">system.fs.inodes.free</strong>: The number of <strong class="source-inline">inodes</strong> free on the device</li>
				<li><strong class="source-inline">system.fs.inodes.total</strong>: The total number of <strong class="source-inline">inodes</strong> on the device</li>
				<li><strong class="source-inline">system.fs.inodes.used</strong>: The number of <strong class="source-inline">inodes</strong> being used on the device</li>
				<li><strong class="source-inline">system.fs.inodes.in_use</strong>: The number of <strong class="source-inline">inodes</strong> being used as a fraction of the total available on the device</li>
			</ul>
			<p>In this section, we looked at various metrics that help us monitor storage disk usage. In the next section, we'll review the metrics available for monitoring network traffic.</p>
			<h2 id="_idParaDest-127"><a id="_idTextAnchor224"/>Network traffic</h2>
			<p>The inbound <a id="_idIndexMarker387"/>and outbound network traffic on the host is tracked by the <strong class="source-inline">system.net.bytes_rcvd</strong> and <strong class="source-inline">system.net.bytes_sent</strong> metrics, respectively. The following screenshot shows the network traffic widget that's available on the <strong class="bold">host</strong> dashboard:</p>
			<div>
				<div id="_idContainer094" class="IMG---Figure">
					<img src="Images/Figure_6.16_B16483.jpg" alt="Figure 6.16 – Network traffic widget in full-screen mode&#13;&#10;" width="1638" height="709"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.16 – Network traffic widget in full-screen mode</p>
			<p>As with other <a id="_idIndexMarker388"/>categories of system metrics, there are several network-related metrics that are published by Datadog, and they are available for <a id="_idIndexMarker389"/>use with charts and monitors. The full list of network metrics can be referenced at <a href="https://docs.datadoghq.com/integrations/network/">https://docs.datadoghq.com/integrations/network/</a>.</p>
			<p>Thus far, we have been looking at the many options that you can use to drill down into the status of various components of a host, starting with the <strong class="bold">Host Map</strong> interface. The list of hosts can be viewed using the Infrastructure List interface, which can be accessed by navigating to <strong class="bold">Infrastructure</strong> | <strong class="bold">Infrastructure List</strong> on the Datadog dashboard.</p>
			<p>The following screenshot provides a sample of the <strong class="bold">Infrastructure List</strong> interface:</p>
			<div>
				<div id="_idContainer095" class="IMG---Figure">
					<img src="Images/Figure_6.17_B16483.jpg" alt="Figure 6.17 – Sample Infrastructure List interface&#13;&#10;" width="1655" height="895"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.17 – Sample Infrastructure List interface</p>
			<p>Compared to Host Map, the Infrastructure List is a much simpler interface and lists the hosts in a tabular form. Clicking on a specific host will take you to the host dashboard, which we discussed extensively earlier in this section.</p>
			<p>While hosts, both bare-metal and VMs, used to be the building blocks of infrastructure that hosted <a id="_idIndexMarker390"/>application systems, continuing to deploy applications as microservices means that containers are important building blocks of the infrastructure as well.</p>
			<p>In the next section, we will see how Datadog can help you monitor containers running i<a id="_idTextAnchor225"/>n your environment.</p>
			<h1 id="_idParaDest-128"><a id="_idTextAnchor226"/>Listing containers</h1>
			<p>A microservice is deployed using one or more containers running on different hosts. If a Datadog agent <a id="_idIndexMarker391"/>runs on those hosts and it's been configured to detect those containers, Datadog will list them on the <strong class="bold">Containers</strong> dashboard. The Datadog agent configuration changes that are needed for discovering containers running on a host were discussed in <a href="B16483_02_Final_VK_ePub.xhtml#_idTextAnchor115"><em class="italic">Chapter 2</em></a>, <em class="italic">Deploying a Datadog Agent</em>.</p>
			<p>To get to the <strong class="bold">Containers</strong> dashboard, you can navigate to <strong class="bold">Infrastructure</strong> | <strong class="bold">Containers</strong>. From there, you will be able to see the dashboard shown in the following screenshot:</p>
			<div>
				<div id="_idContainer096" class="IMG---Figure">
					<img src="Images/Figure_6.18_B16483.jpg" alt="Figure 6.18 – Containers dashboard&#13;&#10;" width="1632" height="804"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.18 – Containers dashboard</p>
			<p>All the containers <a id="_idIndexMarker392"/>the Datadog agent discovers on the hosts are listed on this dashboard. Under the <strong class="bold">Host</strong> section on the left pane, the container hosts are listed. By selecting a specific host from that list, only the containers running on that host can be displayed on the dashboard:</p>
			<div>
				<div id="_idContainer097" class="IMG---Figure">
					<img src="Images/Figure_6.19_B16483.jpg" alt="Figure 6.19 – Details of a NGINX container&#13;&#10;" width="1650" height="760"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.19 – Details of a NGINX container</p>
			<p>Clicking on a container listing will take you to a detailed interface where the runtime details of the <a id="_idIndexMarker393"/>container such as the host name, the Docker image used to create the container, and the Datadog tags on the container are provided. The preceding screenshot shows the details of a sample container.</p>
			<p>Looking at the processes that are running on a host is one of the basic system administrative tasks related to deploying an application, getting that application to work correctly, or checking on the health of the host in general. Datadog makes this easier to do. We'll look at this feature <a id="_idTextAnchor227"/>in the next section.</p>
			<h1 id="_idParaDest-129"><a id="_idTextAnchor228"/>Viewing system processes</h1>
			<p>The traditional method of viewing processes running on a host is logging into that machine and listing the processes using commands such as <strong class="source-inline">ps</strong> on a UNIX-like operating system. In an environment <a id="_idIndexMarker394"/>where more elastic and immutable infrastructure is preferred, such manual steps are either not preferred or discouraged. In such situations, the option of viewing the processes running on the hosts is very useful. Also, having the processes listed in one place makes comparing the runtime environments of two or more hosts easier.</p>
			<p>To get to the <strong class="bold">Processes</strong> dashboard, navigate to <strong class="bold">Infrastructure</strong> | <strong class="bold">Processes</strong> on the Datadog dashboard. You will see an interface similar to the one shown in the following screenshot:</p>
			<div>
				<div id="_idContainer098" class="IMG---Figure">
					<img src="Images/Figure_6.20_B16483.jpg" alt="Figure 6.20 – List of processes&#13;&#10;" width="1627" height="728"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.20 – List of processes</p>
			<p>This dashboard is similar to what we saw regarding the <strong class="bold">Containers</strong> dashboard in the previous section. On the left pane, there are search and filter options that you can use to locate the processes that you need to drill into. By clicking on a process listing, you can look at its details, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer099" class="IMG---Figure">
					<img src="Images/Figure_6.21_B16483.jpg" alt="Figure 6.21 – Process details&#13;&#10;" width="613" height="342"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.21 – Process details</p>
			<p>Information about a <a id="_idIndexMarker395"/>process such as its name, <strong class="bold">process ID</strong> (<strong class="bold">PID</strong>), and the user who started the <a id="_idIndexMarker396"/>process are available on the details page. The process details provided in this example can be queried directly on the host like so:</p>
			<p class="source-code">$ ps -ef |grep redis</p>
			<p class="source-code">999      14296 14273  0 03:28 ?        00:00:11 redis-server *:6379</p>
			<p>The processes running on a host are not reported by the Datadog agent by default, so you need to enable that feature. To do that, add the following option to the <strong class="source-inline">datadog-agent.yml</strong> Datadog agent configuration file and restart the agent service:</p>
			<p class="source-code">process_config:</p>
			<p class="source-code">    enabled: 'true'</p>
			<p>Usually, this configuration option is available but commented out in the agent configuration file, so you just need to uncomment these lines before restarting the agent.</p>
			<p>Thus far, we've mentioned <a id="_idIndexMarker397"/>real and virtual machines and containers as the building blocks of infrastructure. In the next section, we will see how Datadog can help with monitoring a serverless <a id="_idTextAnchor229"/>computing environment.</p>
			<h1 id="_idParaDest-130"><a id="_idTextAnchor230"/>Monitoring serverless computing resources</h1>
			<p>The current trend is to avoid infrastructure of any kind altogether and move to a serverless computing <a id="_idIndexMarker398"/>environment, in which case the public cloud vendors provide the platform to create, run, and monitor the applications. Let's not get confused with any hosting services in the cloud. There is no concept of a host (and hence the name serverless); instead, the applications are run in computing sandboxes provided by the cloud provider.</p>
			<p>One of the most <a id="_idIndexMarker399"/>popular serverless computing services is AWS Lambda. A Lambda function runs application code and, practically, you can consider it the equivalent <a id="_idIndexMarker400"/>of a microservice. By installing AWS integration and some additional configurations specific to Lambda, the Lambda functions can be monitored from Datadog. </p>
			<p>The following steps outline the process of setting up Datadog to monitor Lambda functions:</p>
			<ol>
				<li>Install the AWS integration in Datadog.</li>
				<li>Install the Datadog Forwarder Lambda function on your AWS account.</li>
				<li>Instrument the Lambda functions if any application monitoring-related information needs to be published to Datadog.</li>
			</ol>
			<p>The detailed <a id="_idIndexMarker401"/>steps to do this configuration are available at <a href="https://docs.datadoghq.com/serverless/">https://docs.datadoghq.com/serverless/</a>.</p>
			<p>Navigate to <strong class="bold">Infrastructure</strong> | <strong class="bold">Serverless</strong> to get to the Serverless dashboard, which is where all the <strong class="bold">Lambda</strong> functions are monitored, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer100" class="IMG---Figure">
					<img src="Images/Figure_6.22_B16483.jpg" alt="Figure 6.22 – AWS Lambda functions for serverless computing&#13;&#10;" width="1650" height="748"/>
				</div>
			</div>
			<p class="figure-caption">Figure 6.22 – AWS Lambda functions for serverless computing</p>
			<p>Note that <a id="_idIndexMarker402"/>no traditional agent is needed in this <a id="_idIndexMarker403"/>situation, but the Lambda function known as <strong class="bold">Datadog Forwarder</strong> does that job for Lambda-based serverless computing.</p>
			<h1 id="_idParaDest-131"><a id="_idTextAnchor231"/>Best practices</h1>
			<p>These are the best practices that should be followed for monitoring infrastructure:</p>
			<ul>
				<li>Datadog provides lots of metrics that cover various aspects of compute, storage, and network monitoring out of the box. Make sure that you only focus on the important metrics from each category.</li>
				<li>Containers are becoming core constructs of the infrastructure that hosts modern applications. If microservices are used, it is important to monitor the containers and obtain insights that could be used to fine-tune the performance and availability of applications.</li>
				<li>Aggregating the processes would make it easy to compare runtime environments, and that feature must be enabled.</li>
				<li>Though there is no infrastructure to manage in serverless computing, Datadog provides options for monitoring the application functions that should be enabled for tr<a id="_idTextAnchor232"/>acking the related metrics.</li>
			</ul>
			<h1 id="_idParaDest-132"><a id="_idTextAnchor233"/>Summary</h1>
			<p>In a traditional computing scenario where hosts are involved, infrastructure monitoring is the core of monitoring. Hosts include both bare-metal and virtual machines. With the increased use of microservices to deploy applications, the container has become an important element in building infrastructure. Datadog provides features that support both host- and container-level monitoring. The Datadog feature of aggregating processes from the hosts makes comparing runtime environments at the host level easy. Though no infrastructure is involved, Datadog can be used to monitor serverless computing resources such as AWS Lambda functions. In this chapter, you learned how various components of the infrastructure that run a software application system are monitored using Datadog. These infrastructure components could be in traditional data centers or public clouds, and they could be virtual machines or containers. </p>
			<p>Though useful metrics can be published to Datadog or generated by it, if you do not use monitors and alerts, they are not very useful. In the next chapter, we will learn how monitors and alerts are set up in Datadog.</p>
		</div>
	</div></body></html>