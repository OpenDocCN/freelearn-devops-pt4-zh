- en: '*Chapter 14*: Miscellaneous Monitoring Topics'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The core monitoring features, as they are implemented in Datadog, have been
    discussed up to this point in the book. In this chapter, you will learn about
    some of the monitoring features that have become available on the Datadog monitoring
    platform relatively recently. These features, especially **Application Performance
    Monitoring** (**APM**), security monitoring, and synthetic monitoring, are usually
    addressed by dedicated applications. **AppDynamics** in APM, various **Security
    Information and Event Management** (**SIEM**) applications in security monitoring,
    and **Catchpoint** in synthetic monitoring are examples of dedicated monitoring
    applications in the respective areas. With these features available on the Datadog
    platform, it is becoming a one-stop destination for all the monitoring requirements.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter, you will learn about the following topics, specifically the
    following:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: Application Performance Monitoring (APM)
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Implementing observability
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Synthetic monitoring
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Security monitoring
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Technical requirements
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To try out the examples mentioned in this book, you need to have the following
    tools installed and resources available:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
- en: An Ubuntu 18.04 Linux environment with Bash shell. Other Linux distributions
    can be used, but make suitable changes to any Ubuntu-specific commands.
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A Datadog account and user with admin-level access.
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A Datadog Agent running, at host level or as microservice depending on the example,
    pointing to the Datadog account.
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: curl and wget.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Application Performance Monitoring (APM)
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: As the name indicates, an APM tool monitors the performance of an application
    using multiple methods. APM is a broad area by itself and, as mentioned earlier,
    dedicated products address it. APM could also stand for **Application Performance
    Management**, and adds some confusion to the discussions on APM. The consensus
    is that, in order to qualify as an application performance management solution,
    a monitoring tool should have features to handle the performance issues that would
    be unearthed by the monitoring features of the tool. Datadog only goes by the
    acronym APM, and we will review the features under that umbrella without worrying
    too much about the expansion of APM.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
- en: 'The following are the features of a standard APM solution in general:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
- en: Measuring end user experience
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Mapping application workflows initiated by users to the underlying infrastructure
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Measuring the performance of application workflows
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Tracing code to a user's interaction with the application
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Providing analytics and reporting options to tie all the preceding features
    and present insights on dashboards.
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: As you can see, these are broad areas and every APM solution has its own way
    of implementing these features and more. You will also learn that observability
    and synthetic monitoring, two topics that will be discussed in dedicated sections
    later, are also related to APM. In the remainder of this section, we will see
    what APM features are available in Datadog and try to relate those to the broad
    categories mentioned in the preceding list, as much as possible.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，这些是广泛的领域，每个 APM 解决方案都有自己实现这些功能及更多功能的方式。您还将了解到，观察性和合成监控，这两个将在后续专门章节中讨论的主题，也与
    APM 相关。在本节的剩余部分，我们将查看 Datadog 中可用的 APM 功能，并尽可能地将其与前面列表中提到的广泛类别相关联。
- en: Sending traces to Datadog
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 将跟踪数据发送到 Datadog
- en: A primary step in getting started using Datadog APM is configuring the application
    to send application traces to the Datadog backend for analysis. The detailed steps
    for doing this are unique to the programming language used to build the application
    and the application server environment where the application is run. The traces
    generated by an application instrumented for that purpose will be published in
    the Datadog backend and that information is the basis of measuring performance
    and building traceability of various services that make up the application.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Datadog APM 的一个主要步骤是配置应用程序以将应用程序跟踪发送到 Datadog 后端进行分析。执行此操作的详细步骤取决于用于构建应用程序的编程语言以及运行应用程序的应用程序服务器环境。由此生成的跟踪信息将发布到
    Datadog 后端，该信息是衡量性能和构建由应用程序组成的各种服务的可追溯性的基础。
- en: 'To understand the general steps involved in instrumenting an application for
    generating traces in Datadog APM, let''s look at how it''s done for a Java application.
    We can use **Cassandra** as the sample Java application that was introduced in
    [*Chapter 10*](B16483_10_Final_VK_ePub.xhtml#_idTextAnchor302), *Working with
    Monitoring Standards*. The steps for installing Cassandra are already documented
    in that chapter. Here, you will learn how to instrument a Cassandra application
    for tracing:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 为了理解在 Datadog APM 中生成跟踪的应用程序操作步骤，我们来看一下如何为 Java 应用程序进行操作。我们可以使用**Cassandra**作为示例
    Java 应用程序，该应用程序在[*第 10 章*](B16483_10_Final_VK_ePub.xhtml#_idTextAnchor302)中介绍过，*与监控标准合作*。安装
    Cassandra 的步骤已经在该章节中记录。在这里，您将学习如何为 Cassandra 应用程序启用跟踪：
- en: 'Stop the Cassandra service if it has been running:'
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果 Cassandra 服务正在运行，请停止该服务：
- en: '[PRE0]'
  id: totrans-26
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Download the Java library for Datadog tracing using `wget` or `curl`:'
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 `wget` 或 `curl` 下载 Datadog 跟踪的 Java 库：
- en: '[PRE1]'
  id: totrans-28
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Define tracing directives in the environment variable `JAVA_OPTS`:'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在环境变量 `JAVA_OPTS` 中定义跟踪指令：
- en: '[PRE2]'
  id: totrans-30
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Start the Cassandra service:'
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动 Cassandra 服务：
- en: '[PRE3]'
  id: totrans-32
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The sample commands are based on the assumption that the user is in the directory
    where the Cassandra installable is extracted, such as `/home/ubuntu/apache-cassandra-3.11.10`.
    Make suitable changes to the path related to the actual installation.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 示例命令假设用户所在的目录是已解压的 Cassandra 安装包所在目录，例如 `/home/ubuntu/apache-cassandra-3.11.10`。请根据实际安装路径做适当调整。
- en: In the preceding sample steps, it has been outlined how tracing is enabled for
    a Java application that runs at the host level. Similar steps are followed for
    instrumenting services running in the Docker and Kubernetes runtime environments,
    but with differences specific to the related platform. Also, note that the steps
    are unique to the programming language used for building the application. All
    those permutations are documented in the official documentation, starting at [https://docs.datadoghq.com/tracing/](https://docs.datadoghq.com/tracing/).
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的示例步骤中，已经概述了如何为运行在主机级别的 Java 应用程序启用跟踪。为运行在 Docker 和 Kubernetes 运行时环境中的服务进行工具化的步骤也类似，但有些特定于相关平台的差异。同时请注意，这些步骤对于构建应用程序所使用的编程语言是唯一的。所有这些变体在官方文档中都有记录，从[https://docs.datadoghq.com/tracing/](https://docs.datadoghq.com/tracing/)开始。
- en: 'Once tracing is enabled for the applications as outlined above, you can view
    those on the APM dashboard as in the following screenshot by navigating to **APM**
    | **Traces**:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦如上所述为应用程序启用了跟踪，您可以通过导航到 **APM** | **Traces**，在 APM 仪表板上查看这些跟踪，如下图所示：
- en: '![Figure 14.1 – APM Traces dashboard'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 14.1 – APM 跟踪仪表板'
- en: '](img/Figure_14.1_B16483.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_14.1_B16483.jpg)'
- en: Figure 14.1 – APM Traces dashboard
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.1 – APM 跟踪仪表板
- en: These traces published to the Datadog backend provide deep visibility into application-specific
    requests, errors, and latency. The application traces could be correlated with
    infrastructure-level metrics, processes running on the host, and various logs,
    and that would help to pinpoint performance bottlenecks at all levels.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 这些发布到 Datadog 后端的追踪提供了对应用程序特定请求、错误和延迟的深入可视化。应用程序的追踪可以与基础设施层面的指标、主机上运行的进程以及各种日志进行关联，从而帮助定位各层级的性能瓶颈。
- en: Profiling an application
  id: totrans-40
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 分析应用程序
- en: Using the *Continuous Profiler* feature of Datadog APM, the resource usage and
    I/O bottlenecks can be traced to the application code by drilling down to the
    class, method, and line number. Instrumentation is also required for enabling
    this feature, and let's try that with the Cassandra application.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用 Datadog APM 的*连续分析器*功能，可以通过深入到类、方法和行号，追踪资源使用和 I/O 瓶颈到应用程序代码。启用此功能也需要进行代码仪器化，我们可以通过
    Cassandra 应用程序来尝试。
- en: 'The steps to instrument an application for profiling is similar to how it was
    done for tracing. Actually, the latest agent for tracing also supports profiling,
    and both features could be enabled using the following command line:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 为应用程序添加分析工具的步骤与为追踪功能所做的类似。实际上，最新的追踪代理也支持分析，两者都可以通过以下命令行启用：
- en: '[PRE4]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: As you can observe in the command line, the environment variable, `dd.profiling.enabled`,
    is set to `true` for enabling the profiling feature, in addition to tracing.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您在命令行中所看到的，环境变量`dd.profiling.enabled`被设置为`true`，以启用分析功能，除了追踪功能外。
- en: 'The profiling-related reports can be viewed on the **Continuous Profiler**
    dashboard by navigating to **APM** | **Profiles** in the following screenshot:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 通过导航到**APM** | **Profiles**，可以在**连续分析器**仪表板上查看与分析相关的报告，如下图所示：
- en: '![Figure 14.2 – Continuous Profiler dashboard'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 14.2 – 连续分析器仪表板](img/Figure_14.2_B16483.jpg)'
- en: '](img/Figure_14.2_B16483.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_14.2_B16483.jpg)'
- en: Figure 14.2 – Continuous Profiler dashboard
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.2 – 连续分析器仪表板
- en: The profiles listed on this dashboard can be filtered by various tags, including
    the service name that usually identifies the application running at host level.
    In a microservices environment, an application would be made up of multiple services
    and can easily be tracked as a result of suitable tagging services belonging to
    an application.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 此仪表板上列出的分析可以通过各种标签进行过滤，包括通常用于识别主机级别上运行的应用程序的服务名称。在微服务环境中，一个应用程序由多个服务组成，并且可以通过适当的标签化服务轻松跟踪这些属于该应用程序的服务。
- en: 'By clicking on a profile listed on the dashboard, performance metrics and insights
    based on the profiling data can be viewed, as in the following screenshot:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 通过点击仪表板上列出的一个分析，基于分析数据的性能指标和洞察可以查看，如下图所示：
- en: '![Figure 14.3 – Application profiling details'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 14.3 – 应用程序分析详情](img/Figure_14.2_B16483.jpg)'
- en: '](img/Figure_14.3_B16483.jpg)'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_14.4_B16483.jpg)'
- en: Figure 14.3 – Application profiling details
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.3 – 应用程序分析详情
- en: On the preceding dashboard, under the **Performance**, **Analysis**, **Metrics**,
    and **Runtime Info** tabs, a large amount of runtime information regarding the
    application is available for triaging performance issues and fine-tuning application
    performance and security in general.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的仪表板上，**性能**、**分析**、**指标**和**运行时信息**标签下，提供了大量关于应用程序的运行时信息，用于处理性能问题并对应用程序的性能和安全性进行微调。
- en: Service Map
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 服务地图
- en: 'A Service Map will provide a pictorial representation of the services running
    in a runtime environment, such as a host or Kubernetes cluster, with the interaction
    between the services mapped out. The **Service Map** can be accessed by navigating
    to **APM** | **Service Map** and the dashboard will be rendered with the **Services**
    tab open, as in the following screenshot:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 服务地图将提供运行时环境中服务的图示表示，例如主机或 Kubernetes 集群，并绘制出服务之间的交互。**服务地图**可以通过导航到**APM**
    | **Service Map**来访问，仪表板将显示**服务**标签页，如下图所示：
- en: '![Figure 14.4 – Service Map dashboard'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 14.4 – 服务地图仪表板](img/Figure_14.3_B16483.jpg)'
- en: '](img/Figure_14.4_B16483.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_14.4_B16483.jpg)'
- en: Figure 14.4 – Service Map dashboard
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.4 – 服务地图仪表板
- en: The Service Map will be very useful in a microservices environment, such as
    a Kubernetes cluster, for understanding the interaction between various components
    of an application. By enabling tracing and profiling for each microservice, a
    Service Map for the application system can be built that will provide valuable
    insights for fine-tuning the performance of the application.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: Service Map 在微服务环境中（例如 Kubernetes 集群）将非常有用，用于理解应用程序各个组件之间的交互。通过为每个微服务启用跟踪和性能分析，可以构建应用系统的服务映射，这将为优化应用程序性能提供宝贵的见解。
- en: In this section, you have learned how various APM features are implemented in
    Datadog by way of instrumenting the applications for generating traces and profiles
    and aggregating those inputs to derive insights. Both observability and synthetic
    monitoring are discussed, along with APM usually, but we will look at those in
    separate sections as those topics are generic enough to be understood in a broader
    context of monitoring.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，您已经了解了 Datadog 中如何通过为应用程序仪表化以生成跟踪和配置文件，并汇总这些输入以推断见解来实现各种 APM 功能。同时讨论了可观测性和合成监控，以及通常情况下的
    APM，但我们将在单独的章节中讨论这些主题，因为这些主题足够通用，可以在更广泛的监控上下文中理解。
- en: In the next section, let's discuss observability and how that is implemented
    in Datadog.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，让我们讨论可观测性及其在 Datadog 中的实现。
- en: Implementing observability
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实施可观测性
- en: Observability refers to the processes and methods involved in making the working
    of an application system more transparent and measurable. Increased observability
    of an application system will make it more monitoring-friendly. Observability
    is a property of the application system itself, while monitoring is an act that
    leverages that property for operational requirements.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 可观测性指的是使应用系统工作更透明和可测量的过程和方法。增强应用系统的可观测性将使其更适合监控。可观测性是应用系统本身的属性，而监控是利用该属性来满足操作需求的行为。
- en: Observability is relatively new to the monitoring vocabulary, but it has been
    repurposed from system control theory. The concept of observability was introduced
    by Hungarian American engineer Rudolf E. Kálmán for linear dynamic systems, and
    it states that observability is a measure of how well internal states of a system
    can be inferred from knowledge of the system's external outputs. In the context
    of monitoring, the external outputs could be various metrics, logs, and traces.
    So, a monitoring tool with observability features should help with generating
    and analyzing various outputs related to making the working of an application
    system more transparent, implemented using a set of methods, processes, and dashboards
    for analysis. Such features would help with increasing the observability of the
    application system that the monitoring tool monitors.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 可观测性相对于监控词汇来说是一个比较新的概念，但它是从系统控制理论中重新解释而来。可观测性的概念由匈牙利裔美国工程师鲁道夫·E·卡尔曼引入，用于线性动态系统，它表明可观测性是从系统外部输出知识推断系统内部状态的好坏程度的度量。在监控的背景下，外部输出可以是各种指标、日志和跟踪。因此，具有可观测性特性的监控工具应该有助于生成和分析与应用系统工作透明性相关的各种输出，使用一组方法、过程和仪表板进行分析。这些特性将有助于增加监控工具监控的应用系统的可观测性。
- en: While it's obvious that adding observability is important for better monitoring,
    you may be wondering why observability is a relatively new monitoring terminology.
    One of the reasons is that modern application systems and the infrastructure they
    run on are far more complex now. Gone are the days when monolithic applications
    ran on a few bare-metal machines in a data center. The applications are highly
    distributed, they run on public clouds, and are managed by complex orchestration
    tools such as Kubernetes and Spinnaker. While the modern application systems are
    cutting-edge and far more flexible and scalable, the increased complexity of application
    systems reduces the overall observability. In such a scenario, deliberate steps
    need to be taken to improve observability, and that's why commercial monitoring
    tools are now shipped with such features.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然显而易见的是，添加可观察性对更好的监控至关重要，但你可能会好奇为什么可观察性是一个相对较新的监控术语。原因之一是，现代应用程序系统及其运行的基础设施现在远比以前复杂。过去那种单体应用程序仅在数据中心的少数裸金属机器上运行的时代已经一去不复返。现在的应用程序高度分布式，它们运行在公共云上，并由复杂的编排工具（如
    Kubernetes 和 Spinnaker）进行管理。尽管现代应用程序系统更具前瞻性，灵活性和可扩展性大大提高，但应用程序系统复杂性的增加降低了整体可观察性。在这种情况下，必须采取有意的步骤来改善可观察性，这就是为什么商业监控工具现在都配备了此类功能的原因。
- en: Metrics, logs, and traces are generally considered the three pillars of observability.
    Throughout this book, you have seen that Datadog features center around metrics
    and tags. Datadog monitoring features generate a variety of metrics out of the
    box. Datadog also provides options to create custom metrics and tags that will
    add more visibility to the working of an application or an infrastructure component.
    As seen in [*Chapter 13*](B16483_13_Final_VK_ePub.xhtml#_idTextAnchor402), *Managing
    Logs Using Datadog*, Datadog's log management features are comprehensive in terms
    of managing a variety of logs, including those from the microservices platforms
    such as Docker and Kubernetes. Earlier in this chapter, in the section on APM,
    you have seen how Datadog could be used to generate, collect, and analyze traces
    from the applications.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 指标、日志和追踪通常被认为是可观察性的三大支柱。在本书中，你已经看到 Datadog 的功能主要集中在指标和标签上。Datadog 监控功能开箱即用地生成各种指标。Datadog
    还提供创建自定义指标和标签的选项，这将增加对应用程序或基础设施组件工作情况的可见性。如在[*第13章*](B16483_13_Final_VK_ePub.xhtml#_idTextAnchor402)中所示，*使用
    Datadog 管理日志*，Datadog 的日志管理功能在管理各种日志方面非常全面，包括来自 Docker 和 Kubernetes 等微服务平台的日志。在本章前面的
    APM 部分，你也已经看到 Datadog 如何生成、收集和分析应用程序的追踪。
- en: 'While Datadog has all the nuts and bolts necessary for implementing observability
    in an application, it''s largely a custom effort that must be done for every application
    system. The application onboarding and deployment processes must be enhanced to
    include the instrumentation steps necessary for adding observability. Let''s see
    which of those instrumentations are required in Datadog:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然 Datadog 拥有实现应用程序可观察性所需的所有基本组件，但这基本上是一个定制的工作，需要为每个应用程序系统单独完成。应用程序的引导和部署流程必须得到增强，以包括添加可观察性所需的仪器化步骤。让我们来看一下在
    Datadog 中需要哪些仪器化操作：
- en: '**Add platform component-level metrics**: This is usually done by using integrations
    supplied by Datadog. If it adds more value, consider adding custom metrics and
    using community-developed integrations.'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加平台组件级别的指标**：通常通过使用 Datadog 提供的集成来完成。如果它能增加更多价值，可以考虑添加自定义指标并使用社区开发的集成。'
- en: '**Add application metrics**: This is custom in nature and included in the development
    process. Just like unit tests are required in order to pass a build process, also
    make this a requirement for a new service to be approved at the build or release
    level.'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**添加应用程序指标**：这是定制性质的，并且包括在开发过程中。就像单元测试是构建过程中的要求一样，也应将其作为新服务在构建或发布阶段获得批准的要求。'
- en: '**Automate log management**: Instrument the build and deployment manifests
    such as Dockerfiles and Kubernetes deployment scripts to get the logs published
    to the Datadog''s Log Management backend. This must be automated at all levels
    as it won''t scale up if done manually.'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自动化日志管理**：对构建和部署清单进行仪器化，比如 Dockerfiles 和 Kubernetes 部署脚本，以便将日志发布到 Datadog
    的日志管理后端。必须在所有层级上自动化这一过程，因为如果手动完成，它是无法扩展的。'
- en: '**Automate the generation of traces and profiles**: Enhance the build and deployment
    process to automate the generation of traces and profiling, so those will readily
    be available to the Datadog APM service for analysis and building Service Maps.
    APM is a key aspect of rolling out observability.'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自动化生成跟踪和配置文件**：增强构建和部署过程，自动生成跟踪和配置文件，这样这些数据就能方便地提供给Datadog APM服务进行分析并构建服务地图。APM是实施可观察性的关键方面。'
- en: '**Use Datadog for all monitoring needs**: There are dedicated applications
    for log management and APM by other vendors, as you have seen earlier in this
    chapter. One of the advantages of using Datadog is that both those features are
    provided by Datadog in addition to core monitoring. That opens up the opportunity
    to correlate various metrics, logs, and traces on a single platform using tagging
    and related constructs. If done right, this will enhance the observability of
    the applications by virtue of having all the information gathered in one place,
    and Datadog usually correlates monitoring information available across various
    features.'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用Datadog满足所有监控需求**：如同本章之前所提到的，其他厂商也提供专用的日志管理和APM应用程序。使用Datadog的一个优势是，Datadog不仅提供核心监控功能，还提供这两个功能。这为在单一平台上使用标签和相关结构关联各种指标、日志和跟踪数据提供了机会。如果操作得当，这将通过将所有信息集中在一个地方来增强应用程序的可观察性，而Datadog通常会在不同功能之间关联可用的监控信息。'
- en: It's evident that the ability of Datadog to consolidate all three pillars of
    observability – metrics, logs, and traces – is a major strength of that platform.
    To make use of the related out-of-the-box features, the application build and
    deployment processes must be enhanced and tooled so logs and traces are published
    to the Datadog backend automatically and seamlessly.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 很明显，Datadog能够整合可观察性的三大支柱——指标、日志和跟踪——是该平台的一大优势。为了利用相关的现成功能，必须增强和工具化应用程序的构建和部署过程，以便日志和跟踪数据能自动且无缝地发布到Datadog后台。
- en: In the next section, we will look at synthetic monitoring, which refers to the
    testing of an application live in production using requests and actions that simulate
    the user experience.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将讨论合成监控，指的是通过请求和模拟用户体验的操作在生产环境中实时测试应用程序。
- en: Synthetic monitoring
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 合成监控
- en: 'In **synthetic monitoring**, the utilization of an application is simulated,
    typically by a robotic user, and the data collected from such simulations forms
    the basis of actionable steps, such as triggering an alert on an application performance
    attribute or the availability of the application itself. Generally, the following
    are the application states that can be monitored by using synthetic monitoring
    tools and methods:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 在**合成监控**中，应用程序的使用是通过一个模拟的机器人用户进行的，收集到的模拟数据构成了可操作的步骤的基础，例如触发应用程序性能属性或应用程序本身可用性的警报。通常，以下是可以通过合成监控工具和方法监控的应用程序状态：
- en: The application is available in all respects. This might involve checking on
    multiple web or API endpoints of the application.
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序在各方面都可用。这可能涉及检查应用程序的多个Web或API端点。
- en: The application performance in terms of the velocity with which an application
    responds to user requests.
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序的性能，即应用程序响应用户请求的速度。
- en: The applications can execute the business transactions as designed.
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序能够按设计执行业务交易。
- en: The third-party components used in building the application system are functioning.
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用于构建应用程序系统的第三方组件正在正常运行。
- en: The desired performance of the application achieved is cost-effective and within
    budget.
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 达到的应用程序性能是具有成本效益且在预算之内的。
- en: Most of these aspects are related to measuring user experience in terms of a
    set of metrics, and those metrics values are generated by the robotic usage of
    the application. The robotic access could be local where the application is hosted,
    in a data center or public cloud, or close to where actual users are located.
    The latter aspect of monitoring is known as last-mile monitoring, one of the types
    of monitoring that we discussed in [*Chapter 1*](B16483_01_Final_VK_ePub.xhtml#_idTextAnchor014),
    *Introduction to Monitoring*. There are dedicated SaaS monitoring solutions that
    are available for addressing last-mile monitoring requirements. With Datadog's
    synthetic monitoring features, it is also possible to address typical last-mile
    monitoring requirements.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: 'The synthetic monitoring feature of Datadog provides a variety of checks that
    will simulate the end user experience. The tests are launched from Datadog-managed
    locations around the world, and you have the option to configure from where such
    tests originate. The following are the categories of checks that can be performed
    using Datadog''s synthetic monitoring:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: '**DNS**: Checks whether domains are resolved and how quickly they are resolved
    in regions where users are located'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**ICMP**: Pings the hosts that are enabled with an ICMP protocol for their
    availability and access from where the users are located'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '`80`), HTTPS (`443`), and SSH (`22`), and any custom port'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**HTTP/HTTPS**: Checks whether a web application endpoint is up and responds
    properly'
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**HTTP workflow**: Validates a multi-request workflow covering a full transaction
    by chaining HTTP requests'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**SSL**: Validates and checks the expiration of SSL certificates associated
    with HTTPS endpoints'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Now, let''s see whether some of these checks could be configured in Datadog.
    The synthetic monitoring-related options are accessible from the main menu, **UX
    Monitoring**. Navigate to **UX Monitoring** | **New Test** and then click on the
    **Get Started** link, and you will be presented with the options as shown in the
    following screenshot:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 14.5 – Synthetic monitoring options'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
- en: '](img/Figure_14.5_B16483.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
- en: Figure 14.5 – Synthetic monitoring options
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
- en: Let's create a sample TCP test that will check the access to an SFTP host from
    Paris and Tokyo. To do that, the public IP address of the SFTP server or its domain
    name is needed to configure the test. As the SFTP service is available on port
    `22`, the check can be done on that port.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
- en: 'Click on **New API Test** and select the **TCP** tab to get to the form where
    a TCP test can be configured. The first part of the form is shown in the following
    screenshot, where the name of the test and the information about the SFTP server
    can be provided:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 14.6 – Creating a synthetic TCP test; server details'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
- en: '](img/Figure_14.6_B16483.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
- en: Figure 14.6 – Creating a synthetic TCP test; server details
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
- en: 'Using the `Test` `URL` link on the form, basic access to the server on port
    `22` can be verified. Access from specific regions can then be added to the test,
    as shown in the following screenshot:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 使用表单中的 `Test` `URL` 链接，可以验证端口 `22` 上服务器的基本访问。然后，可以将来自特定区域的访问添加到测试中，如下截图所示：
- en: '![Figure 14.7 – Creating a synthetic TCP test; selecting access locations'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 14.7 – 创建合成 TCP 测试；选择访问位置'
- en: '](img/Figure_14.7_B16483.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_14.7_B16483.jpg)'
- en: Figure 14.7 – Creating a synthetic TCP test; selecting access locations
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.7 – 创建合成 TCP 测试；选择访问位置
- en: Multiple Datadog-managed locations are available to choose from, as listed in
    the preceding screenshot. Access to the SFTP server will originate from the selected
    locations. The remainder of the options are similar to those available for setting
    up a standard Datadog monitor in general.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 可以选择多个由 Datadog 管理的位置，如前面的截图所示。SFTP 服务器的访问将来自所选的位置。其余的选项与一般设置标准 Datadog 监控器的选项类似。
- en: The other types of TCP tests – **HTTP**, **DNS**, **SSL**, and **ICMP** – can
    be configured by following similar steps by selecting the related tab on the **New
    API Test** form.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 其他类型的 TCP 测试 – **HTTP**、**DNS**、**SSL** 和 **ICMP** – 可以通过选择 **新建 API 测试** 表单中的相关标签，按照类似的步骤进行配置。
- en: 'In a real-life scenario, there will be multiple tests such as this configured
    to verify that various components and workflows of an application are available
    to the end user in the regions where they are located. The availability status
    dashboard will look like the one in the following screenshot, and it can be accessed
    by navigating to **UX Monitoring** | **Synthetic Tests**:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在实际场景中，会配置多个类似的测试，以验证应用程序的各个组件和工作流程是否在用户所在地区可用。可用性状态仪表板将类似于以下截图所示，并且可以通过导航到
    **用户体验监控** | **合成测试** 来访问：
- en: '![Figure 14.8 – Synthetic Monitoring dashboard'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 14.8 – 合成监控仪表板'
- en: '](img/Figure_14.8_B16483.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_14.8_B16483.jpg)'
- en: Figure 14.8 – Synthetic Monitoring dashboard
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.8 – 合成监控仪表板
- en: 'The overall uptime status will be presented on this dashboard and the results
    can be filtered using different conditions, such as the region of test origination.
    The individual tests are listed at the bottom of this dashboard and by clicking
    a specific item, the details of that test can be viewed and updated, as shown
    in the following screenshot:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 总体的正常运行时间状态将显示在此仪表板上，结果可以通过不同的条件进行筛选，例如测试来源区域。单个测试列在此仪表板底部，点击某个特定项目，可以查看和更新该测试的详细信息，如下截图所示：
- en: '![Figure 14.9 – Details of a synthetic TCP test'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 14.9 – 合成 TCP 测试的详细信息'
- en: '](img/Figure_14.9_B16483.jpg)'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_14.9_B16483.jpg)'
- en: Figure 14.9 – Details of a synthetic TCP test
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.9 – 合成 TCP 测试的详细信息
- en: From this page, the test can be paused or be run on an ad hoc basis without
    having to wait for the next scheduled run. These checks look simple, but are very
    powerful, because with these in place, you can access services as end users do
    using the application.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 从此页面，可以暂停测试或根据需要临时运行测试，而无需等待下次计划运行。这些检查看似简单，但非常强大，因为通过这些设置，你可以像最终用户使用应用程序一样访问服务。
- en: 'Using the *Browser Test*, it is possible to simulate the device and the browser
    used by the user when accessing a web application. To create a *Browser Test,*
    navigate to **UX Monitoring** | **New Test** | **New Browser Test**, and you will
    be presented with the new test creation form, as indicated in the following screenshot:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 *浏览器测试*，可以模拟用户在访问 Web 应用时使用的设备和浏览器。要创建 *浏览器测试*，请导航到 **用户体验监控** | **新建测试**
    | **新建浏览器测试**，你将看到新测试创建表单，如下截图所示：
- en: '![Figure 14.10 – Synthetic test simulating browsers and devices used for access'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 14.10 – 模拟用于访问的浏览器和设备的合成测试'
- en: '](img/Figure_14.10_B16483.jpg)'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_14.10_B16483.jpg)'
- en: Figure 14.10 – Synthetic test simulating browsers and devices used for access
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.10 – 模拟用于访问的浏览器和设备的合成测试
- en: To complete the creation of this test, the browsers, devices, and locations
    need to be selected. Depending on the browser that you are using to access the
    Datadog dashboard, a Datadog-supplied browser plugin has to be installed as well
    for recording the website workflow that needs to be simulated by the test. You
    will get an option to record the workflow and save it as part of creating the
    test.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 要完成此测试的创建，需要选择浏览器、设备和位置。根据你访问 Datadog 仪表板时所使用的浏览器，可能需要安装 Datadog 提供的浏览器插件，以便记录需要由测试模拟的网页工作流程。你将获得一个选项，录制工作流程并将其保存为创建测试的一部分。
- en: 'Once the test results are in, you can view this on the dashboard, as in the
    following sample screenshot:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 14.11 – A sample Browser Test result'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
- en: '](img/Figure_14.11_B16483.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
- en: Figure 14.11 – A sample Browser Test result
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
- en: As you can see, there are multiple issues unearthed by the sample test. You
    can drill down to the report and view the details of each issue. A test result
    such as this is very valuable in terms of fine-tuning the web application as you
    are now able to see how the users access the application from a specific combination
    of computing device and browser.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
- en: Synthetic monitoring is essentially about simulating the user experience that
    you can measure. That's why it's considered part of APM because the inputs from
    synthetic monitoring tests can be used to fine-tune the applications for a better
    user experience. In the next section, you will learn about the security monitoring
    features that the Datadog monitoring platform offers.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
- en: Security monitoring
  id: totrans-126
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Cybersecurity is a far more important and essential area to cover in the cloud
    environment because the application needs to be accessed via the internet and,
    in most cases, the application itself is hosted in a public cloud. The security
    of running an application in your own data center and making it accessible only
    in your private network is no longer an option. The infrastructure and the applications
    that are exposed to external attacks should be protected and hardened. There is
    an ecosystem of software applications and services addressing a plethora of cybersecurity
    issues.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
- en: Another aspect is the requirement of meeting security and privacy and compliance
    standards for doing business, especially if the application is catering to the
    healthcare and financial industries. Compliance requirements are dictated by laws
    applicable in the jurisdiction of doing business, and security standards are demanded
    by customers. Compliance requirements are usually audited by third-party service
    providers in that space, and those requirements must be monitored and recorded
    as evidence for the auditors.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
- en: Datadog's *Security and Compliance Monitoring* feature has multiple options
    that can be rolled out in an organization to address common cybersecurity and
    compliance requirements. Also, Datadog enjoys the advantage of being a unified
    platform for various monitoring types. By combining the analysis of logs and traces
    that are sourced from the infrastructure and applications, and the powerful monitoring
    features such as alerting and event management, Datadog can also be configured
    as a SIEM platform. Having a SIEM tool is usually a requirement to demonstrate
    that an organization has a sound cybersecurity practice.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
- en: 'Now, let''s review the security features currently available on the Datadog
    platform and look at the general steps involved in starting to use those features.
    The security options can be accessed from the main **Security** menu, as in the
    following screenshot:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 14.12 – Datadog Security and Compliance monitoring options'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 14.12 – Datadog安全与合规监控选项'
- en: '](img/Figure_14.12_B16483.jpg)'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_14.12_B16483.jpg)'
- en: Figure 14.12 – Datadog Security and Compliance monitoring options
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.12 – Datadog安全与合规监控选项
- en: 'The general steps in enabling the security features are these: source the logs,
    define the security rules, and monitor for security signals that are flagged from
    the source information based on the security rules. The **Runtime Security** feature
    helps to detect threats to production infrastructure where the application workloads
    are run by monitoring system-level activities, such as changes in a file or process.
    The **Compliance Findings** feature helps to audit the production infrastructure
    for compliance with industry-standard security regimes, such as the **Payment
    Card Industry** (**PCI**) data security standard and the **Center for Internet
    Security** (**CIS**), which audits infrastructure for vulnerabilities.'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 启用安全功能的一般步骤如下：获取日志、定义安全规则、并根据安全规则从源信息中标记安全信号进行监控。**运行时安全**功能有助于通过监控系统级活动（如文件或进程的变化）来检测生产基础设施中的威胁，应用负载在其中运行。**合规性检查**功能有助于审计生产基础设施，确保其符合行业标准的安全规范，如**支付卡行业**（**PCI**）数据安全标准和**互联网安全中心**（**CIS**），这些标准帮助审计基础设施中的漏洞。
- en: Now, let's look at how information is fed into Datadog for security analysis
    and use the insights for hardening the infrastructure and applications.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们来看一下如何将信息输入Datadog进行安全分析，并利用这些洞察力来加强基础设施和应用程序的安全性。
- en: Sourcing the logs
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 日志来源
- en: 'Datadog can consume logs from a variety of public cloud platforms and security
    products to look for security threats. The following screenshot lists the general
    category of sources that can be integrated with Datadog for sourcing the logs:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: Datadog可以从多种公有云平台和安全产品中获取日志，以查找安全威胁。下图列出了可以与Datadog集成的日志来源的一般类别：
- en: '![Figure 14.13 – Sources of logs for security analysis'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 14.13 – 用于安全分析的日志来源'
- en: '](img/Figure_14.13_B16483.jpg)'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_14.13_B16483.jpg)'
- en: Figure 14.13 – Sources of logs for security analysis
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.13 – 用于安全分析的日志来源
- en: 'The following are the four categories of sources of logging information that
    Datadog can analyze for security threats:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是Datadog可以分析的四类日志来源，用于检测安全威胁：
- en: Public cloud platforms – AWS, Azure, and GCP
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 公有云平台 – AWS、Azure 和 GCP
- en: Container products and services, such as **Docker**, **Kubernetes**, and **Amazon
    EKS**
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 容器产品和服务，如**Docker**、**Kubernetes**和**Amazon EKS**
- en: Identity providers – **Okta**, **Auth0**, **G Suite**, and **Azure Active Directory**.
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 身份提供者 – **Okta**、**Auth0**、**G Suite** 和 **Azure Active Directory**。
- en: Security products, mainly services available on **AWS**, and other products
    such as **HashiCorp Vault**
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安全产品，主要是**AWS**上的服务，和其他产品，如**HashiCorp Vault**
- en: The integration methods are specific to each product, and by selecting a product
    listed on the preceding dashboard, the installation procedure can be viewed.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 集成方法是针对每个产品特定的，通过选择前述仪表盘上列出的产品，可以查看安装过程。
- en: Defining security rules
  id: totrans-147
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 定义安全规则
- en: 'There are predefined rules available out of the box that can be used to analyze
    the logs collected by Datadog from the various sources mentioned in the last section.
    The security rules dashboard can be accessed by navigating to **Security** | **Security
    Rules** and the rules available are listed on the dashboard, as in the following
    screenshot:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: Datadog提供了一些预定义规则，可以直接用于分析Datadog从上文提到的各种来源收集的日志。可以通过导航到**安全** | **安全规则**来访问安全规则仪表盘，仪表盘上列出了可用的规则，如下图所示：
- en: '![Figure 14.14 – Security rules dashboard'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 14.14 – 安全规则仪表盘'
- en: '](img/Figure_14.14_B16483.jpg)'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_14.14_B16483.jpg)'
- en: Figure 14.14 – Security rules dashboard
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 图 14.14 – 安全规则仪表盘
- en: The rules can be enabled or disabled from this dashboard. Also, custom rules
    can be added by using the **New Rule** link.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 这些规则可以在此仪表盘上启用或禁用。同时，可以通过使用**新规则**链接添加自定义规则。
- en: Monitoring security signals
  id: totrans-153
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 监控安全信号
- en: A security signal is created when a potential threat is located in the logs
    based on the active security rules. This is similar to generating an alert by
    a monitor when a metric value crosses a threshold. Like an alert, a signal can
    be broadcast to a variety of audiences. By navigating to **Security** | **Security
    Signals**, these signals can also be viewed on the **Security Signals** dashboard.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
- en: We did a general overview of the security features available on the Datadog
    platform in this section. It's an area that's still a work in progress, but the
    general direction it has taken is very encouraging in terms of the usability of
    the available features and the simplicity of integration with sources of security
    information. In the next section, let's look at the best practices related to
    the topics that have been discussed in this chapter.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
- en: Best practices
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'You have learned about advanced monitoring, APM, and the security features
    available on the Datadog platform, so now let''s look at the related best practices
    in those areas:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
- en: The instrumentation for generating application traces and profiling for APM
    must be incorporated in the build and deployment process.
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Define a complete set of application metrics for each service and expose those
    for easy consumption by Datadog.
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Plan to collect all application logs and, if needed, define new ones so that
    the application state can be observed easily.
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Determine the geographical locations of the users of the application for fine-tuning
    synthetic tests.
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Publish the list of supported devices and browsers. Based on the information
    available in synthetic monitoring reports, fine-tune the application for compatibility
    with access devices and browsers.
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: For effective security monitoring, define custom security rules that are relevant
    to the organization. Disable out-of-the-box rules that might generate spurious
    messages.
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: This brings us to the summary section.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, you have learned about some of the monitoring features that
    are relatively new on the Datadog platform and that continue to evolve. Both observability
    and synthetic monitoring are discussed along with APM, but the related tools and
    concepts are generic enough to be applicable to a wider context of monitoring.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
- en: With this chapter, the book is concluded and the recommended next step for you
    is to roll out Datadog in your environment to acquire expertise. With features
    available to cover almost every monitoring type, such as infrastructure monitoring,
    log aggregation and indexing, last-mile monitoring, APM, and security monitoring,
    Datadog is one the most comprehensive monitoring platforms available on the market.
    One of its major attractions is its ability to unify monitoring with the help
    of a variety of monitoring features available on the platform and its ability
    to correlate information across products.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
- en: We wish you good luck with rolling out proactive monitoring using Datadog, which
    is an excellent choice for this purpose.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
