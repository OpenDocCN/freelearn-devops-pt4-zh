- en: '*Chapter 2*: SRE Technical Practices – Deep Dive'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第二章*：SRE技术实践——深入解析'
- en: '**Reliability** is the most critical feature of a service or a system and should
    be aligned with business objectives. This alignment should be tracked constantly,
    meaning that the alignment needs measurement. **Site reliability engineering**
    (**SRE**) prescribes specific technical tools or practices that will help in measuring
    characteristics that define and track reliability. These tools are **service-level
    agreements** (**SLAs**), **service-level objectives** (**SLOs**), **service-level
    indicators** (**SLIs**), and **error budgets**.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '**可靠性**是服务或系统最关键的特性，应该与业务目标对齐。这种对齐需要不断追踪，也就是说，对齐情况需要通过度量来跟踪。**站点可靠性工程**（**SRE**）规定了特定的技术工具或实践，帮助衡量定义和跟踪可靠性的特征。这些工具包括**服务级别协议**（**SLA**）、**服务级别目标**（**SLO**）、**服务级别指标**（**SLI**）和**错误预算**。'
- en: SLAs represent an external agreement with customers about the reliability of
    a service. SLAs should have consequences if violated (that is, the service doesn't
    meet the reliability expectations), and the consequences are often monetary in
    nature. To ensure SLAs are never violated, it is important to set thresholds.
    Setting these thresholds ensures that an incident is caught and potentially addressed
    before repeated occurrences of similar or the same events breach the SLA. These
    thresholds are referred to as SLOs.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: SLA代表与客户达成的关于服务可靠性的外部协议。如果违反SLA（即服务未能满足可靠性期望），应该会有相应的后果，这些后果通常是金钱上的惩罚。为了确保SLA不会被违反，重要的是设置阈值。设置这些阈值可以确保在类似或相同事件重复发生之前，及时发现并处理事故，从而避免违反SLA。这些阈值被称为SLO。
- en: SLOs are specific numerical targets to define reliability of a system, and SLOs
    are measured using SLIs. SLIs are a quantitative measure of the level of service
    provided over a period. Error budgets are calculated based on SLOs (that are based
    on SLIs) and essentially are the inverse of availability, representing a quantifiable
    target as to how much a service can be unreliable. All these tools or technical
    practices need to work in tandem, and each one is dependent on the other. SRE
    uses these technical practices to maintain the balance between innovation and
    system reliability and thus achieve the eventual goal—*build reliable software
    faster*.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: SLO是定义系统可靠性的特定数值目标，SLO是通过SLI来衡量的。SLI是衡量一段时间内提供的服务水平的量化指标。错误预算是基于SLO（基于SLI）计算的，实质上是可用性的逆指标，表示服务可能不可靠的量化目标。所有这些工具或技术实践需要协同工作，并且每个工具都依赖于其他工具。SRE使用这些技术实践来维持创新与系统可靠性之间的平衡，从而实现最终目标——*更快地构建可靠的软件*。
- en: '[*Chapter 1*](B15587_01_Final_ASB_ePub.xhtml#_idTextAnchor014), *DevOps, SRE,
    and Google Cloud Services for CI/CD*, introduced SRE technical practices—SLAs,
    SLOs, SLIs, and error budgets. This chapter will deep dive into these technical
    practices. In this chapter, we''re going to cover the following main topics:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第一章*](B15587_01_Final_ASB_ePub.xhtml#_idTextAnchor014)，*DevOps、SRE和Google云服务在CI/CD中的应用*，介绍了SRE的技术实践——SLA、SLO、SLI和错误预算。本章将深入探讨这些技术实践。在本章中，我们将涵盖以下主要内容：'
- en: Defining SLAs
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定义SLA
- en: Defining reliability expectations via SLOs
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过SLO定义可靠性期望
- en: Exploring SLIs
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 探索SLI
- en: Understanding error budgets
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解错误预算
- en: Eliminating toil through automation
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过自动化消除繁琐工作
- en: Illustrating the impact of SLAs, SLOs, and error budgets relative to SLI
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 阐述SLA、SLO和错误预算相对于SLI的影响
- en: Defining SLAs
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 定义SLA
- en: An SLA is a promise made to a user of a service to indicate that the availability
    and reliability of the service should meet a certain level of expectation. An
    SLA details a certain level of performance or expectation from the service.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: SLA是对服务用户的承诺，表示服务的可用性和可靠性应达到一定的期望水平。SLA详细说明了服务的某个性能或期望水平。
- en: Key jargon
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 关键术语
- en: There are certain components that go into defining which agreements can be considered
    as an SLA. These are referred to with specific jargon and are elaborated, as mentioned,
    in the following sections.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在定义哪些协议可以视为SLA时，有一些特定的组成部分。它们使用特定的术语，并将在以下部分中详细说明。
- en: Service provider and service consumer
  id: totrans-15
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 服务提供者和服务消费者
- en: The party that represents the service provider and service consumer can differ
    based on the context and nature of the service. For a consumer-facing service
    such as video streaming or web browsing, a service consumer refers to the end
    user consuming the service and a service provider refers to the organization providing
    the service. On the other hand, for an enterprise-grade service such as a **human
    resource** (**HR**) planning system, a service consumer refers to the organization
    consuming the service and a service provider refers to the organization providing
    the service.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 代表服务提供方和服务消费者的方根据服务的背景和性质可能会有所不同。对于面向消费者的服务，如视频流媒体或网页浏览，服务消费者指的是使用服务的最终用户，服务提供方指的是提供该服务的组织。另一方面，对于像
    **人力资源**（**HR**）规划系统这样的企业级服务，服务消费者指的是使用服务的组织，服务提供方指的是提供该服务的组织。
- en: Service performance or expectations
  id: totrans-17
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 服务性能或期望
- en: An organization or end user consuming a service will have certain expectations
    in terms of service behavior, such as **availability** (or **uptime**), **responsiveness**,
    **durability**, and **throughput**.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 消费服务的组织或最终用户会对服务行为有一定的期望，例如 **可用性**（或 **正常运行时间**）、**响应性**、**耐久性** 和 **吞吐量**。
- en: Agreement – implicit or explicit
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 协议 —— 隐式或显式
- en: An agreement or contract can be either implicit or explicit in nature. An example
    of an implicit contract is a non-commercial service such as Google Search. Google
    has a goal to provide a fluid search experience to all its users but hasn't signed
    an explicit agreement with the end user. If Google misses its goal, then users
    will not have a good experience. A repeat of such incidents will impact Google's
    reputation, as users might prefer to use an alternate search engine.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 协议或合同可以是隐式或显式的。例如，隐式合同的一个例子是 Google 搜索这样的非商业服务。Google 的目标是为所有用户提供流畅的搜索体验，但并未与最终用户签署明确的协议。如果
    Google 未能实现其目标，用户将不会有良好的体验。此类事件的重复发生将影响 Google 的声誉，因为用户可能会选择使用其他搜索引擎。
- en: An example of an explicit contract is a commercial service such as *Netflix*
    or a paid enterprise-grade service such as *Workday*. In such scenarios, legal
    agreements are written that include consequences in case the service expectations
    are not met. Common consequences include financial implications or service credits.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 一个明确合同的例子是像 *Netflix* 这样的商业服务，或像 *Workday* 这样的付费企业级服务。在这种情况下，会有法律协议，规定如果服务期望未能达成，将会有相应后果。常见的后果包括财务影响或服务积分。
- en: This concludes an introduction to key jargon with respect to SLAs. The next
    subsection elaborates on the blueprint for a well-defined SLA.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 这部分介绍了与 SLA 相关的关键术语。下一节将详细讲解明确定义的 SLA 的蓝图。
- en: Blueprint for a well-defined SLA
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 明确定义的 SLA 蓝图
- en: 'Having a well-defined SLA is critical to its success. Here are some factors
    that could be used as a blueprint for a well-defined SLA:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 拥有一个明确定义的 SLA 对于其成功至关重要。以下是一些可以作为明确定义的 SLA 蓝图的因素：
- en: '**Involve the right parties**: SLAs are usually written by people who are not
    directly tied to the implementation of the service and hence might result in promises
    that are difficult to measure. *SLAs should be set between business and product
    owners*. However, SRE recommends that before SLAs are set, product owners should
    work with development and SRE teams to identify the expectation threshold that
    can be delivered by the service. This ensures that product owners work closer
    with the implementation teams and know what''s acceptable and what''s not realistic
    from a service viewpoint.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**涉及相关方**：SLA（服务级别协议）通常由与服务实施无直接关系的人编写，因此可能导致一些难以衡量的承诺。*SLA 应由业务和产品负责人之间设定*。然而，SRE（站点可靠性工程）建议，在设定
    SLA 之前，产品负责人应与开发团队和 SRE 团队合作，识别服务能够实现的期望阈值。这可以确保产品负责人与实施团队密切合作，了解从服务的角度来看，什么是可以接受的，什么是不可实现的。'
- en: '**Expectations need to be measurable**: Service expectations such as availability
    or reliability characteristics in terms of stability, responsiveness, and durability
    should be quantifiable and measurable. Service expectations should be monitored
    by configuring monitoring systems and tracking specific metrics, and alerting
    should be configured to trigger alerts in case the expectations are violated.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**期望需要可衡量**：服务期望，如可用性或可靠性特征，应该以稳定性、响应性和耐久性等方面进行量化和衡量。服务期望应通过配置监控系统并跟踪特定指标来进行监控，并应配置告警系统，在期望被违反时触发告警。'
- en: '**Avoid ambiguity**: The jargon used while defining SLAs can sometimes be ambiguous.
    For example, consider an SLA that promises a client-initiated incident to be resolved
    within *X* hours from the time it''s reported. If the client or customer either
    provided the details long after the incident was first reported or never provided
    the details at all, then it is possible that the service provider will not be
    able to resolve the incident. In this situation, the SLA should clearly state
    the stipulations that qualify for not meeting the SLA, and such scenarios should
    be excluded. This provides a clearer approach.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**避免歧义**：在定义SLA时使用的行业术语有时可能不明确。例如，考虑一个承诺在*X*小时内解决客户发起的事件的SLA。如果客户或客户提供的详细信息是在事件首次报告后很久才提供的，或者根本没有提供详细信息，则可能服务提供商将无法解决该事件。在这种情况下，SLA应清楚地说明不符合SLA的资格条件，并应排除这类情况。这提供了更清晰的方法。'
- en: SLIs drive SLOs, which inform SLAs
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: SLI驱动SLO，进而确定SLA。
- en: SLAs should focus on the minimum level of objectives a service should meet to
    keep customers happy. However, SLAs are strictly external targets and should not
    be used as internal targets by the implementation teams.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: SLA应关注服务应达到的最低目标水平，以保持客户满意。然而，SLA严格来说是外部目标，不应作为实施团队的内部目标。
- en: To ensure that SLAs are not violated, implementation teams should have target
    objectives that reflect user's expectations from the service. The target objectives
    from implementation teams are used as internal targets, and these are generally
    stricter than the external targets that were potentially set by product teams.
    The internal targets are referred to as SLOs and are used as a prioritization
    signal to balance release velocity and system reliability. These internal targets
    need to be specifically measured and quantified at a given point of time. The
    measurement should be done using specific indicators that reflects users' expectations,
    and such indicators are referred to as SLIs.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 为了确保不违反SLA，实施团队应具有反映用户对服务期望的目标目标。实施团队的目标目标被用作内部目标，这些目标通常比产品团队潜在设置的外部目标更为严格。内部目标被称为SLO，并被用作平衡发布速度和系统可靠性的优先信号。这些内部目标需要在特定时间点具体测量和量化。测量应使用反映用户期望的特定指标进行，这些指标被称为SLI。
- en: 'To summarize, for a service to perform reliably, the following criteria needs
    to be met:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 总结来说，为了确保服务的可靠性，需要满足以下几个标准：
- en: A specific condition should be met—represented by an SLI.
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应满足特定条件——由SLI表示。
- en: The condition should be met for a specific period within a specific target range—represented
    by an SLO.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 特定条件应在特定目标范围内的特定时间段内得以满足——由SLO表示。
- en: If met, customers are happy, or else there will be consequences—represented
    by an SLA.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果达到，客户会感到满意，否则将会有后果——由SLA表示。
- en: Let's look at a hypothetical example. Consider a requirement where a user's
    request/response time falls within a minimum time period. A latency metric can
    be used to represent the user's expectation. A sample SLA in this scenario can
    state that every customer will get a response within 1,000 **milliseconds** (**ms**).
    In this case, the SLO for this SLA must be stricter and can be set at 800 ms.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看一个假设的例子。考虑一个要求用户请求/响应时间在最短时间段内的要求。延迟度量可以用来表示用户的期望。在这种情况下，此场景中的样本SLA可以规定，每位客户将在1,000毫秒（ms）内得到响应。在这种情况下，此SLA的SLO必须更为严格，可以设定为800
    ms。
- en: This completes the section on SLAs. We looked at the key constructs of an SLA,
    factors that could impact a well-defined SLA, and its impact on setting internal
    target objectives or SLOs, using specific indicators or SLIs that impact customer
    satisfaction. The next section transitions from an SLA to an SLO and its respective
    details.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 这完成了关于SLA的部分。我们看了SLA的关键结构，可能影响良好定义的SLA的因素，以及它对设定内部目标或SLO的影响，使用特定指标或影响客户满意度的SLI。
- en: Defining reliability expectations via SLOs
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过SLO定义可靠性期望
- en: Service consumers (users) need a service to be reliable, and the reliability
    of the service can be captured by multiple characteristics such as availability,
    latency, freshness, throughput, coverage, and so on. From a user's perspective,
    a service is reliable if it meets their expectations. A critical goal of SRE is
    to measure everything in a quantitative manner. So, to measure, there is a need
    to represent user expectations quantitatively.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 服务消费者（用户）需要服务的可靠性，服务的可靠性可以通过多种特征来衡量，如可用性、延迟、时效性、吞吐量、覆盖率等。从用户的角度来看，如果服务符合他们的期望，那么服务就是可靠的。SRE的一个关键目标是以定量的方式衡量一切。因此，为了进行衡量，需要定量表示用户期望。
- en: SRE recommends a specific technical practice called a SLO to specify a target
    level (numerical) to represent these expectations. Each service consumer can have
    a different expectation. These expectations should be measurable, and for that
    they should be quantifiable over a period. SLOs help to define a consistent level
    of user expectations where the measured user expectation should be either within
    the target level or should be within a range of values. In addition, SLOs are
    referred to as internal agreements and are often stricter than SLAs promised to
    the end users. This ensures that any potential issues are resolved before their
    repetitive occurrence results in violating the SLA.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: SRE推荐了一种特定的技术实践，叫做SLO，用于指定一个目标水平（数值），以表示这些期望。每个服务消费者可能有不同的期望。这些期望应该是可衡量的，并且需要在一段时间内量化。SLO帮助定义一致的用户期望水平，其中衡量的用户期望应当位于目标水平内或位于一个值的范围内。此外，SLO被称为内部协议，通常比承诺给最终用户的SLA更为严格。这确保了在潜在问题出现之前得到解决，从而避免了重复发生时违反SLA的情况。
- en: SLOs are key to driving business decisions by providing a quantifiable way to
    balance release cadence of service features versus service reliability. This emphasis
    will be covered in the upcoming subsection.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: SLO是推动业务决策的关键，它提供了一种可量化的方式来平衡服务功能的发布节奏与服务可靠性之间的关系。这个重点将在接下来的小节中讨论。
- en: SLOs drive business decisions
  id: totrans-41
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: SLO驱动业务决策
- en: 'The need for revenue growth puts businesses under constant pressure to add
    new features and attract new users to their service. So, product managers usually
    dictate the requirement of these new features to development teams. Development
    teams build these requirements and hand them over to the operations team to stabilize.
    Development teams continue their focus on adding new features to a service rather
    than stabilizing existing ones. Operations teams tend to get overloaded since
    they are constantly firefighting to maintain the reliability of the existing service,
    in addition to rolling out new features. So, the most important question is: *If
    reliability is a feature of a system, then how can you balance reliability along
    with the release of other features?*'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 收入增长的需求使企业不断面临压力，要求增加新功能并吸引新用户。因此，产品经理通常会向开发团队下达这些新功能的需求。开发团队构建这些需求并交给运维团队以稳定服务。开发团队继续专注于为服务添加新功能，而不是稳定现有功能。运维团队往往会过载，因为他们不仅要处理现有服务的可靠性问题，还要推出新功能。所以，最重要的问题是：*如果可靠性是系统的一个功能，那么你如何在发布其他功能的同时平衡可靠性？*
- en: SLOs are the answer to how to maintain a balance between reliability and release
    velocity. SLOs allow us to define target levels for a reliable service. These
    target levels should be decided by all the stakeholders across an organization,
    including engineering teams (development and operations) and the product team.
    The agreed-upon target levels should reflect users' experiences while using the
    service. This allows monitoring systems to identify existing problems before users
    register complaints. SLOs should be treated more as a prioritization signal rather
    than an operational concern.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: SLO（服务水平目标）是如何在可靠性和发布速度之间保持平衡的答案。SLO使我们能够为可靠的服务定义目标水平。这些目标水平应该由组织内的所有利益相关者共同决定，包括工程团队（开发和运维）以及产品团队。达成一致的目标水平应当反映用户在使用服务时的体验。这使得监控系统能够在用户提出投诉之前识别现有问题。SLO应该更多地作为优先级信号来处理，而不是运营问题。
- en: SLOs should be used as a primary driver for decision making. SLOs represent
    a common language for all reliability conversations that is based on actual metrics.
    This will allow a business to decide when to release new features versus when
    to continue their focus on the reliability of an existing service. It will also
    allow operations teams to have a streamlined set of goals, preventing ad-hoc actions
    to run the service, and eventually avoiding **operational overload**.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: SLO应该作为决策的主要驱动力。SLO代表了所有可靠性对话的通用语言，它基于实际指标。这将使企业能够决定何时发布新功能，何时继续专注于现有服务的可靠性。它还将使运营团队拥有一套简化的目标，防止为运行服务而采取临时行动，最终避免**操作过载**。
- en: Operational overload is a term that describes the ongoing maintenance tasks
    that keep systems and services running at optimal performance. If a team is constantly
    interrupted by operations load and cannot make progress toward their key priorities,
    then the team is in a state of operational overload.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 操作过载是一个描述持续的维护任务的术语，这些任务保持系统和服务在最佳性能下运行。如果一个团队不断被操作负载打断，无法向其关键优先事项推进，那么该团队就处于操作过载状态。
- en: The main reason for a team to be in a state of operational overload is a lack
    of consensus on the level of reliability a service should support. This lack of
    consensus is apparent from development teams' focus on adding new features to
    a service rather than stabilizing existing ones.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 团队处于操作过载状态的主要原因是对服务应支持的可靠性水平缺乏共识。这种共识的缺乏可以从开发团队专注于为服务添加新功能，而非稳定现有功能中看出。
- en: SLOs must have strong backing from the executive team. In the case of missed
    SLO targets, there should be well-documented consequences that prioritize engineering
    efforts toward stabilizing the reliability of a service rather than working or
    releasing new features. SLOs are key to removing organization silos and create
    a sense of shared responsibility and ownership. SLOs drive incentives that organically
    invoke a thought process whereby developers start to care about service reliability
    and operators start to care about pushing new features out as quickly as possible.
    The recommended guidelines to set SLOs will be detailed in the upcoming subsection.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: SLO必须得到执行团队的强力支持。如果未达到SLO目标，应有充分的文档记录后果，优先将工程工作集中于稳定服务的可靠性，而不是开发或发布新功能。SLO是消除组织壁垒的关键，并创建共享责任感和所有权感。SLO驱动着激励机制，能够自然而然地激发开发者开始关注服务的可靠性，运营者开始关注尽快推出新功能。设置SLO的推荐指南将在接下来的小节中详细介绍。
- en: Setting SLOs – the guidelines
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置SLOs – 指南
- en: The journey or process to identify the right SLOs for a service is very complex.
    There are multiple aspects or guidelines that need to be considered. Each of these
    aspects is critical to set or define an SLO for a service.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 确定服务正确的SLOs的过程非常复杂。有多个方面或指导方针需要考虑。每个方面对设置或定义服务的SLO至关重要。
- en: The happiness test
  id: totrans-50
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 幸福测试
- en: 'SLO targets are always driven by quantifiable and measurable user expectations
    called SLIs. **The happiness test** is a good starting point to set SLO targets
    for a service. As per the test, the service should have target SLOs that barely
    meet the availability and reliability expectations of the users, as the following
    applies:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: SLO目标总是由可量化和可衡量的用户期望驱动，这些期望称为SLI。**幸福测试**是设置服务SLO目标的一个良好起点。根据此测试，服务应具有满足用户可用性和可靠性期望的目标SLO，正如以下所示：
- en: If the service meets the target SLOs, then users are happy.
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果服务满足目标SLO，则用户会感到高兴。
- en: If the service misses the target SLOs, then users are sad.
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果服务未能达到目标SLO，则用户会感到悲伤。
- en: 'A target SLO for an average response time is defined as a range between 600
    and 800 ms. If the average response time is less than 800 ms, then the service
    meets the target SLO, and users are happy. If the average response time is greater
    than 800 ms (even though it is less than stipulated in the SLA), then the service
    misses the target SLO and the users are sad. The following diagram illustrates
    an example where an SLA with respect to average response time for a request is
    set to 1,000 ms:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 平均响应时间的目标SLO定义为600到800毫秒之间的范围。如果平均响应时间小于800毫秒，则服务满足目标SLO，用户会感到高兴。如果平均响应时间大于800毫秒（即使它低于SLA规定的限制），则服务未能达到目标SLO，用户会感到悲伤。以下图示说明了一个例子，其中关于请求的平均响应时间的SLA设置为1,000毫秒：
- en: '![Figure 2.1 – Happy versus sad users based on target SLOs'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '![图2.1 – 根据目标SLO判断用户的高兴与悲伤'
- en: '](img/B15587_02_01.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15587_02_01.jpg)'
- en: Figure 2.1 – Happy versus sad users based on target SLOs
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.1 – 基于目标SLO的用户满意与不满意对比
- en: 100% reliability is the wrong target
  id: totrans-58
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 100%的可靠性是错误的目标
- en: 'Reliability is the most important feature of a service and reflects user happiness.
    However, setting 100% as the SLO or reliability target is not a realistic and
    reasonable goal for the following reasons:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 可靠性是服务最重要的特性，它反映了用户的满意度。然而，将100%设定为SLO（服务级目标）或可靠性目标并不是一个现实且合理的目标，原因如下：
- en: '**Unable to improve or add new features to the service**: Maintaining customer
    happiness is tricky. Customers always look forward to new feature sets but also
    expect that the stability of the existing service will not be impacted. Adding
    new features to a running service can have the potential to introduce some amount
    of risk or unreliability. If SLO targets for a service are set to 100%, this implies
    that the service is always reliable, resulting in zero downtime. As a result,
    the service cannot tolerate any risk in terms of downtime, and inherently new
    features cannot be added to the service. If new features are not added to the
    service, users will be unhappy and will move to competitors that offers similar
    services with more feature sets.'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**无法改善或添加新功能到服务**：维持客户满意度是一项棘手的任务。客户总是期待新功能集的出现，但同时也希望现有服务的稳定性不受影响。在运行中的服务上添加新功能可能会引入一定的风险或不可靠性。如果服务的SLO目标设定为100%，这意味着服务始终可靠，停机时间为零。因此，服务无法容忍任何停机风险，并且本质上不能向服务中添加新功能。如果无法向服务添加新功能，用户会感到不满，并转向提供类似服务且功能更多的竞争对手。'
- en: '**Technologically unfeasible**: Running a service includes multiple components
    and dependencies. Some of these are internal, while some are external to the service.
    Though these components can be made redundant to achieve high availability, the
    dependencies result in complexities that would result in potential downtime. In
    addition, external components impact the availability of a service—for example,
    a mobile user cannot access a service if the mobile network provider has a dead
    zone at that specific location.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**在技术上不可行**：运行一个服务包括多个组件和依赖关系。其中一些是内部的，而一些是外部的。尽管这些组件可以通过冗余设计来实现高可用性，但这些依赖关系带来的复杂性可能会导致潜在的停机。此外，外部组件也会影响服务的可用性——例如，如果移动网络提供商在特定位置有死区，那么移动用户无法访问该服务。'
- en: '**Exponentially expensive**: For every additional nine of reliability, the
    cost increases by 10 times. It''s expensive to make a reliable system even more
    reliable. Being reliable enough is the wiser option.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**呈指数增长的费用**：每增加九个可靠性级别，成本就增加10倍。让一个可靠的系统变得更加可靠是非常昂贵的。选择足够可靠才是更明智的选择。'
- en: Understanding reliability targets and their implications
  id: totrans-63
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 理解可靠性目标及其影响
- en: As 100% is the wrong reliability target, it is important to find the optimal
    reliability target where the *service is reliable enough* for the user and there
    is an opportunity to update or add new features to the service.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 由于100%可靠性是错误的目标，因此寻找一个最佳的可靠性目标是很重要的，这个目标可以确保*服务对用户足够可靠*，同时也能提供更新或添加新功能的机会。
- en: Another perspective with which to look at reliability targets for a service
    is the amount of unreliability the service is willing to tolerate. Unreliability
    of the service is also referred to as the **downtime**.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个观察服务可靠性目标的角度是服务能够容忍的不可靠性程度。服务的不可靠性也被称为**停机时间**。
- en: 'Let''s consider some reliability targets, as follows:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 我们来考虑一些可靠性目标，如下所示：
- en: A reliability target of 99.9% (also known as three nines of reliability) over
    a 30-day period will result in a maximum possible downtime of 42 minutes. This
    is enough time for a monitoring system to detect the issue, and is also enough
    time for a human to get involved and probably mitigate or resolve the issue.
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在30天的时间段内，99.9%的可靠性目标（也称为三九可靠性）将导致最大可能的停机时间为42分钟。这段时间足够监控系统检测到问题，也足够让人工介入并可能缓解或解决问题。
- en: A reliability target of 99.99% (also known as four nines of reliability) over
    a 30-day period will result in a maximum possible downtime of 4.2 minutes. This
    is enough time for a monitoring system to detect the issue but is not enough time
    for a human to get involved, but probably enough time for a system to self-heal
    a complete outage.
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在30天的时间段内，99.99%的可靠性目标（也称为四九可靠性）将导致最大可能的停机时间为4.2分钟。这段时间足够让监控系统检测到问题，但不够让人工介入，不过可能足够让系统自行修复完全的故障。
- en: A reliability target of 99.999% (also known as five nines of reliability) over
    a 30-day period will result in a maximum possible downtime of 24 seconds. This
    extremely short duration is not enough to detect an issue or even attempt to self-heal.
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 99.999%（即五个九的可靠性）在 30 天内的可靠性目标意味着最大停机时间为 24 秒。这种极短的时间不足以检测问题，甚至无法尝试自我修复。
- en: 'The following table summarizes the possibility of detecting an issue and the
    possibility to self-heal based on a reliability target over a 30-day period:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 下表总结了基于 30 天内可靠性目标，检测问题的可能性以及自愈的可能性：
- en: '![](img/B15587_02_Table-01.jpg)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15587_02_Table-01.jpg)'
- en: To summarize, a reliability target should be set to a level that is realistic
    where an issue can be detected and addressed. An automated self-healing process
    is recommended over a human involvement—for example, redirecting traffic to a
    new **availability zone** (**AZ**) in case of an existing AZ failure.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 总结来说，可靠性目标应该设定为一个现实的水平，在该水平下问题可以被检测并解决。推荐使用自动化的自愈过程，而不是人工干预——例如，在现有的可用区（**AZ**）发生故障时，将流量重定向到新的**可用区**。
- en: Setting a reliability target too low means that issues could frequently occur,
    leading to large duration of downtimes, and customers will be impacted regularly.
    Setting a reliability target too high at 99.999% or even 100% means that the system
    cannot practically fail, and that makes it difficult to add new features to the
    service or application.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 设置过低的可靠性目标意味着问题可能频繁发生，导致长时间的停机，客户将经常受到影响。将可靠性目标设置得过高，比如 99.999% 或甚至 100%，意味着系统几乎无法失败，这使得难以向服务或应用程序添加新特性。
- en: Setting SLOs is an iterative process
  id: totrans-74
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置 SLO 是一个迭代过程。
- en: Reliability is the most important feature of a service, and setting SLOs allow
    monitoring systems to capture how the service is performing. When setting SLOs
    for the first time, it's possible to set SLOs based on past performance, taking
    an assumption that users are happy to start with. SLIs for these SLOs are based
    on existing monitoring systems and are considered as an initial baseline that
    must be met. Such SLOs are known as **achievable SLOs**, and any misses below
    the initial base line should result in directing engineering efforts to focus
    on getting reliability back to the initial baseline.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 可靠性是服务最重要的特性，设置 SLO 可以让监控系统捕获服务的表现。在首次设置 SLO 时，可以基于过去的表现设定 SLO，假设用户一开始是满意的。这些
    SLO 的 SLI 基于现有的监控系统，并被视为必须达到的初始基线。这类 SLO 被称为**可实现的 SLO**，任何低于初始基线的偏差应当引导工程工作集中在恢复可靠性到初始基线。
- en: How to get started with setting achievable SLOs
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 如何开始设置可实现的 SLO
- en: Metrics to set achievable SLOs can either be taken from the load balancer or
    backfilled from the logs. Both approaches give an insight into historical performance.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 用于设置可实现 SLO 的指标可以从负载均衡器获取，或者从日志中反向填充。这两种方法都能提供对历史性能的洞察。
- en: If SLOs need to be set in the absence of historical data or if historical data
    does not accurately reflect users' expectations, it is recommended to set an achievable
    target and then refine the target to closely match users' expectations and business
    needs. Such SLOs are known as **aspirational SLOs**. Monitoring systems will then
    use these metrics to track these SLOs.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在没有历史数据的情况下需要设置 SLO，或者历史数据无法准确反映用户期望，建议设置一个可实现的目标，然后根据用户期望和业务需求精细化目标。这类 SLO
    被称为**期望的 SLO**。监控系统随后将使用这些指标来跟踪这些 SLO。
- en: Once either achievable or aspirational SLOs are set, it's possible that new
    features are introduced to the service, but the probability for a service to be
    unreliable also increases. This can result in customers being unhappy even after
    meeting SLOs. This is an indication that monitoring metrics need to be revisited.
    SLOs need to be iteratively set and periodically re-evaluated. These metrics might
    have worked when originally set, but might not anymore.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦设定了可实现或期望的 SLO，服务可能会引入新特性，但服务不可靠的概率也会增加。这可能导致即便满足了 SLO，客户依然不满意。这表明监控指标需要重新审视。SLO
    需要进行迭代设置并定期重新评估。这些指标在最初设置时可能有效，但现在可能不再适用。
- en: 'Here are a few possible scenarios that call for SLOs to be re-evaluated:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些可能需要重新评估 SLO 的情况：
- en: New features were not considered in the metric calculation.
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新特性在指标计算中未被考虑。
- en: Service usage is now extended from desktop to mobile.
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务的使用已从桌面扩展到移动设备。
- en: Service usage is now extended to multiple geographies.
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务的使用现已扩展到多个地区。
- en: How frequently should SLOs be revisited or re-evaluated?
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: SLO 应该多久回顾或重新评估一次？
- en: It's recommended that SLOs be revisited or re-evaluated every 6 to 12 months
    to ensure that defined SLOs continue to match business changes and users' expectations.
  id: totrans-85
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 建议每 6 至 12 个月回顾或重新评估 SLO，以确保已定义的 SLO 继续与业务变化和用户期望保持一致。
- en: In addition to periodically revisiting SLOs, there are scenarios where a different
    SLO—more precisely, a tighter SLO—can be used when a spike in traffic is anticipated.
    For example, during holiday shopping, many businesses expect a significant spike
    in traffic, and in such scenarios, businesses can come up with a temporary strategy
    of tightening the SLO from 99.9% to 99.99%. This means system reliability is prioritized
    over a need or urge to release new features. The SLO targets are set back to their
    original value (in this example, back to 99.9%) when normal traffic resumes.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 除了定期回顾 SLO 外，当预期流量激增时，还可以使用不同的 SLO——更精确地说，是更严格的 SLO。例如，在假日购物期间，许多企业预期流量会显著激增，在这种情况下，企业可以制定一个临时策略，将
    SLO 从 99.9% 收紧到 99.99%。这意味着系统可靠性被优先考虑，而不是急于发布新功能。当正常流量恢复时，SLO 目标将恢复到原始值（在本例中为
    99.9%）。
- en: This completes the section on SLOs, with a deep insight into the need for reliability,
    setting reliability targets, and the way SLOs drive business decisions using SLIs.
    The next subsection introduces why SLOs need SLIs and is also a precursor before
    exploring SLIs in detail.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 这一部分完成了关于 SLO 的讨论，深入探讨了可靠性的需求、设置可靠性目标以及 SLO 如何通过 SLIs 推动业务决策。下一小节介绍了为什么 SLO
    需要 SLIs，也为深入探讨 SLIs 做了铺垫。
- en: SLOs need SLIs
  id: totrans-88
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: SLO 需要 SLI
- en: 'SLOs are specific numerical targets to define the reliability of a system.
    *SLOs are also used as a prioritization signal* to determine the balance between
    innovation and reliability. SLOs also help to differentiate happy and unhappy
    users. But the striking question is: *How do we measure SLOs*?'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: SLO 是定义系统可靠性的具体数值目标。*SLO 也是一种优先级信号*，用来平衡创新和可靠性之间的关系。SLO 还帮助区分快乐用户和不满用户。但引人深思的问题是：*我们如何衡量
    SLO*？
- en: SLOs are measured using SLIs. These are defined as a quantifiable measure of
    service reliability and specifically give an indication on how well a service
    is performing at a given moment of time. Service consumers have certain expectations
    from a service and SLIs are tied directly to those expectations. Examples of quantifiable
    SLIs are **latency**, **throughput**, **freshness**, and **correctness**. SLIs
    are expressed as a percentage of good events across valid events. SLOs are SLI
    targets aggregated over a period.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: SLO 通过 SLI 来衡量。SLI 定义为可量化的服务可靠性指标，具体显示服务在特定时刻的表现。服务消费者对服务有一定的期望，SLI 直接与这些期望挂钩。可量化的
    SLI 示例包括 **延迟**、**吞吐量**、**新鲜度** 和 **正确性**。SLI 以有效事件中的良好事件百分比表示。SLO 是在一段时间内汇总的
    SLI 目标。
- en: We'll get into more details about SLIs in the next section, *Exploring SLIs*.
    This includes categorizing SLIs by types of user journeys and elaborating on the
    ways to measure SLIs.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在下一节中深入探讨 SLIs，*探索 SLIs*。这包括按用户旅程类型对 SLIs 进行分类，并详细说明如何衡量 SLIs。
- en: Exploring SLIs
  id: totrans-92
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 探索 SLIs
- en: An SLI is a quantitative measure of the level of service provided with respect
    to some aspect of service reliability. Aspects of a service are directly dependent
    on potential user journeys, and each user journey can have a different set of
    SLIs. Once the SLIs are identified per user journey, the next critical step is
    to determine how to measure the SLI.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: SLI 是一种定量衡量服务可靠性某一方面的指标。服务的各个方面直接依赖于潜在的用户旅程，而每个用户旅程可以有不同的 SLI。确定每个用户旅程的 SLI
    后，下一步关键是确定如何衡量 SLI。
- en: This section describes the details around how to identify the right measuring
    indicators or SLIs by categorizing user journeys, the equation to measure SLIs,
    and ways to measure SLIs.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 本节介绍了如何通过对用户旅程进行分类来识别合适的衡量指标或 SLI、衡量 SLI 的公式以及衡量 SLIs 的方法。
- en: Categorizing user journeys
  id: totrans-95
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 分类用户旅程
- en: The reliability of a service is based upon the user's perspective. If a service
    offers multiple features, each feature will involve a set of user interactions
    or a sequence of tasks. This sequence of tasks that is critical to the user's
    experience offered by the service is defined as a **user journey**.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 服务的可靠性是基于用户的视角。如果服务提供多个功能，则每个功能都将涉及一组用户交互或一系列任务。定义为**用户旅程**的服务提供的用户体验的关键任务序列。
- en: 'Here are some examples of user journeys when using a video streaming service:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 使用视频流服务时的一些用户旅程示例如下：
- en: Browsing titles under a specific category—for example, *fiction*
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在特定类别下浏览标题——例如，*小说*
- en: Viewing an existing title from a user library
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查看用户库中现有的标题
- en: Purchasing an on-demand show or a live stream
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 购买点播节目或直播流
- en: Viewing a live stream
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查看直播流
- en: Each user journey can have a different expectation. These expectations can vary,
    from the speed at which the service responds to a user's request to the speed
    at which data is processed, to the freshness of the data displayed or to the durability
    at which data can be stored.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 每个用户旅程都可能有不同的期望。这些期望可以从服务响应用户请求的速度、数据处理速度、显示数据的新鲜程度，以及数据存储的持久性等方面变化。
- en: 'There could be a myriad user journeys across multiple services. For simplicity,
    user journeys can be classified into two popular categories, as follows:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 可能存在许多跨多个服务的用户旅程。为简单起见，用户旅程可以分为两个流行类别，如下所示：
- en: '**Request**/**response** user journey'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**请求**/**响应** 用户旅程'
- en: '**Data processing**/**pipeline**-based user journey'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据处理**/**流水线**-基于用户旅程'
- en: Each category defines specific characteristics. Each specific characteristic
    can represent an SLI type that defines the reliability of the service. These are
    specified in the following sections.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 每个类别定义了特定的特征。每个特定特征可以代表一种SLI类型，用于定义服务的可靠性。这些在以下各节中指定。
- en: Request/response user journey
  id: totrans-107
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 请求/响应用户旅程
- en: Availability, latency, and quality are the specific aspects or characteristics
    of SLIs that need to be evaluated as part of a request/response user journey.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 可用性、延迟和质量是请求/响应用户旅程作为SLI的具体方面或特征，需要进行评估。
- en: Availability
  id: totrans-109
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 可用性
- en: '**Availability** is defined as the proportion of valid requests served successfully.
    It''s critical for a service to be available to meet user''s expectations.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '**可用性** 定义为成功服务有效请求的比例。服务的可用性对满足用户期望至关重要。'
- en: 'To convert an availability SLI definition into an implementation, a key choice
    that needs to be made is: *How to categorize requests served as successful*?'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 要将可用性SLI定义转换为实施，需要做出一个关键选择：*如何将服务成功的请求分类*？
- en: To categorize requests served as successful, error codes can be used to reflect
    users' experiences of the service—for example, searching a video title that doesn't
    exist should not result in a `500` series error code. However, being unable to
    execute a search to check if a video title is present or not, should result in
    a `500` series error code.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 要将成功服务的请求分类，可以使用错误代码反映用户对服务的体验——例如，搜索不存在的视频标题不应导致`500`系列错误代码。然而，无法执行搜索以检查视频标题是否存在，应导致`500`系列错误代码。
- en: Latency
  id: totrans-113
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 延迟
- en: '**Latency** is defined as the proportion of valid requests served faster than
    a threshold. It''s an important indication of reliability when serving user-interactive
    requests. The system needs to respond within a timely fashion to consider it as
    interactive.'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '**延迟** 定义为在阈值以下提供有效请求的比例。在服务用户交互请求时，及时响应是可靠性的重要指标。'
- en: 'Latency for a given request is calculated as the time difference between when
    the timer starts and when the timer stops. To convert a latency SLI definition
    into an implementation, a key choice that need to be made is: *How to determine
    a threshold to classify responses as fast enough*?'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 对于给定请求的延迟是在计时器启动和停止之间的时间差。要将延迟SLI定义转换为实施，需要做出一个关键选择：*如何确定将响应分类为足够快*？
- en: 'To determine a threshold that classifies responses as fast enough, it''s important
    to first identify the different categories of user interactions and set thresholds
    accordingly per category. There are three ways to bucketize user interactions,
    outlined as follows:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 要确定将响应分类为足够快的阈值，首先要识别不同类别的用户交互，并相应地设定阈值。有三种方式来对用户交互进行分桶，具体如下：
- en: '**Interactive**—Refers to interactions where a user waits for the system to
    respond after clicking an element. Can also be referred to as **reads**, and a
    typical threshold is 1,000 ms.'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**交互式**——指用户在点击元素后等待系统响应的交互。也可称为**读取**，典型的阈值为 1,000 毫秒。'
- en: '**Write**—Refers to user interactions that make a change to the underlying
    service. A typical threshold is 1,500 ms.'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**写入**——指对底层服务进行更改的用户交互。典型的阈值为 1,500 毫秒。'
- en: '**Background**—Refers to user interactions that are asynchronous in nature.
    A typical threshold is 5,000 ms.'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**后台**——指用户的异步交互。典型的阈值为 5,000 毫秒。'
- en: Quality
  id: totrans-120
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 质量
- en: '**Quality** is defined as the proportion of valid requests served without degrading
    the service. It''s an important indication on how a service can fail gracefully
    when its dependencies are unavailable.'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '**质量**被定义为无服务降级地提供的有效请求的比例。这是一个重要的指标，用于判断当服务的依赖不可用时，服务如何优雅地失败。'
- en: 'To convert a quality SLI into an implementation, a key choice that needs to
    be made is: *How to categorize if responses are served with degraded quality*?
    To categorize responses served with degraded quality, consider a distributed system
    with multiple backend servers. If the incoming request is served by all backend
    services, then the request is processed without service degradations. However,
    if the incoming request is processed by all backend servers except one, then it
    indicates responses with degraded quality.'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 要将质量 SLI 转换为实现，必须做出一个关键选择：*如何判断响应是否因质量下降而被服务*？要对质量下降的响应进行分类，考虑一个拥有多个后端服务器的分布式系统。如果传入的请求由所有后端服务提供，那么请求将不受服务降级的影响。然而，如果传入的请求仅由所有后端服务器中的一个处理，则表示响应质量下降。
- en: If a request is processed with service degradation, the response should be marked
    as degraded, or a counter should be used to increment the count of degraded responses.
    As a result, a quality SLI can be expressed as a ratio of **bad events** to **total
    events** instead of a ratio of **good events** to **total events**.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 如果请求在服务降级的情况下处理，则应将响应标记为降级，或者应使用计数器增加降级响应的计数。因此，质量 SLI 可以表示为 **坏事件** 与 **总事件**
    的比率，而不是 **好事件** 与 **总事件** 的比率。
- en: How to categorize a request as valid
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 如何将请求分类为有效的
- en: To categorize a request as valid, different methodologies can be used. One such
    method is to use `400` errors are client-side errors and should be discarded while
    measuring the reliability of the service. `500` errors are server-side errors
    and should be considered as failures from a service-reliability perspective.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 要将请求分类为有效的，可以使用不同的方法。一个方法是使用 `400` 错误作为客户端错误，在衡量服务可靠性时应被丢弃。`500` 错误是服务器端错误，应从服务可靠性角度视为失败。
- en: Data processing/pipeline-based user journey
  id: totrans-126
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 基于数据处理/管道的用户旅程
- en: Freshness, correctness, coverage, and throughput are the specific aspects or
    characteristics of SLIs that need to be evaluated as part of a data processing/pipeline-based
    user journey. This is also applicable for batch-based jobs.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 新鲜度、正确性、覆盖率和吞吐量是 SLIs 需要评估的特定方面或特征，作为数据处理/管道基础的用户旅程的一部分。这同样适用于基于批处理的作业。
- en: Freshness
  id: totrans-128
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 新鲜度
- en: '**Freshness** is defined as the proportion of valid data updated more recently
    than a threshold. Freshness is an important indicator of reliability while processing
    a batch of data, as it is possible that the output might become less relevant
    over a period of time. This is primarily because new input data is generated,
    and if the data is not processed regularly or rebuilt to continuously process
    in small increments, then the system output will not effectively reflect the new
    input.'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '**新鲜度**被定义为比某个阈值更近期更新的有效数据的比例。新鲜度是处理一批数据时可靠性的一个重要指标，因为随着时间的推移，输出可能变得不再相关。主要是因为新的输入数据会被生成，如果数据没有定期处理或通过小的增量持续重建处理，那么系统输出将无法有效反映新的输入。'
- en: 'To convert a freshness SLI into an implementation, a key choice that needs
    be made is: *When to start and stop the timer to measure the freshness of data?*
    To categorize that the data processed is valid for SLI calculation, the correct
    source of input data or the right data processing pipeline job must be considered.
    For example, to calculate the freshness of weather-streaming content, data from
    a sports-streaming pipeline cannot be considered. This level of decision making
    can be achieved by implementing code and a rule-processing system to map the appropriate
    input source.'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 要将新鲜度 SLI 转换为实现，关键的选择是：*何时开始和停止计时器来衡量数据的新鲜度*？为了将已处理的数据分类为有效的 SLI 计算，必须考虑正确的输入数据来源或正确的数据处理管道任务。例如，若要计算天气流内容的新鲜度，则无法考虑来自体育流管道的数据。这种级别的决策可以通过实现代码和规则处理系统来完成，从而映射适当的输入源。
- en: To determine when to start and stop times to measure the freshness of data,
    it is important to include timestamps while generating and processing data. In
    the case of a batch processing system, data is considered fresh if the next set
    of data is not processed and generated. In other words, freshness is the time
    elapsed since the last time the batch processing system completed.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 为了确定何时开始和结束计时以衡量数据的新鲜度，生成和处理数据时包含时间戳是非常重要的。在批处理系统的情况下，如果下一批数据尚未处理和生成，则数据被视为新鲜。换句话说，新鲜度是自上次批处理系统完成以来经过的时间。
- en: In the case of an incremental streaming system, freshness refers to the age
    of the most recent record that has been fully processed. Serving stale data is
    a common way to degrade the response quality. Measuring stale data as degraded
    response quality is a useful strategy. If no user accesses the stale data, no
    expectations around the freshness of the data can have been missed. For this to
    be feasible, one option is to include a timestamp along with generating data.
    This allows the serving infrastructure to check the timestamp and accurately determine
    the freshness of the data.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 在增量流式系统中，"新鲜度"指的是已完全处理的最新记录的年龄。提供过时的数据是常见的质量下降方式。将过时的数据作为质量下降进行衡量是一种有效的策略。如果没有用户访问过时数据，则不会错过任何关于数据新鲜度的期望。为了实现这一点，一个选择是与生成数据一起包含时间戳。这允许服务基础设施检查时间戳，并准确判断数据的新鲜度。
- en: Correctness
  id: totrans-133
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 正确性
- en: '**Correctness** is defined as the proportion of valid data producing a correct
    output. It''s an important indication of reliability whereby processing a batch
    of data results in the correct output. To convert a correctness SLI into an implementation
    of it, a key choice that needs to be made is: *How to determine if the output
    records are correct*?'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '**正确性**被定义为生成正确输出的有效数据的比例。它是可靠性的一个重要指标，其中处理一批数据将得到正确的输出。将正确性 SLI 转换为其实现时，一个关键的选择是：*如何确定输出记录是否正确*？'
- en: To determine if the output records produced are correct, a common strategy is
    to use golden input data, also known as a set of input data that consistently
    produces the same output. This way, the produced output can be compared to the
    expected output from the golden input data.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 要判断输出记录是否正确，常见的策略是使用黄金输入数据，也称为一组始终产生相同输出的输入数据。通过这种方式，生成的输出可以与黄金输入数据的预期输出进行比较。
- en: Proactive testing practices—both manual and automated—are strongly recommended
    to determine correctness.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 强烈建议采用主动测试实践——包括手动和自动化测试——来判断正确性。
- en: Coverage
  id: totrans-137
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 覆盖率
- en: '**Coverage** is defined as the proportion of valid data processed successfully.
    It''s an important indication of reliability, whereby the user expects that data
    will be processed and outputs will subsequently also be available.'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '**覆盖率**被定义为成功处理的有效数据的比例。它是可靠性的一个重要指标，其中用户期望数据将被处理，并且随后也可以获得输出结果。'
- en: 'To convert a coverage SLI into an implementation, the choice that needs to
    be made is: *How to determine that a specific piece of data was processed successfully*?
    The logic to determine if a specific piece of data was processed successfully
    should be built into the service, and the service should also track the counts
    of success and failure.'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 要将覆盖率 SLI 转换为实现，需要做出的选择是：*如何判断特定数据是否已成功处理*？判断特定数据是否成功处理的逻辑应内置于服务中，并且服务应跟踪成功和失败的计数。
- en: The challenge comes when a certain set of records that were supposed to be processed
    are skipped. The proportion of the records that are not skipped can be known by
    identifying the total number of records that should be processed.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 挑战出现在本应处理的一组记录被跳过时。可以通过识别应该处理的记录总数来了解未被跳过的记录比例。
- en: Throughput
  id: totrans-141
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 吞吐量
- en: '**Throughput** is defined as the proportion of time where the data processing
    rate is faster than a threshold. It''s an important indicator of reliability of
    a data processing system, whereby it accurately represents user happiness and
    operates continuously on streams or small batches of data.'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '**吞吐量**定义为数据处理速率高于某个阈值的时间比例。它是数据处理系统可靠性的重要指标，准确代表了用户的满意度，并且在数据流或小批量数据上持续运行。'
- en: 'To convert a throughput SLI into an implementation, a key choice that needs
    to be made is: *What is the unit of measurement for data processing?* The most
    common unit of measurement for data processing is **bytes per second** (**B/s**).'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 要将吞吐量SLI转换为实施，一个关键选择是：*数据处理的度量单位是什么？* 数据处理最常见的度量单位是**每秒字节数**（**B/s**）。
- en: It is not necessary that all sets of inputs have the same throughput rate. Some
    inputs need to be processed faster and hence require higher throughput, while
    some inputs are typically queued and can be processed later.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 并不是所有输入集都需要具有相同的吞吐量。一些输入需要更快地处理，因此要求更高的吞吐量，而另一些输入通常会被排队，稍后处理。
- en: SLIs recommended for a data storage-based user journey
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 针对基于数据存储的用户旅程推荐的SLI
- en: Systems processing data can also be further classified into systems responsible
    for only storing data. So, a **data storage** user-based journey is another possible
    classification of a user journey where availability, durability, and end-to-end
    latency are additional recommended SLIs. Availability refers to data that could
    be accessed on demand from a storage system. **Durability** refers to the proportions
    of records written that could be successfully read from a storage system as and
    when required at that moment. **End-to-end latency** refers to the time taken
    to process a data request, from ingestion to completion.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 数据处理系统还可以进一步分类为仅负责存储数据的系统。因此，**数据存储**用户旅程是另一种可能的用户旅程分类，在这种分类中，可用性、耐久性和端到端延迟是其他推荐的SLI。可用性指的是可以按需从存储系统访问的数据。**耐久性**指的是写入的记录在需要时能够成功地从存储系统读取的比例。**端到端延迟**指的是处理数据请求的时间，从数据摄取到完成。
- en: 'The following table summarizes specific characteristics to represent an SLI
    type, grouped by the type of user journey:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 下表总结了具体特征，以表示不同类型的SLI，按用户旅程类型分组：
- en: '![](img/B15587_02_Table-02.jpg)'
  id: totrans-148
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15587_02_Table-02.jpg)'
- en: 'Given that there is a wide choice of SLIs to select from, Google recommends
    the following specific SLIs based on the type of systems:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于可以选择的SLI种类繁多，Google根据系统类型推荐以下特定的SLI：
- en: '**User-facing serving systems**: Availability (*Is it possible to respond to
    a request?*), latency (*How long will it take to respond?*), and throughput (*How
    many requests can be handled?*)'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**面向用户的服务系统**：可用性（*是否能够响应请求？*）、延迟（*响应需要多长时间？*）和吞吐量（*能够处理多少请求？*）'
- en: '**Storage systems**: Latency (*How long does it take to read or write data?*),
    availability (*Can the data be accessed on demand?*), and durability (*Is the
    data still available when there is a need?*)'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**存储系统**：延迟（*读取或写入数据需要多长时间？*）、可用性（*数据可以按需访问吗？*）和耐久性（*数据在需要时是否仍然可用？*）'
- en: '**Big data systems**: Throughput (*How much data can be processed?*) and end-to-end
    latency (*What is the time duration for data to progress from ingestion to completion?*)'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**大数据系统**：吞吐量（*可以处理多少数据？*）和端到端延迟（*数据从摄取到完成需要多长时间？*）'
- en: Given that we have looked at various factors that impact on determining SLIs
    specific to a user journey, the upcoming subsection will focus on the methodology
    and sources to measure SLIs.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于我们已经看到了影响确定特定用户旅程SLI的各种因素，接下来的小节将重点讨论测量SLI的方法论和来源。
- en: SLI equation
  id: totrans-154
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: SLI方程
- en: 'An SLI equation is defined as the proportion of valid events that were good,
    as illustrated here:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 一个SLI方程被定义为良好事件的有效比例，如下所示：
- en: '![](img/Formula_02_001.png)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Formula_02_001.png)'
- en: 'This equation has the following properties:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 该方程具有以下属性：
- en: SLIs are expressed as a percentage and fall between 0% and 100%. 100% refers
    to everything working, and 0% refers to everything being broken.
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SLI以百分比表示，范围在0%到100%之间。 100%表示一切正常，0%表示一切故障。
- en: SLIs consistently translate to percentage reliability, SLOs, and error budgets,
    and are also key inputs to **alerting logic**.
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SLI始终转化为百分比可靠性、SLO和错误预算，并且也是**警报逻辑**的关键输入。
- en: SLIs allow us to build common tooling to reflect the reliability of a service
    or system.
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SLI允许我们构建通用工具来反映服务或系统的可靠性。
- en: 'Valid events are determined as follows: for requests related to **HTTP Secure**
    (**HTTPS**), valid events are determined based on request parameters or response
    handlers. Request parameters can include hostname or request path. For requests
    related to data processing systems, valid events refer to the selection of specific
    inputs that scope to a subset of data.'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有效事件的确定方法如下：对于与**HTTP Secure**（**HTTPS**）相关的请求，有效事件是基于请求参数或响应处理程序来确定的。 请求参数可以包括主机名或请求路径。
    对于与数据处理系统相关的请求，有效事件是指选择特定输入，范围限定为数据的一个子集。
- en: This completes our summary of SLI equation and its associated properties. The
    next subsection details various popular sources to measure SLIs.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 这完成了我们对SLI方程及其相关属性的总结。 下一小节详细介绍了衡量SLI的各种流行来源。
- en: Sources to measure SLIs
  id: totrans-163
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 衡量SLI的来源
- en: 'Identifying potential user journeys for a service is the first important step
    to identify SLIs. Once SLIs to measure are identified, the next key step is to
    measure the SLIs so that corresponding alerts can be put in place. The key question
    in this process is: *How to measure and where to measure*?'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 识别服务的潜在用户旅程是识别SLI的第一步。 一旦确定了要衡量的SLI，下一步是衡量SLI，以便可以设置相应的警报。 这个过程中的关键问题是：*如何衡量以及在哪里衡量*？
- en: 'There are five popular sources or ways to measure SLIs, outlined as follows:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 有五个流行的来源或方式来衡量SLI，具体如下：
- en: Server-side logs
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务器端日志
- en: Application server
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用服务器
- en: Frontend infrastructure
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 前端基础设施
- en: Synthetic clients
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 合成客户端
- en: Telemetry
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 遥测
- en: Server-side logs
  id: totrans-171
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 服务器端日志
- en: 'Here are some details on how information from server-side logs can be used
    to measure SLIs:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是如何利用服务器端日志中的信息来衡量SLI的细节：
- en: Logs capture multiple request-response interactions over a long-running session.
    Stored logs give an option to get insights into historical performance of the
    service.
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日志捕获多个请求-响应交互，跨越一个长时间运行的会话。 存储的日志提供了获取服务历史性能洞察的选项。
- en: If starting out with setting SLOs (*SLOs need SLIs*), for a service, log data
    can be used to analyze historical events, reconstruct user interactions, and retroactively
    backfill the SLI information.
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果开始设置SLO（*SLO需要SLI*）以进行服务，日志数据可以用来分析历史事件、重建用户交互并追溯填充SLI信息。
- en: Complex logic can be added to the code itself where good events are clearly
    identified, and the information is captured in logs. (*This requires significant
    engineering efforts.*)
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以将复杂的逻辑添加到代码本身，其中良好的事件被清楚地标识，并且信息会被记录到日志中。 (*这需要大量的工程工作。*)
- en: 'Here are details of the limitations of using server-side logs to measure SLIs:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是使用服务器端日志衡量SLI的局限性详情：
- en: If an SLI needs to be used to trigger an emergency response, the time between
    the event occurrence and the event actually being measured should be minimal.
    Given that logs need to be ingested and processed, capturing SLIs from logs will
    add significant latency.
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果SLI需要触发紧急响应，事件发生和事件实际被衡量之间的时间应最小化。 考虑到日志需要被摄取和处理，从日志中捕获SLI会增加显著的延迟。
- en: Log-based SLIs cannot capture the requests that did not make it to the application
    server.
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于日志的SLI无法捕获未到达应用服务器的请求。
- en: Application server
  id: totrans-179
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 应用服务器
- en: 'Here are details on how information from the application server can be used
    to measure SLIs:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是如何利用应用服务器中的信息来衡量SLI的细节：
- en: Metrics captured at the application server are known as application-level metrics.
    These metrics are helpful in diagnosing issues with respect to the application.
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在应用服务器上捕获的指标被称为应用层指标。 这些指标有助于诊断与应用相关的问题。
- en: Application metrics can capture the performance of individual requests without
    measurement latency. In addition, these events could be aggregated over time.
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用指标可以捕获单个请求的性能，而不会增加衡量延迟。 此外，这些事件可以随时间汇总。
- en: 'Here are details of the limitations of using the application server to measure
    SLIs:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是使用应用服务器衡量SLI的局限性详情：
- en: Application metrics cannot capture complex multi-request user journeys.
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序指标无法捕捉复杂的多请求用户旅程。
- en: Application-based SLIs cannot capture requests that do not make it to the application
    server.
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于应用的SLI无法捕捉到未到达应用服务器的请求。
- en: What is a complex multi-request user journey?
  id: totrans-186
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 什么是复杂的多请求用户旅程？
- en: A complex multi-request user journey will include a sequence of requests, which
    is a core part of a user consuming a service such as searching a product, adding
    a product to a shopping cart, and completing a purchase. Application metrics cannot
    capture metrics for the user journey but can capture metrics related to individual
    steps.
  id: totrans-187
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 一个复杂的多请求用户旅程将包括一系列请求，这是用户消费服务的核心部分，例如搜索产品、将产品添加到购物车并完成购买。应用程序指标无法捕捉用户旅程的度量，但可以捕捉与单个步骤相关的度量。
- en: Frontend infrastructure
  id: totrans-188
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 前端基础设施
- en: 'Here are details of how information from frontend infrastructure can be used
    to measure SLIs:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是如何使用前端基础设施的信息来测量SLI的详细信息：
- en: Frontend infrastructure refers to load balancers. This could be a vendor-based
    load balancer (such as *F5*) or a cloud-provider based load balancer (such as
    *Google Cloud Load Balancer*).
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 前端基础设施是指负载均衡器。这可以是基于供应商的负载均衡器（例如*F5*）或基于云服务提供商的负载均衡器（例如*Google Cloud Load Balancer*）。
- en: Most of the distributed applications use a load balancer, and this is the first
    point of interaction for a user's request before it is sent to the actual application.
    This makes the load balancer the closest point to the user and fewer requests
    go unmeasured.
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大多数分布式应用程序使用负载均衡器，这是用户请求发送到实际应用程序之前的第一个交互点。这使得负载均衡器成为最接近用户的点，且较少的请求会被遗漏度量。
- en: Cloud providers typically capture multiple metrics for the incoming requests
    to the load balancer out of the box. This information might be readily available,
    including historical data too. If the capture of data was not configured for some
    reason, it can be easily configured. Either way, information will be available
    without investing engineering efforts (*as compared to capturing metrics from
    application logs*).
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 云服务提供商通常会为负载均衡器接收到的请求捕捉多个度量，这些信息可能是现成可用的，包括历史数据。如果由于某种原因未配置数据捕捉，则可以轻松配置。无论如何，这些信息将是可用的，无需投入工程精力（*与从应用日志捕捉度量相比*）。
- en: Load balancers capture metrics related to requests that do not make it to the
    application server.
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 负载均衡器捕捉到的度量与未到达应用服务器的请求相关。
- en: 'Here are details of the limitations of using a frontend infrastructure to measure
    SLIs:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是使用前端基础设施测量SLI的限制的详细信息：
- en: Load balancers can either be **stateful** or **stateless**. If stateless, then
    the load balancers cannot track user sessions and hence cannot be used to capture
    metrics tied to user interactions.
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 负载均衡器可以是**有状态的**或**无状态的**。如果是无状态的，那么负载均衡器无法追踪用户会话，因此无法用于捕捉与用户交互相关的度量。
- en: Given that load balancers typically act as a **traffic cop**, routing user requests
    to application servers that are capable of handling the requests, load balancers
    do not inherently have control over the response data returned by the application.
    Instead, load balancers are dependent on the application to set the metadata accurately
    on the response envelope.
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 鉴于负载均衡器通常充当**交通警察**，将用户请求路由到能够处理请求的应用服务器，负载均衡器本身并不控制由应用程序返回的响应数据。相反，负载均衡器依赖于应用程序在响应信封上准确地设置元数据。
- en: The dependency on the application to set the right metadata on the response
    envelope is a conflict of interest because it is the same application that is
    generating the metrics.
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 依赖应用程序在响应信封上设置正确的元数据是一个利益冲突，因为生成度量的正是这个应用程序。
- en: Synthetic clients
  id: totrans-198
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 合成客户端
- en: 'Here are details of how information from synthetic clients can be used to measure
    SLIs:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是如何使用合成客户端的信息来测量SLI的详细信息：
- en: Synthetic clients provide **synthetic monitoring**, a monitoring technique that
    monitors the application by emulating or simulating user interactions based on
    a recorded set of transactions.
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 合成客户端提供**合成监控**，这是一种通过模拟或仿真基于一组已记录的事务的用户交互来监控应用程序的监控技术。
- en: Synthetic clients can emulate user interactions that constitute a user journey
    from a point outside the infrastructure, and hence can verify the responses.
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 合成客户端可以模拟构成用户旅程的用户交互，这些交互发生在基础设施之外，因此可以验证响应。
- en: 'Here are details of the limitations of using synthetic clients to measure SLIs:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是使用合成客户端测量SLI的限制的详细信息：
- en: Synthetic clients simulate a user's behavior, and hence it's an approximation.
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 合成客户端模拟用户的行为，因此它是一种近似值。
- en: Synthetic clients need complex integration tests that could cover multiple edge
    cases, thus resulting in a significant engineering effort.
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 合成客户端需要复杂的集成测试，覆盖多个边缘情况，因此需要大量的工程工作。
- en: Synthetic clients need maintenance to add new user simulations if new user behavior
    patterns emerge that were not previously accounted for.
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果出现新的用户行为模式，合成客户端需要维护以添加新的用户模拟，而这些行为模式之前并未考虑到。
- en: Telemetry
  id: totrans-206
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 遥测
- en: 'Telemetry refers to remote monitoring from multiple data sources and is not
    restricted to capture metrics related to application health, but can be extended
    to capture security analytics such as suspicious user activity, unusual database
    activity, and so on. Here are details of how information from telemetry can be
    used to measure SLIs:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 遥测是指来自多个数据源的远程监控，不仅限于捕获与应用程序健康相关的指标，还可以扩展到捕获安全分析，如可疑的用户活动、不寻常的数据库活动等。以下是遥测信息如何用于衡量
    SLI 的细节：
- en: Instrumenting clients to implement telemetry metrics helps to measure the reliability
    of third-party integration systems such as a **content delivery network** (**CDN**).
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为客户端添加遥测指标有助于衡量第三方集成系统的可靠性，例如**内容分发网络**（**CDN**）。
- en: O**penTelemetry** is the most popular instrumentation mechanism to capture traces
    and metrics. It replaces **OpenTracing** and **OpenCensus**, which were individually
    focused on capturing tracing and metrics respectively.
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**OpenTelemetry** 是最流行的仪表机制，用于捕获跟踪和指标。它取代了**OpenTracing** 和 **OpenCensus**，这两个项目分别专注于捕获跟踪和指标。'
- en: What is OpenTelemetry?
  id: totrans-210
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 什么是 OpenTelemetry？
- en: '**OpenTelemetry** is a unified standard for service instrumentation. It provides
    a set of **application programming interfaces** (**APIs**)/libraries that are
    vendor-agnostic and standardizes how to collect and send data to compatible backends.
    OpenTelemetry is an open source project that is part of the **Cloud Native Computing
    Foundation** (**CNCF**).'
  id: totrans-211
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**OpenTelemetry** 是一种统一的服务仪表标准。它提供了一套**应用程序编程接口**（**API**）/库，具有供应商中立性，并标准化了如何收集和发送数据到兼容的后端。OpenTelemetry
    是一个开源项目，属于**云原生计算基金会**（**CNCF**）。'
- en: 'Here are details of the limitations of using telemetry to measure SLIs:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是使用遥测来衡量 SLI 的限制细节：
- en: Ingesting metrics from different sources increases latency and will pose the
    same issues encountered when capturing metrics from processing logs, thus this
    is not a good fit for triggering emergency responses.
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从不同来源获取指标会增加延迟，并且会遇到捕获处理日志时所遇到的相同问题，因此这不适合用于触发紧急响应。
- en: If telemetry is implemented in-house, it requires a significant engineering
    effort. However, there are vendors that provide the same capability, but there
    is a risk of vendor lock-in.
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果遥测是内部实现的，它需要大量的工程工作。然而，也有供应商提供相同的能力，但存在供应商锁定的风险。
- en: This completes an elaboration of five different sources to measure SLIs. Given
    that each source has its own limitations, there is no best source to measure SLIs.
    In most cases, a combination of sources is always preferred. For example, if an
    organization is getting started with their SRE practice, usage of server-side
    logs to backfill SLIs and frontend infrastructure to readily use the metrics from
    the load balancer might be a good way to start. It can later be extended to capturing
    metrics from the application server, but given it doesn't support complex multi-request
    user journeys, an organization can later shift to the use of telemetry or synthetic
    clients based on their need. The next subsection summarizes a few SLI best practices
    as recommended by Google.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 以上完成了衡量 SLI 的五个不同来源的详细说明。由于每个来源都有其自身的限制，因此没有最佳来源来衡量 SLI。在大多数情况下，始终推荐使用多个来源的组合。例如，如果一个组织刚开始进行
    SRE 实践，可以使用服务器端日志来回填 SLI，并使用前端基础设施直接从负载均衡器获取指标，作为起步的好方法。稍后可以扩展到从应用服务器捕获指标，但考虑到它不支持复杂的多请求用户旅程，组织可以根据需求转向使用遥测或合成客户端。下一小节总结了
    Google 推荐的几条 SLI 最佳实践。
- en: SLI best practices (Google-recommended)
  id: totrans-216
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: SLI 最佳实践（Google 推荐）
- en: 'It''s a tedious task for an organization that would like to start on their
    SRE journey, and a key aspect of this journey is to identify, define, and measure
    SLIs. Here is a list of Google-recommended best practices:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 对于希望开始 SRE 之旅的组织来说，这是一项繁琐的任务，旅程的关键部分是识别、定义和衡量 SLI。以下是 Google 推荐的最佳实践：
- en: '**Prioritize user journeys**: Select user journeys that reflect features offered
    by the service and the user''s affinity to those features.'
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**优先考虑用户旅程**：选择反映服务所提供特性和用户对这些特性亲和力的用户旅程。'
- en: '**Prioritize user journeys from the selected list**: The user journey to purchase
    or watch a streaming event is more important than rating a video.'
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**优先考虑选定列表中的用户旅程**：购买或观看流媒体事件的用户旅程比给视频评分更为重要。'
- en: '**Limit number of SLIs**: Keep it to three to five SLIs per user journey. More
    SLIs will make it complex to manage for the operators.'
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**限制SLI的数量**：每个用户旅程保持三到五个SLI。更多的SLI会使运维人员管理起来更复杂。'
- en: '**Collect data via frontend infrastructure**: Collecting at load balancer level
    is closer to a user''s experience and requires less engineering effort.'
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**通过前端基础设施收集数据**：在负载均衡器级别收集数据更接近用户的体验，且需要的工程工作较少。'
- en: '**Aggregate similar SLIs**: Collect data over a period. Convert metric information
    captured into rate, average, or percentile.'
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**汇总相似的SLI**：在一段时间内收集数据。将捕获的度量信息转换为比率、平均值或百分位。'
- en: '**Keep it simple**: Complex metrics require significant engineering effort
    but might also increase response time. If response time increases, then the metric
    will not be suitable for emergency situations.'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**保持简单**：复杂的度量需要大量工程工作，但也可能增加响应时间。如果响应时间增加，那么该度量将不适用于紧急情况。'
- en: 'This completes a comprehensive deep dive on SLIs, with a focus on categorizing
    user journeys, identifying specific aspects that impact a user journey, various
    sources to measure, and recommended best practices to define SLIs. To summarize,
    there are four critical steps for choosing SLI, listed as follows:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 这完成了对SLI的全面深入分析，重点是分类用户旅程、识别影响用户旅程的具体因素、各种度量来源以及定义SLI的推荐最佳实践。总结来说，选择SLI有四个关键步骤，列举如下：
- en: Choose an SLI specification based on a suitable user journey.
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据合适的用户旅程选择一个SLI规范。
- en: Refine a specification into a detailed SLI implementation.
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将规范细化为详细的SLI实现。
- en: Walk through the user journey and identify implementation gaps.
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 跟踪用户旅程并识别实现差距。
- en: Set aspirational SLO targets based on business needs.
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据业务需求设定有远见的SLO目标。
- en: The upcoming section focusses on error budgets, which are used to achieve reliability
    by maintaining a balance with release velocity.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的章节聚焦于错误预算，它们用于通过保持发布速度的平衡来实现可靠性。
- en: Understanding error budgets
  id: totrans-230
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解错误预算
- en: Once SLOs are set based on SLIs specific to user journeys that define system
    availability and reliability by quantifying users' expectations, it is important
    to understand how unreliable the service is allowed to be. This acceptable level
    of unreliability or unavailability is called an **error budget**.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦基于特定用户旅程的SLI设定了SLO，这些SLO通过量化用户的期望来定义系统的可用性和可靠性，就需要理解服务允许的不可靠程度。这个可接受的不可靠性或不可用性水平被称为**错误预算**。
- en: The unavailability or unreliability of a service can be caused due to several
    reasons, such as planned maintenance, hardware failure, network failures, bad
    fixes, and new issues introduced while introducing new features.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 服务的不可用或不可靠可能由多种原因造成，如计划维护、硬件故障、网络故障、错误修复和在引入新特性时出现的新问题。
- en: Error budgets put a quantifiable target on the amount of unreliability that
    could be tracked. They create a common incentive between development and operations
    teams. This target is used to balance the urge to push new features (*thereby
    adding innovation to the service*) against ensuring service reliability.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 错误预算为可追踪的不可用量设定了量化目标。它们在开发和运维团队之间创造了共同的激励。这一目标用于平衡推动新特性（*从而为服务添加创新*）的冲动与确保服务可靠性之间的关系。
- en: 'An error budget is basically the inverse of availability, and it tells us how
    unreliable your service is allowed to be. If your SLO says that 99.9% of requests
    should be successful in a given quarter, your error budget allows 0.1% of requests
    to fail. This unavailability can be generated because of bad pushes by the product
    teams, planned maintenance, hardware failures, and other issues:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 错误预算基本上是可用性的反面，它告诉我们服务允许的不可靠程度。如果SLO规定在一个季度内99.9%的请求应成功，那么错误预算允许0.1%的请求失败。这种不可用性可能是由于产品团队的不当推送、计划维护、硬件故障和其他问题引起的：
- en: '![](img/Formula_01_005.png)'
  id: totrans-235
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Formula_01_005.png)'
- en: Here's an example. If SLO says that 99.9% of requests should be successful in
    a given quarter, then 0.1% is the error budget.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个示例。如果SLO规定在一个季度内99.9%的请求应成功，那么0.1%就是错误预算。
- en: 'Let''s calculate the error budget, as follows:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们计算错误预算，如下所示：
- en: '*If SLO = 99.9%, then error budget = 0.1% = 0.001*'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: '*如果SLO = 99.9%，则错误预算 = 0.1% = 0.001*'
- en: '*Allowed downtime per month = 0.001 * 30 days/month * 24 hours/day * 60 minutes/hour
    = 43.2 minutes/month*'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: '*每月允许的停机时间 = 0.001 * 30天/月 * 24小时/天 * 60分钟/小时 = 43.2分钟/月*'
- en: This introduces the concept of an error budget. The next subsection introduces
    the concept of an error budget policy and details the need for executive buy-in
    with respect to complying with the error budget policy.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 这引入了错误预算的概念。下一小节将介绍错误预算政策的概念，并详细说明高层支持在遵守错误预算政策方面的重要性。
- en: Error budget policy and the need for executive buy-in
  id: totrans-241
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 错误预算政策和高层支持的必要性
- en: If reliability is the most important feature of a system, an **error budget
    policy** represents how a business balances reliability against other features.
    Such a policy helps a business to take appropriate actions when the reliability
    of the service is at stake. The key to defining an error budget policy is to actually
    decide the SLO for the service. If the service is missing SLO targets, which means
    the error budget policy is violated, then there should be consequences. These
    consequences should be enforced by generating executive buy-in. Operations teams
    should have an influence on the impact of the development team's practices by
    halting the release of new features if the service is getting very close to exhausting
    the error budget or has exceeded the error budget.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 如果可靠性是系统最重要的特性，那么**错误预算政策**代表了企业如何在可靠性与其他特性之间进行平衡。这样的政策有助于企业在服务可靠性面临风险时采取适当的行动。定义错误预算政策的关键是实际确定服务的SLO。如果服务未达到SLO目标，意味着错误预算政策被违反，那么就应该有相应的后果。这些后果应通过高层支持来执行。运营团队应当影响开发团队实践的结果，如果服务接近耗尽错误预算或已超出错误预算，应暂停发布新功能。
- en: Error budgets can be thought of as funds that are meant to be spent across a
    given time period. These funds can be spent on releasing new features, rolling
    out software updates, or managing incidents. An error budget is basically the
    inverse of availability, and it tells us how unreliable your service is allowed
    to be. If your SLO says that 99.9% of requests should be successful in a given
    quarter, your error budget allows 0.1% of requests to fail. This unavailability
    can be generated because of bad pushes by the product teams, planned maintenance,
    hardware failures, and so on. The next subsection lists out the characteristics
    of an effective error budget policy.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 错误预算可以被看作是计划在给定时间段内支出的资金。这些资金可以用于发布新特性、推出软件更新或管理事件。错误预算本质上是可用性的逆向概念，它告诉我们服务可以容忍的不可用程度。如果你的SLO规定在某个季度99.9%的请求应该是成功的，那么你的错误预算允许0.1%的请求失败。这种不可用性可能是由于产品团队的错误推送、计划中的维护、硬件故障等原因造成的。下一小节列出了有效错误预算政策的特征。
- en: Characteristics of an effective error budget policy
  id: totrans-244
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 有效错误预算政策的特征
- en: 'An error budget policy should have the following characteristics:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 一个错误预算政策应具有以下特征：
- en: An overview of the service
  id: totrans-246
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务概述
- en: A list of intended goals
  id: totrans-247
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预期目标列表
- en: A list of non-goals; also referred to as a potential requirement that has been
    specifically excluded
  id: totrans-248
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 非目标列表；也称为被特别排除的潜在需求
- en: A list of *DO*s and *DON'T*s based on whether a service performs above its SLO
    or misses its SLO
  id: totrans-249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 根据服务是否超出或未达SLO，列出*应该做的*和*不应该做的*事项
- en: A list of consequences when a service misses its SLO
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当服务未能达到其SLO时的后果列表
- en: A detailed outage policy that defines the criteria to call out an incident and
    a need for a follow-up to ensure the incident doesn't happen again
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 详细的停机政策，定义何时称为事件以及需要跟进以确保该事件不再发生
- en: A clearly laid-out escalation policy that identifies the decision maker in the
    event of a disagreement
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 明确的升级政策，识别在出现分歧时的决策者
- en: The preceding list of characteristics clearly calls out the fact that it is
    extremely necessary to have well-documented SLOs to define an effective error
    budget policy. This will be discussed in the next subsection.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 前述特性列表清楚地指出，拥有良好的SLO文档对于定义有效的错误预算政策是极其必要的。这个问题将在下一小节讨论。
- en: Error budgets need well-documented SLOs
  id: totrans-254
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 错误预算需要有良好的SLO文档
- en: The key to defining an error budget is to actually to decide the SLOs for the
    service. SLOs clearly differentiate between reliable services and unreliable services,
    thus extending it to identify happy versus unhappy users. SLOs should be clearly
    defined without any ambiguity and should be agreed by product owners, developers,
    SREs, and executives.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 定义错误预算的关键在于实际决定服务的 SLO（服务级别目标）。SLO 清晰地区分了可靠服务和不可靠服务，从而扩展到区分高兴的用户和不高兴的用户。SLO
    应该被清晰地定义，不应有任何模糊性，并且应该得到产品负责人、开发人员、SRE 和高管的一致同意。
- en: 'In addition to implementing an SLO and configuring a monitoring system to alert
    on the SLO, the following characteristics are recommended for a well-documented
    SLO in terms of metadata:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 除了实施 SLO 并配置监控系统来对 SLO 进行警报外，以下是推荐的 SLO 元数据文档特性：
- en: The need for an SLO and thought process behind the specific SLO target
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SLO 的需求以及制定具体 SLO 目标的思考过程
- en: A list of owners for SLOs
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SLO 的所有者列表
- en: The impact in case of SLO miss
  id: totrans-259
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SLO 未达成时的影响
- en: SLIs tied with the SLOs
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与 SLO 相关联的 SLIs（服务级别指标）
- en: Any specific events that are included or excluded from the calculation
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 包括或排除在计算中的特定事件
- en: Version control of the SLO documentation (*this gives an insight into reasons
    for changing SLOs as they get refined over a period*)
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SLO 文档的版本控制（*这可以洞察 SLO 在一段时间内精炼过程中的变更原因*）
- en: The next subsection discusses multiple options to set error budgets.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 下一小节将讨论设置错误预算的多种选项。
- en: Setting error budgets
  id: totrans-264
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置错误预算
- en: 'Error budgets can be thought as funds that are meant to be spent across a given
    time period. These funds can be spent on releasing new features or rolling out
    software updates or managing incidents. But this raises several questions, such
    as the following:'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 错误预算可以被视为计划在给定时间段内使用的资金。这些资金可以用来发布新功能、推出软件更新或处理事件。但这也引发了几个问题，例如：
- en: What is the right time to spend error budgets? At the start of the month or
    the end of the month?
  id: totrans-266
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 花费错误预算的最佳时机是什么？是月初还是月末？
- en: What happens if the error budget gets exhausted and there is an emergency?
  id: totrans-267
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果错误预算用尽且发生了紧急情况，会怎样？
- en: What happens if the error budget is not exhausted? Can it be carried over?
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果错误预算没有用尽，会怎样？可以转移到下一个周期吗？
- en: 'Different strategies can be used to determine the right time to spend error
    budgets within a time period. Let''s assume the time period is 28 days. There
    could be three potential options, listed as follows:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用不同的策略来确定在一个时间周期内花费错误预算的最佳时机。假设时间周期是 28 天。以下是三种潜在选项：
- en: '**Option #1** is to spend a portion of the error budget at the start (of the
    28 days) to push new features or updates and use the remaining error budget for
    potential reliability maintenance in the event of an incident.'
  id: totrans-270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**选项 #1** 是在周期开始时（28 天的开始）花费部分错误预算来推动新功能或更新，并将剩余的错误预算用于可能的可靠性维护，以应对潜在事件。'
- en: '**Option #2** is to spend an error budget to push new features or updates after
    elapsing half of the time period (say, 14 days), since it gives an idea on how
    much error budget was used in the first half for maintaining system reliability.'
  id: totrans-271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**选项 #2** 是在经过一半时间周期（比如 14 天）后，使用错误预算来推动新功能或更新，因为这样可以了解在前半段时间里，为了维持系统可靠性所使用的错误预算。'
- en: '**Option #3** is to spend any remaining error budget toward the latter part
    of the time period in pushing new features or updates to ensure focus is on system
    reliability till then.'
  id: totrans-272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**选项 #3** 是在时间周期的后半段，使用剩余的错误预算来推动新功能或更新，以确保在此之前，系统的可靠性得到关注。'
- en: Any of the preceding options or a combination of the three can be used to define
    a dynamic release process, and it all depends on what developers and operations
    team agree upon based on current business needs and past performance. The dynamic
    release process can be implemented by setting alerts based on error budget exhaustion
    rates.
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 任何上述选项或三者的组合都可以用于定义一个动态发布过程，具体取决于开发人员和运营团队基于当前业务需求和过去表现达成的共识。可以通过根据错误预算的耗尽速率设置警报来实现动态发布过程。
- en: If the error budget of a service is exhausted but the development team needs
    to push a new feature as an exception scenario, SRE provisions this exception
    using **silver bullets**.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 如果服务的错误预算用尽，但开发团队需要作为例外情况推动新功能，SRE 将使用 **银弹** 来处理这个例外。
- en: Envision silver bullets as tokens that could be given to the operations team
    to facilitate an exception to release new features when having exceeded the error
    budget. These tokens reside with a senior stakeholder and the development team
    needs to pitch the need to use silver bullets to the stakeholder. A fixed number
    of such tokens are given to the stakeholder and these are not carried over to
    the next time period. In addition to the use of silver bullets, SRE also recommends
    the use of rainy-day funds whereby a certain amount of the error budget is additionally
    provided to handle unexpected events.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 将银弹视为可给予运营团队的令牌，用以在超过错误预算的情况下允许发布新功能。这些令牌由高级利益相关者持有，开发团队需要向利益相关者陈述使用银弹的必要性。一定数量的银弹令牌交给利益相关者，并且这些令牌不可以转移到下一个时间周期。除了使用银弹之外，SRE
    还建议使用备用资金，即在处理意外事件时提供一定量的错误预算。
- en: Error budgets cannot be carried over to the next time period. So, in all practicality,
    the goal is to spend the error budget by the end of the time period. Constantly
    exhausting error budgets and repeated use of silver bullets should call for a
    review, where engineering efforts should be invested in making the service more
    reliable by improving the service code and by adding integration tests.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 错误预算不能转移到下一个时间周期。因此，实际上，目标是要在当前时间周期结束之前花完错误预算。不断耗尽错误预算和重复使用银弹应当引起审查，工程团队应当投入精力通过改进服务代码和添加集成测试来提升服务的可靠性。
- en: The use of dynamic release cadence, error budget exhaustion rates, silver bullets,
    and rainy-day funds are advanced techniques prescribed by SRE to manage error
    budgets. This completes the subsection on defining characteristics for an effective
    error budget policy, listing out characteristics for well-documented SLOs and
    discussing options to set error budgets. The next subsection details factors that
    are critical in ensuring that a service stays reliable and does not exhaust the
    error budget.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 动态发布节奏、错误预算耗尽率、银弹策略和备用资金等方法是 SRE 提出的先进技术，用于管理错误预算。这完成了关于有效错误预算策略定义特征的小节，列出了文档完善的
    SLO（服务水平目标）的特征，并讨论了设置错误预算的选项。接下来的小节详细介绍了确保服务保持可靠并避免耗尽错误预算的关键因素。
- en: Making a service reliable
  id: totrans-278
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 提高服务可靠性
- en: 'When a service exhausts its error budget or repeatedly comes close to exhausting
    the same, engineering teams should focus on making a service reliable. This raises
    the next obvious question: *How can the engineering teams make a service more
    reliable to meet users'' expectations?*'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 当服务耗尽其错误预算或反复接近耗尽时，工程团队应将重点放在提高服务可靠性上。这引出了下一个显而易见的问题：*工程团队如何才能提高服务的可靠性，以满足用户的期望？*
- en: 'To get deeper insights into this, it''s critical to consider the following
    key factors essential to determine the potential impact on the service:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 为了深入了解这一点，必须考虑以下关键因素，这些因素对确定服务潜在影响至关重要：
- en: '**Time to detect** (**TTD**)—Defined as the difference in time from when the
    issue first occurred to the time that the issue was first observed or reported.
    Example: If an issue occurred at 10 a.m. but was reported or observed at 10:30
    a.m., then the TTD in this scenario is 30 minutes.'
  id: totrans-281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**检测时间**（**TTD**）—定义为从问题首次发生到问题首次被观察或报告的时间差。例如：如果一个问题发生在上午 10 点，但在上午 10:30
    被报告或观察，那么此情况下的 TTD 为 30 分钟。'
- en: '**Time to resolve** (**TTR**)—Defined as the difference in time from when the
    issue was first observed or reported to the time that the issues was resolved.
    Example: If an issue was first observed or reported at 10:30 a.m. but was resolved
    at 10:45 a.m., then the TTR in this scenario is 15 minutes.'
  id: totrans-282
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**解决时间**（**TTR**）—定义为从问题首次观察或报告到问题解决的时间差。例如：如果一个问题在上午 10:30 被首次观察或报告，但在上午 10:45
    解决，那么此情况下的 TTR 为 15 分钟。'
- en: '**Time to fail** (**TTF**)—Defined as how frequently the service is expected
    to fail. TTF is also known as **Time Between Failures**, or **TBF**.'
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**故障时间**（**TTF**）—定义为服务预期发生故障的频率。TTF 也被称为**故障间隔时间**（**TBF**）。'
- en: '**Impact %**—Percentage of impact in terms of impacted users or impacted functional
    areas.'
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**影响百分比**（**Impact %**）—表示受影响用户或受影响功能区域的百分比。'
- en: 'The expected impact is proportional to the following expression:'
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 预期的影响与以下公式成正比：
- en: '![](img/Formula_02_003.png)'
  id: totrans-286
  prefs: []
  type: TYPE_IMG
  zh: '![](img/Formula_02_003.png)'
- en: 'Reliability can be improved by implementing the following options:'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 通过实施以下选项可以提高可靠性：
- en: 'Reducing detection time: Reduce TTD'
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 缩短检测时间：减少 TTD
- en: 'Reducing repair time: Reduce TTR'
  id: totrans-289
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 减少修复时间：减少TTR
- en: 'Reduce impact %: Reduce the impacted users/functional areas'
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 减少影响百分比：减少受影响的用户/功能区域
- en: 'Reduce frequency: Increasing TTF'
  id: totrans-291
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 减少频率：增加TTF
- en: Operational improvement
  id: totrans-292
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 操作性改进
- en: Let's discuss each option in detail, next.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们详细讨论每个选项。
- en: Reduce detection time (TTD)
  id: totrans-294
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 减少检测时间（TTD）
- en: 'TTD can be reduced by the following approaches:'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过以下方法减少TTD：
- en: Add automated alerting that alerts a user rather than the user manually detecting
    an issue by noticing an abnormality from the metrics dashboard.
  id: totrans-296
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加自动化警报，提醒用户，而不是让用户通过注意到度量仪表板上的异常来手动检测问题。
- en: Add monitoring to measure SLO compliance. This helps to know how quickly the
    error budget is being consumed or whether the service is performing within its
    target SLOs.
  id: totrans-297
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加监控以衡量SLO合规性。这有助于了解错误预算消耗的速度，或服务是否在目标SLO内运行。
- en: Reduce repair time (TTR)
  id: totrans-298
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 减少修复时间（TTR）
- en: 'TTR can be reduced by the following approaches:'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: TTR可以通过以下方法减少：
- en: Develop a playbook that makes it easier to parse and collate server debug logs.
    This will help the onsite engineers to quickly address the problem at hand. If
    a new pattern was detected, then the playbook should be updated.
  id: totrans-300
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 制定一本操作手册，简化服务器调试日志的解析和汇总。这将帮助现场工程师快速解决当前的问题。如果检测到新模式，应更新操作手册。
- en: Automate manual tasks such as increasing disk space to an acceptable percentage
    of current disk space, draining zone or rerouting traffic.
  id: totrans-301
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动化手动任务，例如将磁盘空间增加到当前磁盘空间的可接受百分比，清理区域或重新路由流量。
- en: Collect relevant information for a specific scenario, which will save time for
    the on-call team and will allow them to get a head start with their investigation.
  id: totrans-302
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 收集特定场景的相关信息，这将为值班团队节省时间，并帮助他们在调查时抢占先机。
- en: Reduce impact %
  id: totrans-303
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 减少影响百分比
- en: 'Impact % can be reduced by the following approaches:'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 影响百分比可以通过以下方法减少：
- en: Roll out a new feature to a limited number of users through a percentage-based
    rollout within a given amount of time. This reduces the impact percentage to that
    specific user group. The rollout percentage can be gradually increased from 0.1%
    of users to 1%, then later to 10%, and eventually 100%. In this way, the releases
    are staggered.
  id: totrans-305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过基于百分比的发布将新功能推送给有限数量的用户，并在规定的时间内逐步增加。这会将影响百分比限制在特定的用户组。发布百分比可以从0.1%的用户逐步增加到1%，然后到10%，最终达到100%。通过这种方式，发布是分阶段进行的。
- en: Engineer a service to run in a degraded mode during a failure, such as switching
    to allow read-only actions and not writes, thus reducing the impact.
  id: totrans-306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在故障发生时，使服务以降级模式运行，例如切换到只允许读取操作而不允许写入，从而减少影响。
- en: Reduce frequency
  id: totrans-307
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 减少频率
- en: 'Frequency can be reduced by the following approaches:'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过以下方法减少频率：
- en: Run the service or application in multiple zones or regions. Direct the traffic
    away from the zone or region that failed to an alternate working zone or region.
  id: totrans-309
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在多个区域或区域内运行服务或应用程序。将流量从故障的区域或区域引导到另一个正常工作的区域或区域。
- en: Create a self-healing automated script that reduces the impact and frequency,
    but also report the issue so that it can be addressed later.
  id: totrans-310
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个自愈的自动化脚本，减少影响和频率，但也报告问题，以便以后解决。
- en: Operational improvements
  id: totrans-311
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 操作性改进
- en: 'Here are some options from an operational standpoint to make a service reliable:'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是从操作角度来看，确保服务可靠性的一些选项：
- en: Increase availability by adding redundancy and thereby remove single points
    of failure.
  id: totrans-313
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过增加冗余来提高可用性，从而消除单点故障。
- en: Identify a common category between failures that can point to a specific region
    or a specific set of customers who consume a majority of the error budget.
  id: totrans-314
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确定失败之间的共同类别，这可以指向特定区域或一组客户，这些客户消耗了大部分的错误预算。
- en: Standardize the infrastructure or minimize the differences to achieve similar
    results when testing a service against running it in production.
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标准化基础设施或最小化差异，以便在测试服务与在生产中运行服务时获得相似的结果。
- en: Use design patterns that allow the service to be rolled back in case of an issue.
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用设计模式，使服务在出现问题时可以回滚。
- en: Create alerts by tracking the error budget burndown rate.
  id: totrans-317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过跟踪错误预算消耗率来创建警报。
- en: Use post-mortems to identify the issues at hand and create actionable items
    to fix those issues.
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用事后分析（post-mortem）来识别当前的问题，并创建可操作的事项来解决这些问题。
- en: This completes a complete deep dive into potential factors that needs to be
    considered and feasible options that can be implemented to make a service reliable,
    thus not consuming the error budget. The next subsection summarizes the section
    on error budgets.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 这完成了对需要考虑的潜在因素的深入探讨，以及可实施的可行选项，以确保服务的可靠性，从而不消耗错误预算。下一小节总结了错误预算的部分内容。
- en: Summarizing error budgets
  id: totrans-320
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 总结错误预算
- en: 'Error budgets can be summarized by the following key pointers:'
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 错误预算可以通过以下关键要点进行总结：
- en: Error budgets help development and SRE teams balance release velocity and stability.
    Management buys into SLO and gives executive backing.
  id: totrans-322
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 错误预算帮助开发和 SRE 团队平衡发布速度和稳定性。管理层认同 SLO，并给予执行支持。
- en: Error budgets need SLOs, and SLOs need SLIs to monitor service reliability.
  id: totrans-323
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 错误预算需要 SLO，而 SLO 需要 SLIs 来监控服务的可靠性。
- en: The difference between the actual and targeted SLO is calculated to determine
    if it is below the error budget, and if so, the release of new features is allowed.
  id: totrans-324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过计算实际与目标 SLO 之间的差异，来确定是否低于错误预算，如果是的话，可以允许发布新特性。
- en: If not, engineering efforts should be focused on the reliability of the service.
  id: totrans-325
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果没有，工程工作应集中在服务的可靠性上。
- en: An error budget policy is an effective way to implement the concepts of an error
    budget.
  id: totrans-326
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 错误预算政策是一种有效实施错误预算概念的方法。
- en: This completes the section on error budgets, with a deep dive into multiple
    aspects that include how to define an effective error budget policy, how to set
    error budgets, the impact of having an executive buy-in that helps to make a service
    reliable, and how to effectively balance the release velocity of new features.
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 这完成了关于错误预算的部分，深入探讨了多个方面，包括如何定义有效的错误预算政策、如何设定错误预算、管理层的支持如何帮助使服务更可靠，以及如何有效平衡新特性的发布速度。
- en: Eliminating toil through automation
  id: totrans-328
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过自动化消除重复性工作
- en: '**Toil** was introduced in [*Chapter 1*](B15587_01_Final_ASB_ePub.xhtml#_idTextAnchor014),
    *DevOps, SRE, and Google Cloud Services for CI/CD*, and is defined as the work
    tied to a production service where the characteristic of that work is manual,
    repetitive, automatable, tactical, lacks enduring value, and linearly grows with
    the service. Toil is often confused with overhead, but overhead refers to administrative
    work that includes email, commute, filing expense reports, and attending meetings.
    Toil can be both good and bad—it really depends on the amount of toil.'
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: '**重复性工作**在[*第一章*](B15587_01_Final_ASB_ePub.xhtml#_idTextAnchor014)中介绍，*《DevOps、SRE
    和 Google Cloud 服务用于 CI/CD》*，并定义为与生产服务相关的工作，其特点是手动、重复、可自动化、战术性、缺乏持久价值，并且随着服务的增长而线性增加。重复性工作常常与管理性工作混淆，但管理性工作指的是包括电子邮件、通勤、报销报告和开会等行政事务。重复性工作既可以是好的，也可以是坏的——这取决于重复性工作的数量。'
- en: 'Here are some of the positive sides of performing toil, but in very short and
    limited amounts:'
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是执行重复性工作的积极方面，但必须在非常短且有限的时间内进行：
- en: Produces a sense of gratification or a sense of accomplishment
  id: totrans-331
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 产生满足感或成就感
- en: Can act as a low-stress or low-risk activity
  id: totrans-332
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以作为一种低压力或低风险的活动
- en: Can be used to train new recruits, especially providing them a chance to learn
    by being hands-on with the system to learn the inner workings
  id: totrans-333
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可用于培训新员工，尤其是提供他们通过亲自操作系统来学习内部工作原理的机会
- en: 'However, excessive toil can lead to the following problems or issues:'
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，过多的重复性工作可能导致以下问题或困扰：
- en: '**Career stagnation**: Solving production issues is gratifying, but solving
    the same issue manually in a repetitive manner doesn''t help from a career standpoint.
    This takes away learning time and intent away from the SRE engineer, leading to
    stagnation.'
  id: totrans-335
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**职业停滞**：解决生产问题令人满足，但以重复的手动方式解决相同问题对职业发展没有帮助。这剥夺了 SRE 工程师的学习时间和意图，导致职业停滞。'
- en: '**Burnout and boredom**: Excessive toil leads to burnout and boredom. An SRE
    engineer will be bored doing the same task every day. Sometimes, manual tasks
    might also be tedious and laborious, leading to burnout.'
  id: totrans-336
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**倦怠和无聊**：过多的重复性工作会导致倦怠和无聊。SRE 工程师每天做同样的任务会感到厌倦。有时，手动任务也可能枯燥且费力，最终导致倦怠。'
- en: '**Low feature velocity**: If the SRE team is engaged in lot of toil, then they
    will have less time to work on releasing new features, thus leading to lower feature
    velocity and reduced release cadence.'
  id: totrans-337
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**低特性发布速度**：如果 SRE 团队从事大量重复性工作，他们将会减少用于发布新特性的时间，从而导致特性发布速度变慢，发布频率降低。'
- en: '**Wrong precedence**: If the SRE team engages in more toil than required, it''s
    possible that development teams will make SRE teams do further toil, especially
    on items that need to be addressed truly by the development team instead to remove
    the root cause. This will create confusion on the role of the SRE engineer.'
  id: totrans-338
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**错误的优先级**：如果SRE团队承担的重复劳动超过了必要的范围，开发团队可能会让SRE团队做更多的重复劳动，特别是对于那些开发团队真正需要处理的问题，而不是仅仅消除根本原因。这将导致SRE工程师的角色产生混淆。'
- en: All the aforementioned problems or issues can potentially lead to attrition,
    as SRE engineers might not be happy with their everyday work and might look elsewhere
    for better work and challenges. SRE recommends that toil should be bounded and
    that an SRE engineer should not work more than 50% of their time on toil. Anything
    more than 50% blurs the line between an SRE engineer and a system administrator.
    SRE engineers are recommended to spend the remaining 50% on supporting engineering
    teams in achieving reliability goals for the service.
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 所有上述问题或挑战可能会导致人员流失，因为SRE工程师可能对日常工作不满意，并可能寻求其他地方的更好工作和挑战。SRE建议将重复劳动限制在一定范围内，SRE工程师应避免超过50%的时间用于重复劳动。超过50%将模糊SRE工程师和系统管理员之间的界限。建议SRE工程师将剩余的50%时间用于支持工程团队实现服务可靠性目标。
- en: Eliminating toil allows SRE engineers to add service features to improve the
    reliability and performance of the service. In addition, focus can continue to
    remain on removing toil as identified, thus clearing out a backlog of any manual
    repetitive work. SRE encourages the use of engineering concepts to remove manual
    work. This also allows SRE engineers to scale up and manage services better than
    a development or an operations team.
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 消除重复劳动使SRE工程师能够添加服务功能，以提高服务的可靠性和性能。此外，可以继续关注消除已识别的重复劳动，从而清除任何手动重复工作的积压。SRE鼓励使用工程概念来消除手动工作。这还允许SRE工程师比开发或运维团队更好地扩展和管理服务。
- en: SRE recommends removing toil through automation. Automation provides consistency
    and eliminates the occurrence of oversights and mistakes. Automation helps to
    perform a task much faster than humans and can also be scheduled. Automation also
    ensures to prevent a problem before reoccurring. Automation is usually done through
    code, and this also provides a chance for SRE engineers to use engineering concepts
    to implement the required logic.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: SRE建议通过自动化消除重复劳动。自动化提供了一致性，并消除了疏忽和错误的发生。自动化帮助比人工更快地执行任务，并且可以按计划进行。自动化还确保了在问题重新发生之前加以预防。自动化通常是通过代码实现的，这也为SRE工程师提供了一个使用工程概念来实现所需逻辑的机会。
- en: 'This concludes the section on toil: its characteristics, the good and bad aspects,
    and the advantages of using automation to eliminate toil. The next section illustrates
    how SLAs, SLOs, and error budgets are impacted based on SLI performance.'
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 本节总结了重复劳动的特点、利与弊，以及使用自动化消除重复劳动的优势。接下来的部分将说明基于SLI表现，SLA、SLO和错误预算如何受到影响。
- en: Illustrating the impact of SLAs, SLOs, and error budgets relative to SLI
  id: totrans-343
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 说明SLAs、SLOs和错误预算相对于SLI的影响
- en: In this section, we will go through two hands-on scenarios to illustrate how
    SLO targets are met or missed based on SLI performance over time. SLOs performance
    will have direct impact on SLAs and error budgets. Changes in the error budget
    will specifically dictate the priority between the release of new features versus
    service reliability. For ease of explanation, a 7-day period is taken as the measure
    of time (ideally, a 28-day period is preferred).
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 本节我们将通过两个实际场景，说明如何基于SLI表现来达成或未达成SLO目标。SLO的表现将直接影响SLA和错误预算。错误预算的变化将特别决定新功能发布与服务可靠性之间的优先级。为了便于说明，这里采用7天作为时间度量（理想情况下，建议使用28天的周期）。
- en: Scenario 1 – New service features introduced; features are reliable; SLO is
    met
  id: totrans-345
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 场景 1 – 引入新服务功能；功能可靠；SLO达成
- en: 'Here are the expectations for this scenario:'
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是该场景的期望：
- en: '**Expected SLA**—95%'
  id: totrans-347
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**预期SLA**—95%'
- en: '**Expected SLO**—98%'
  id: totrans-348
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**预期SLO**—98%'
- en: '**Measured SLI**—Service availability or uptime'
  id: totrans-349
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**测量的SLI**—服务可用性或正常运行时间'
- en: '**Measure duration**—7 days'
  id: totrans-350
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**测量时长**—7天'
- en: 'Given that the anticipated SLO for service is 98%, here is how the allowed
    downtime or error budget is calculated (you can use this downtime calculator for
    reference: [https://availability.sre.xyz](https://availability.sre.xyz)):'
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到服务的预期SLO为98%，以下是如何计算允许的停机时间或错误预算（您可以参考此停机时间计算器：[https://availability.sre.xyz](https://availability.sre.xyz)）：
- en: '**Error budget** = *100% - SLO = 100% - 98% = 2%*'
  id: totrans-352
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**错误预算** = *100% - SLO = 100% - 98% = 2%*'
- en: '**Allowed downtime for 7 days with 98% availability** = *3.36 hours = 3.36
    * 60 = 201.6 minutes*'
  id: totrans-353
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**7天内允许的停机时间（98%的可用性）** = *3.36小时 = 3.36 * 60 = 201.6分钟*'
- en: So, if total downtime across 7 days is less than 201.6 minutes, then the service
    is within SLO compliance of 98%, else the service is out of SLO compliance.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，如果7天内的总停机时间少于201.6分钟，则服务符合98%的SLO合规性，否则服务不符合SLO合规性。
- en: Now, let's illustrate how the SLO is impacted based on SLI measurements. Assume
    that new features are introduced for the service (across the 7-day period) and
    the features are stable, with minimal issues.
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们说明如何基于SLI测量来影响SLO。假设在服务中引入了新功能（在7天期间），且这些功能稳定，问题最小。
- en: 'The following table represents the SLI measurements of availability, respective
    downtime based on SLI performance, and the reduction in error budget on a per-day
    basis:'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 下表表示了基于SLI表现的可用性SLI测量、相应的停机时间以及每天减少的错误预算：
- en: '![](img/B15587_02_Table-03.jpg)'
  id: totrans-357
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15587_02_Table-03.jpg)'
- en: 'The following screenshot represents the SLI performance for service uptime
    (top) and the error budget burndown rate (bottom) based on the values from the
    preceding table:'
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 下图表示了基于前述表格中的数值，服务正常运行时间的SLI表现（上方）和错误预算消耗率（下方）：
- en: '![Figure 2.2 – Illustration of SLI performance and error budget burndown rate'
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 2.2 – SLI表现和错误预算消耗率的说明'
- en: '](img/B15587_02_02.jpg)'
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15587_02_02.jpg)'
- en: Figure 2.2 – Illustration of SLI performance and error budget burndown rate
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.2 – SLI表现和错误预算消耗率的说明
- en: 'Here are some critical observations:'
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一些关键观察点：
- en: Remaining error budget = 84.95 minutes, which is less than 201.6 minutes. Hence,
    the SLO is in compliance and the SLA is met.
  id: totrans-363
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 剩余的错误预算为84.95分钟，少于201.6分钟。因此，SLO符合合规性，SLA也达成。
- en: The SLO performance can be calculated based on the remaining error budget. Since
    the remaining error budget is 84.95 minutes, then SLO performance is 99.25%.
  id: totrans-364
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SLO表现可以根据剩余的错误预算来计算。由于剩余的错误预算为84.95分钟，因此SLO表现为99.25%。
- en: The introduction of new features did not unevenly or suddenly decrease the error
    budget.
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 新功能的引入并没有不均匀或突然地减少错误预算。
- en: This completes a detailed illustration of a scenario where the SLO is met based
    on the SLI performance over a 7-day period. The next scenario illustrates the
    opposite, where the SLO is missed based on SLI performance.
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: 这完成了基于7天期间SLI表现的SLO达成情况的详细说明。下一个场景说明了相反的情况，即基于SLI表现未能满足SLO的情况。
- en: Scenario 2 – New features introduced; features are not reliable; SLO is not
    met
  id: totrans-367
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 场景2 – 引入新功能；功能不可靠；未达成SLO
- en: 'Here are the expectations for this scenario:'
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是该场景的预期：
- en: '**Expected SLA**—95%'
  id: totrans-369
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**预期SLA**—95%'
- en: '**Expected SLO**—98%'
  id: totrans-370
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**预期SLO**—98%'
- en: '**Measured SLI**—Service availability or uptime'
  id: totrans-371
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**测量SLI**—服务可用性或正常运行时间'
- en: '**Measure duration**—7 days'
  id: totrans-372
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**测量时长**—7天'
- en: As calculated in *Scenario 1*, the allowed downtime for a 98% SLO is 201.6 minutes.
    So, the SLO is out of compliance if downtime is greater than 201.6 minutes over
    a 7-day period.
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: 正如在*场景1*中计算的，98% SLO的允许停机时间为201.6分钟。因此，如果7天内的停机时间超过201.6分钟，则SLO不符合合规性。
- en: Now, let's illustrate how the SLO is impacted based on SLI measurements. Assume
    that new features are introduced for the service (across the 7-day period) but
    the introduced features are not stable, causing major issues resulting in longer
    downtimes.
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们说明如何基于SLI测量来影响SLO。假设在服务中引入了新功能（在7天期间），但这些功能不稳定，导致出现重大问题，造成较长的停机时间。
- en: 'The following table represents the SLI measurements of availability, respective
    downtime based on SLI performance, and the reduction in error budget on a per-day
    basis:'
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 下表表示了基于SLI表现的可用性SLI测量、相应的停机时间以及每天减少的错误预算：
- en: '![](img/B15587_02_Table-04.jpg)'
  id: totrans-376
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B15587_02_Table-04.jpg)'
- en: 'The following screenshot represents the SLI performance for service uptime
    (left-hand side) and the error budget burndown rate (right-hand side) based on
    the values from the preceding table:'
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 下图表示了基于前述表格中的数值，服务正常运行时间的SLI表现（左侧）和错误预算消耗率（右侧）：
- en: '![Figure 2.3 – Illustration of SLI performance and error budget burndown rate'
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 2.3 – SLI表现和错误预算消耗率的说明'
- en: '](img/B15587_02_03.jpg)'
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/B15587_02_03.jpg)'
- en: Figure 2.3 – Illustration of SLI performance and error budget burndown rate
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.3 – SLI表现和错误预算消耗率的说明
- en: 'Here are some critical observations:'
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一些关键观察点：
- en: Remaining error budget = 0 minutes on day 4\. So, the SLO is not in compliance.
  id: totrans-382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 剩余错误预算 = 第 4 天 0 分钟。因此，SLO 不符合规定。
- en: Total downtime across 7-day period is 253.44 minutes.
  id: totrans-383
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 7 天期间的总停机时间为 253.44 分钟。
- en: The corresponding SLO performance is approximately at 97.48, which is below
    98%.
  id: totrans-384
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对应的 SLO 性能大约为 97.48，低于 98%。
- en: The SLA is violated since the SLO is not in compliance. This will result in
    consequences.
  id: totrans-385
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于 SLO 不符合要求，SLA 被违反。这将导致后果。
- en: The SRE team should not add new features after day 3 and instead focus on system
    reliability.
  id: totrans-386
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SRE 团队在第 3 天之后不应添加新功能，而应专注于系统可靠性。
- en: This brings an end to a detailed rundown of *Scenario 2*. This completes our
    illustration of how SLAs, SLOs, and error budgets are impacted based on SLI performance.
    This also means we have reached the end of this chapter.
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
  zh: 这标志着*场景 2*的详细总结结束。我们已经完成了对基于 SLI 性能如何影响 SLA、SLO 和错误预算的说明。这也意味着我们已经到达了本章的结束部分。
- en: Summary
  id: totrans-388
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: 'In this chapter, we discussed in detail the key SRE technical practices: SLAs,
    SLOs, SLIs, error budgets, and eliminating toil. This included several critical
    concepts such as factors that can be used for a well-defined SLA, providing guidelines
    to set SLOs, categorizing user journeys, detailing sources to measure SLIs along
    with their limitations, elaborating on error budgets, detailing out factors that
    can make a service reliable, understanding toil''s consequences, and elaborating
    on how automation is beneficial to eliminate toil. These concepts allow us to
    achieve SRE''s core principle, which is to maintain the balance between innovation
    and system reliability and thus achieve the eventual goal: *build reliable software
    faster*.'
  id: totrans-389
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们详细讨论了关键的 SRE 技术实践：SLA、SLO、SLI、错误预算以及消除工作负担。这包括了一些关键概念，如用于定义清晰 SLA 的因素、提供设置
    SLO 的指南、分类用户旅程、详细描述测量 SLI 的来源及其局限性、阐述错误预算、详细说明可以使服务可靠的因素、理解工作负担的后果，以及阐明自动化如何有助于消除工作负担。这些概念使我们能够实现
    SRE 的核心原则，即在创新与系统可靠性之间保持平衡，从而实现最终目标：*更快地构建可靠的软件*。
- en: 'In the next chapter, we will focus on concepts required to track SRE technical
    practices: monitoring, alerting, and time series. These concepts will include
    monitoring as a feedback loop, monitoring sources, monitoring strategies, monitoring
    types, alerting strategies, desirable characteristics of an alerting system, time-series
    structures, time-series cardinality, and metric types of time-series data.'
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将重点介绍跟踪 SRE 技术实践所需的概念：监控、告警和时间序列。这些概念将包括将监控作为反馈循环、监控来源、监控策略、监控类型、告警策略、告警系统的理想特性、时间序列结构、时间序列基数，以及时间序列数据的指标类型。
- en: Points to remember
  id: totrans-391
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 需要记住的要点
- en: 'Here are some important points to remember:'
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些重要的要点：
- en: 100% is an unrealistic reliability target.
  id: totrans-393
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 100% 的可靠性目标是不现实的。
- en: Log-based SLIs and ingesting telemetry adds latency.
  id: totrans-394
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于日志的 SLIs 和获取遥测数据会增加延迟。
- en: App metrics are not good for complex use journeys.
  id: totrans-395
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序指标不适用于复杂的使用旅程。
- en: SLOs must be set based on conversations with engineering and product teams.
  id: totrans-396
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SLO 必须根据与工程和产品团队的讨论来设置。
- en: If there is no error budget left, the focus should be on reliability.
  id: totrans-397
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果没有剩余的错误预算，重点应该放在可靠性上。
- en: TTD is the time taken to identify that an issue exists or is reported.
  id: totrans-398
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TTD 是识别问题存在或被报告的时间。
- en: TTR is the time taken to resolve an issue.
  id: totrans-399
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: TTR 是解决问题所需的时间。
- en: To improve the reliability of a service, reduce TTD, reduce TTR, reduce impact
    %, and increase TTF/TBF.
  id: totrans-400
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为了提高服务的可靠性，减少 TTD、减少 TTR、减少影响百分比并增加 TTF/TBF。
- en: SLIs should have a predictable relationship with user happiness and should be
    aggregated over time.
  id: totrans-401
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SLIs 应该与用户幸福感有可预测的关系，并且应随着时间的推移进行汇总。
- en: User expectations are strongly tied to past performance.
  id: totrans-402
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户期望与过去的表现密切相关。
- en: Setting values for SLIs and SLOs should be an iterative process.
  id: totrans-403
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为 SLIs 和 SLOs 设置值应该是一个迭代过程。
- en: Advanced techniques to manage error budgets are dynamic release cadence, setting
    up error budget exhaustion rates, rainy-day funds, and the use of silver bullets.
  id: totrans-404
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理错误预算的高级技术包括动态发布节奏、设置错误预算耗尽率、备用基金和使用“银弹”。
- en: Identify repetitive tasks that contribute to toil and automate them.
  id: totrans-405
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 识别那些导致工作负担的重复性任务并进行自动化处理。
- en: Further reading
  id: totrans-406
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'For more information on **Google Cloud Platform''s** (**GCP''s**) approach
    toward DevOps, read the following articles:'
  id: totrans-407
  prefs: []
  type: TYPE_NORMAL
  zh: 有关**谷歌云平台**（**GCP**）在 DevOps 方面的方法，请阅读以下文章：
- en: '**SRE**: [https://landing.google.com/sre/](https://landing.google.com/sre/)'
  id: totrans-408
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SRE**: [https://landing.google.com/sre/](https://landing.google.com/sre/)'
- en: '**SRE fundamentals**: [https://cloud.google.com/blog/products/gcp/sre-fundamentals-slis-slas-and-slos](https://cloud.google.com/blog/products/gcp/sre-fundamentals-slis-slas-and-slos)'
  id: totrans-409
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SRE 基础知识**: [https://cloud.google.com/blog/products/gcp/sre-fundamentals-slis-slas-and-slos](https://cloud.google.com/blog/products/gcp/sre-fundamentals-slis-slas-and-slos)'
- en: '**SRE YouTube playlist**: [https://www.youtube.com/watch?v=uTEL8Ff1Zvk&list=PLIivdWyY5sqJrKl7D2u-gmis8h9K66qoj](https://www.youtube.com/watch?v=uTEL8Ff1Zvk&list=PLIivdWyY5sqJrKl7D2u-gmis8h9K66qoj)'
  id: totrans-410
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SRE YouTube 播放列表**: [https://www.youtube.com/watch?v=uTEL8Ff1Zvk&list=PLIivdWyY5sqJrKl7D2u-gmis8h9K66qoj](https://www.youtube.com/watch?v=uTEL8Ff1Zvk&list=PLIivdWyY5sqJrKl7D2u-gmis8h9K66qoj)'
- en: Practice test
  id: totrans-411
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实践测试
- en: 'Answer the following questions:'
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: 回答以下问题：
- en: Which from the following indicates work that is not tied to a production service?
  id: totrans-413
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪个表示不与生产服务相关的工作？
- en: a) Toil
  id: totrans-414
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 琐事
- en: b) Manual
  id: totrans-415
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 手动
- en: c) Overhead
  id: totrans-416
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 开销
- en: d) Automation
  id: totrans-417
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 自动化
- en: Which of the following represents *an explicit or implicit contract with your
    users that includes consequences of meeting or missing the SLOs*?
  id: totrans-418
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪个选项表示*与用户的明确或隐含合同，包括达成或未达成 SLO 的后果*？
- en: a) SLI
  id: totrans-419
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) SLI
- en: b) SLO
  id: totrans-420
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) SLO
- en: c) SLA
  id: totrans-421
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) SLA
- en: d) Error budget
  id: totrans-422
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 错误预算
- en: Which of the following combinations represent metrics that are typically tracked
    as part of a request/response journey?
  id: totrans-423
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪种组合表示通常作为请求/响应过程一部分跟踪的指标？
- en: a) Availability, latency, and durability
  id: totrans-424
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 可用性、延迟和持久性
- en: b) Latency, coverage, throughput, and availability
  id: totrans-425
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 延迟、覆盖率、吞吐量和可用性
- en: c) Coverage, correctness, and quality
  id: totrans-426
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 覆盖率、正确性和质量
- en: d) Availability, latency, and quality
  id: totrans-427
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 可用性、延迟和质量
- en: 'Select an option that represents SRE recommendation in terms of the time that
    an SRE engineer is allowed to spend on toil:'
  id: totrans-428
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一个选项，表示在 SRE 工程师允许花费时间来处理琐事的建议：
- en: a) 25%-55%
  id: totrans-429
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 25%-55%
- en: b) 45%-60%
  id: totrans-430
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 45%-60%
- en: c) 50%-75%
  id: totrans-431
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 50%-75%
- en: d) 30%-50%
  id: totrans-432
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 30%-50%
- en: Which of the following is the least realistic (preferred) option to target reliability
    for a service as an SLO?
  id: totrans-433
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪个选项是最不现实的（首选）服务可靠性目标作为 SLO？
- en: a) 99.9%
  id: totrans-434
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 99.9%
- en: b) 99.99%
  id: totrans-435
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 99.99%
- en: c) 99.999%
  id: totrans-436
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 99.999%
- en: d) 100%
  id: totrans-437
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 100%
- en: In terms of best practice, which option is correct with respect to the number
    of SLIs recommended per user journey?
  id: totrans-438
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 就最佳实践而言，关于每个用户旅程推荐的 SLI 数量，哪项选项是正确的？
- en: a) 2 to 3
  id: totrans-439
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 2 到 3
- en: b) No specific limit
  id: totrans-440
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 无具体限制
- en: c) 3 to 5
  id: totrans-441
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 3 到 5
- en: d) 5 to 7
  id: totrans-442
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 5 到 7
- en: An e-commerce web application is processing customer purchases through requests
    and storing the sales transactions in a database. The goal is to ensure that the
    forecasted sales numbers are based on the latest sales numbers. Which of the following
    should be selected as SLIs for the e-commerce application (*select two*)?
  id: totrans-443
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个电子商务 Web 应用程序正在通过请求处理客户购买，并将销售交易存储在数据库中。目标是确保预测的销售数据基于最新的销售数据。以下哪些应选择为电子商务应用程序的
    SLI（*选择两个*）？
- en: a) Database—Availability.
  id: totrans-444
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 数据库—可用性。
- en: b) Database—Durability.
  id: totrans-445
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 数据库—持久性。
- en: c) Database—Freshness.
  id: totrans-446
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 数据库—新鲜度。
- en: d) Web application—Availability.
  id: totrans-447
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) Web 应用程序—可用性。
- en: e) Web application—Durability.
  id: totrans-448
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: e) Web 应用程序—持久性。
- en: f) Both the database and web application should be available. Production apps
    should have full availability.
  id: totrans-449
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: f) 数据库和 Web 应用程序应该始终可用。生产环境的应用程序应具备完全的可用性。
- en: Which out of the following represents a precise numerical target for system
    availability?
  id: totrans-450
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪个选项表示系统可用性的精确数值目标？
- en: a) SLA
  id: totrans-451
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) SLA
- en: b) SLO
  id: totrans-452
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) SLO
- en: c) SLI
  id: totrans-453
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) SLI
- en: d) Error budget
  id: totrans-454
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 错误预算
- en: Which of the following represents a direct measurement of service behavior?
  id: totrans-455
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪个选项表示服务行为的直接测量？
- en: a) SLA
  id: totrans-456
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) SLA
- en: b) SLO
  id: totrans-457
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) SLO
- en: c) SLI
  id: totrans-458
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) SLI
- en: d) Error budget
  id: totrans-459
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 错误预算
- en: Which of the following is the best suitable source to backfill an SLI?
  id: totrans-460
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪个是最适合用于填充 SLI 的数据源？
- en: a) Application server
  id: totrans-461
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) 应用服务器
- en: b) Frontend infrastructure
  id: totrans-462
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) 前端基础设施
- en: c) Synthetic clients
  id: totrans-463
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) 合成客户端
- en: d) None of the above
  id: totrans-464
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) 以上都不是
- en: Answers
  id: totrans-465
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 答案
- en: (c) Overhead.
  id: totrans-466
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (c) 开销。
- en: (c) SLA.
  id: totrans-467
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (c) SLA。
- en: (d) Availability, latency, and quality.
  id: totrans-468
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (d) 可用性、延迟和质量。
- en: (d) 30%-50%. The recommended amount of toil should not exceed 50%.
  id: totrans-469
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (d) 30%-50%。建议的琐事工作量不应超过 50%。
- en: (d) 100%.
  id: totrans-470
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (d) 100%。
- en: (c) 3 to 5.
  id: totrans-471
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (c) 3 到 5。
- en: '(a) and (d): Both the database and web application should be available as these
    are production applications.'
  id: totrans-472
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (a) 和 (d)：数据库和 Web 应用程序应该保持可用，因为这些是生产应用程序。
- en: (b) SLO.
  id: totrans-473
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (b) SLO。
- en: (c) SLI.
  id: totrans-474
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (c) SLI。
- en: (d) None of the above. The exact answer is server-side logs.
  id: totrans-475
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: (d) 以上都不是。准确的答案是服务器端日志。
