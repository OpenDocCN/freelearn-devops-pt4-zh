- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: Introduction to the book and the technology
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书与技术简介
- en: This book about Prometheus, the second project to graduate within the **Cloud
    Native Computing Foundation** (**CNCF**), will help you to crystallize the core
    fundamentals of monitoring and the approaches available to ensure the required
    infrastructure visibility. It relies on practical examples, using test environments
    and diagrams, to communicate knowledge in an easy-to-digest manner.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本书介绍了 Prometheus，第二个从 **云原生计算基金会** (**CNCF**) 毕业的项目，将帮助你巩固监控的核心基础知识，以及确保所需基础设施可见性的可用方法。它通过实践示例、使用测试环境和图表的方式，以易于消化的方式传达知识。
- en: The content was designed to ensure that all the important Prometheus stack concepts
    are tackled. Our main goal during the writing process was to aim the book at our
    past selves and ensure that they would have everything they needed to know about
    this technology in this book.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的内容设计旨在确保涵盖所有重要的 Prometheus 堆栈概念。我们在编写过程中的主要目标是以我们过去的自己为目标，确保他们可以在本书中找到关于这项技术的所有必要知识。
- en: From running one Prometheus server, to what scaling options are available, from
    creating and testing alerting rules, to templating slack notifications; and from
    useful dashboards, to automating target discovery; many other topics will be explained
    to ensure a full knowledge base on infrastructure monitoring using Prometheus
    as its cornerstone.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 从运行一个 Prometheus 服务器，到可用的扩展选项，从创建和测试告警规则，到模板化 Slack 通知；以及从有用的仪表盘，到自动化目标发现；许多其他主题将被解释，以确保在使用
    Prometheus 作为基石的基础设施监控中建立完整的知识体系。
- en: Who this book is for
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书适合的人群
- en: If you're a software developer, cloud specialist, site reliability engineer,
    DevOps enthusiast, or a system administrator looking to set up a reliable monitoring
    and alerting system to sustain infrastructure security and performance, this book
    is for you. Basic networking and infrastructure monitoring knowledge will help
    you understand the concepts covered in this book.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你是软件开发人员、云计算专家、站点可靠性工程师、DevOps 爱好者或系统管理员，想要搭建一个可靠的监控和告警系统来维持基础设施的安全性和性能，那么本书适合你。基本的网络和基础设施监控知识将帮助你理解本书中涉及的概念。
- en: What this book covers
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书内容概述
- en: '[Chapter 1](4214ddff-8289-4dc6-b0ef-240510a22192.xhtml), *Monitoring Fundamentals*,
    lays the foundations of several key concepts that are used throughout the book.
    This chapter also explores the approach Prometheus takes to metric collection
    and why some controversial decisions are vital for the design and architecture
    of its stack.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[第 1 章](4214ddff-8289-4dc6-b0ef-240510a22192.xhtml)，*监控基础知识*，奠定了本书中多个关键概念的基础。本章还探讨了
    Prometheus 在度量收集方面的方式，以及为何一些有争议的决策对其架构设计至关重要。'
- en: '[Chapter 2](d5fcdaa0-dcdc-493a-9c36-90099d358b52.xhtml), *An Overview of the
    Prometheus Ecosystem*, introduces a high-level overview of the entire Prometheus
    ecosystem, which components perform which jobs, and how everything interoperates
    logically.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[第 2 章](d5fcdaa0-dcdc-493a-9c36-90099d358b52.xhtml)，*Prometheus 生态系统概述*，提供了整个
    Prometheus 生态系统的高级概述，介绍了各个组件的职能，以及它们如何在逻辑上协同工作。'
- en: '[Chapter 3](8f575e82-4713-45c7-8eb3-0af3e0e61ed3.xhtml), *Setting Up a Test
    Environment*, presents the fundamentals of how to use the test environments provided throughout
    the book, and how to tinker with them to validate different configurations.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[第 3 章](8f575e82-4713-45c7-8eb3-0af3e0e61ed3.xhtml)，*设置测试环境*，介绍了如何使用本书提供的测试环境的基础知识，以及如何操作这些环境来验证不同的配置。'
- en: '[Chapter 4](d571ee63-1941-40e0-a314-70030efe76ea.xhtml), *Prometheus Metrics
    Fundamental*s, explores metrics, the core resource of Prometheus. Understanding
    them correctly is essential to fully utilize, manage, or even extend the Prometheus
    stack.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[第 4 章](d571ee63-1941-40e0-a314-70030efe76ea.xhtml)，*Prometheus 度量基础*，探讨了度量，这是
    Prometheus 的核心资源。正确理解这些度量对于充分利用、管理甚至扩展 Prometheus 堆栈至关重要。'
- en: '[Chapter 5](12e775c2-bee9-4ebe-ad73-2f9313eeeeee.xhtml), *Running a Prometheus
    Server*, focuses on the Prometheus server, providing common patterns of usage
    and full setup process scenarios for virtual machines and containers.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[第 5 章](12e775c2-bee9-4ebe-ad73-2f9313eeeeee.xhtml)，*运行 Prometheus 服务器*，聚焦于
    Prometheus 服务器，提供了常见的使用模式和虚拟机与容器的完整设置过程场景。'
- en: '[Chapter 6](51ddca07-f381-40f6-ae45-8b089ed918cd.xhtml), *Exporters and Integrations*,
    introduces some of the most useful exporters available, as well as providing examples
    on how to use them.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[第 6 章](51ddca07-f381-40f6-ae45-8b089ed918cd.xhtml)，*导出器与集成*，介绍了一些最有用的导出器，并提供了如何使用它们的示例。'
- en: '[Chapter 7](205ddb34-6ee8-4e22-b80f-39d5b2198c29.xhtml), *Prometheus Query
    Language – PromQL*, dives into the powerful and flexible Prometheus query language
    to leverage its multi-dimensional data model, which allows ad hoc aggregation
    and the combination of time series.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[第7章](205ddb34-6ee8-4e22-b80f-39d5b2198c29.xhtml)，*Prometheus查询语言–PromQL*，深入讲解了强大而灵活的Prometheus查询语言，利用其多维数据模型，支持临时聚合和时间序列的组合。'
- en: '[Chapter 8](19357d8c-dfcf-4497-ae80-4761f6633d14.xhtml), *Troubleshooting and
    Validation*, provides useful guidelines on how to quickly detect and fix problems.
    It also presents useful endpoints that expose critical information and explores
    `promtool`, the Prometheus command-line interface and validation tool.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[第8章](19357d8c-dfcf-4497-ae80-4761f6633d14.xhtml)，*故障排除与验证*，提供了有关如何快速检测和修复问题的实用指南。还介绍了暴露关键信息的有用端点，并探讨了`promtool`，即Prometheus的命令行接口和验证工具。'
- en: '[Chapter 9](9aa1e3da-13cf-4051-845d-1d1c924ef47b.xhtml), *Defining Alerting
    and Recording Rules*, covers the usage and testing of recording and alerting rules,
    providing examples along the way.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '[第9章](9aa1e3da-13cf-4051-845d-1d1c924ef47b.xhtml)，*定义告警和记录规则*，介绍了记录和告警规则的使用与测试，并提供了相关的示例。'
- en: '[Chapter 10](02331a85-bad1-4a4f-b56e-150b69b46edb.xhtml), *Discovering and
    Creating Grafana Dashboards*, delves into the visualization components of the
    Prometheus stack, covering not only the built-in console functionality but also
    exploring Grafana and how to build, share, and reuse dashboards.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '[第10章](02331a85-bad1-4a4f-b56e-150b69b46edb.xhtml)，*发现与创建Grafana仪表板*，深入探讨了Prometheus栈中的可视化组件，涵盖了内置控制台功能，同时也探索了Grafana，及如何构建、共享和重用仪表板。'
- en: '[Chapter 11](db658650-14d2-4a7e-9ae0-1c003e63109c.xhtml), *Understanding and
    Extending Alertmanager*, introduces the alerting component of the stack, showing
    how to integrate it with several different alerting providers, and how to correctly
    set up clustering to enable high-availability with the deduplication of alerts.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[第11章](db658650-14d2-4a7e-9ae0-1c003e63109c.xhtml)，*理解与扩展Alertmanager*，介绍了栈中的告警组件，展示了如何将其与多种告警提供者集成，并讲解了如何正确设置集群以实现高可用性和告警去重。'
- en: '[Chapter 12](5360e790-3884-4eeb-aaa1-8aad21dc6c1e.xhtml), *Choosing the Right
    Service Discovery*, explores multiple service discovery integrations, as well
    as providing you with the requirements and knowledge to build your own integration
    if required.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '[第12章](5360e790-3884-4eeb-aaa1-8aad21dc6c1e.xhtml)，*选择合适的服务发现*，探讨了多种服务发现集成方式，并提供了构建自定义集成所需的要求和知识。'
- en: '[Chapter 13](3615e455-c55b-49af-8c9b-b5342d4859dd.xhtml), *Scaling and Federating
    Prometheus*, tackles the scaling of a Prometheus stack and introduces concepts
    such as sharding and global views, while providing context and explaining them.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '[第13章](3615e455-c55b-49af-8c9b-b5342d4859dd.xhtml)，*扩展和联邦Prometheus*，探讨了Prometheus栈的扩展问题，并介绍了分片和全局视图等概念，同时提供了背景信息并对其进行了说明。'
- en: '[Chapter 14](1fb2aaff-5fe3-44ed-9df8-1cd27f383906.xhtml), *Integrating Long-Term
    Storage with Prometheus*, covers the concepts of the Prometheus read and write
    endpoints. Then, it deep-dives into considerations for external and long-term
    metric storage. Finally, it introduces an end-to-end example using Thanos.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '[第14章](1fb2aaff-5fe3-44ed-9df8-1cd27f383906.xhtml)，*将长期存储与Prometheus集成*，涵盖了Prometheus读取和写入端点的概念。接着深入探讨了外部和长期度量存储的考虑因素。最后，通过Thanos提供了一个端到端的示例。'
- en: To get the most out of this book
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为了最大程度地利用本书
- en: Basic knowledge of monitoring, networking, and containers is useful but is not
    mandatory.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 基本的监控、网络和容器知识是有用的，但不是必需的。
- en: All the test environments were validated using macOS and Linux, while enforcing
    specific software versions for added compatibility, so those are the best candidates
    to guarantee you won't run into issues. [Chapter 3](8f575e82-4713-45c7-8eb3-0af3e0e61ed3.xhtml),
    *Setting Up a Test Environment*, provides all the technical information on this
    subject.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 所有测试环境均使用macOS和Linux进行验证，并强制使用特定的软件版本以提高兼容性，因此这些是最适合确保你不会遇到问题的环境。[第3章](8f575e82-4713-45c7-8eb3-0af3e0e61ed3.xhtml)，*设置测试环境*，提供了与此主题相关的所有技术信息。
- en: Decent internet connectivity is required to download the software dependencies,
    as is a modern browser to ensure access to all the web interfaces presented in
    the book.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 下载软件依赖项需要良好的互联网连接，同时需要现代浏览器来确保访问书中呈现的所有Web界面。
- en: Download the example code files
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载示例代码文件
- en: You can download the example code files for this book from your account at [www.packt.com](http://www.packt.com).
    If you purchased this book elsewhere, you can visit [www.packt.com/support](http://www.packt.com/support)
    and register to have the files emailed directly to you.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以从[www.packt.com](http://www.packt.com)的账户下载本书的示例代码文件。如果你从其他地方购买了本书，可以访问[www.packt.com/support](http://www.packt.com/support)，并注册让文件直接发送到你的邮箱。
- en: 'You can download the code files by following these steps:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过以下步骤下载代码文件：
- en: Log in or register at [www.packt.com](http://www.packt.com).
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在[www.packt.com](http://www.packt.com)登录或注册。
- en: Select the SUPPORT tab.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择“支持”标签。
- en: Click on Code Downloads & Errata.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“代码下载与勘误表”。
- en: Enter the name of the book in the Search box and follow the onscreen instructions.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在搜索框中输入书籍名称，并按照屏幕上的指示操作。
- en: 'Once the file is downloaded, please make sure that you unzip or extract the
    folder using the latest version of:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 下载文件后，请确保使用以下最新版本的解压或提取工具：
- en: WinRAR/7-Zip for Windows
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: WinRAR/7-Zip for Windows
- en: Zipeg/iZip/UnRarX for Mac
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Zipeg/iZip/UnRarX for Mac
- en: 7-Zip/PeaZip for Linux
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 7-Zip/PeaZip for Linux
- en: The code bundle for the book is also hosted on GitHub at [https://github.com/PacktPublishing/Hands-On-Infrastructure-Monitoring-with-Prometheus](https://github.com/PacktPublishing/Hands-On-Infrastructure-Monitoring-with-Prometheus). In
    case there's an update to the code, it will be updated on the existing GitHub
    repository.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的代码包也托管在 GitHub 上，链接为[https://github.com/PacktPublishing/Hands-On-Infrastructure-Monitoring-with-Prometheus](https://github.com/PacktPublishing/Hands-On-Infrastructure-Monitoring-with-Prometheus)。如果代码有更新，它将在现有的
    GitHub 仓库中进行更新。
- en: We also have other code bundles from our rich catalog of books and videos available
    at **[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)**.
    Check them out!
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还在我们的丰富书籍和视频目录中提供了其他代码包，访问**[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)**查看吧！
- en: Download the color images
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载彩色图片
- en: 'We also provide a PDF file that has color images of the screenshots/diagrams
    used in this book. You can download it here: [https://www.packtpub.com/sites/default/files/downloads/9781789612349_ColorImages.pdf](https://www.packtpub.com/sites/default/files/downloads/9781789612349_ColorImages.pdf).'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还提供了一个 PDF 文件，其中包含本书中使用的截图/图表的彩色版本。你可以在此下载：[https://www.packtpub.com/sites/default/files/downloads/9781789612349_ColorImages.pdf](https://www.packtpub.com/sites/default/files/downloads/9781789612349_ColorImages.pdf)。
- en: Conventions used
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用的约定
- en: There are a number of text conventions used throughout this book.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中使用了多种文本约定。
- en: '`CodeInText`: Indicates code words in text, database table names, folder names,
    filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles.
    Here is an example: "Now, you can run `vagrant status`."'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '`CodeInText`：表示文本中的代码词汇、数据库表名、文件夹名称、文件名、文件扩展名、路径名、虚拟网址、用户输入和 Twitter 账户。例如：“现在，你可以运行`vagrant
    status`。”'
- en: 'A block of code is set as follows:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块按以下方式设置：
- en: '[PRE0]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们希望特别提醒你注意代码块中的某一部分时，相关的行或项目会以粗体显示：
- en: '[PRE1]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Any command-line input or output is written as follows:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 任何命令行输入或输出都按以下方式编写：
- en: '[PRE2]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '**Bold**: Indicates a new term, an important word, or words that you see onscreen.
    For example, words in menus or dialog boxes appear in the text like this. Here
    is an example: "You can find this page by going into Status | Rules on the top
    bar."'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '**粗体**：表示新术语、重要词汇或在屏幕上看到的文字。例如，菜单或对话框中的文字在文本中会这样显示。以下是一个示例：“你可以通过进入顶部栏中的状态
    | 规则找到此页面。”'
- en: Warnings or important notes appear like this.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 警告或重要说明如下所示。
- en: Tips and tricks appear like this.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 提示和技巧如下所示。
- en: Get in touch
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 联系我们
- en: Feedback from our readers is always welcome.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 我们非常欢迎读者的反馈。
- en: '**General feedback**: If you have questions about any aspect of this book,
    mention the book title in the subject of your message and email us at `customercare@packtpub.com`.'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '**一般反馈**：如果你对本书的任何方面有疑问，请在邮件主题中注明书名，并通过`customercare@packtpub.com`联系我们。'
- en: '**Errata**: Although we have taken every care to ensure the accuracy of our
    content, mistakes do happen. If you have found a mistake in this book, we would
    be grateful if you would report this to us. Please visit [www.packt.com/submit-errata](http://www.packt.com/submit-errata),
    selecting your book, clicking on the Errata Submission Form link, and entering
    the details.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '**勘误表**：尽管我们已尽力确保内容的准确性，但难免会有错误。如果你在本书中发现错误，我们将非常感激你向我们报告。请访问[www.packt.com/submit-errata](http://www.packt.com/submit-errata)，选择你的书籍，点击勘误表提交链接，输入相关细节。'
- en: '**Piracy**: If you come across any illegal copies of our works in any form
    on the Internet, we would be grateful if you would provide us with the location
    address or website name. Please contact us at `copyright@packt.com` with a link
    to the material.'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '**盗版**：如果您在互联网上发现我们作品的任何非法复制版本，我们将非常感激您提供相关的地址或网站名称。请通过`copyright@packt.com`与我们联系，并附上该材料的链接。'
- en: '**If you are interested in becoming an author**: If there is a topic that you
    have expertise in and you are interested in either writing or contributing to
    a book, please visit [authors.packtpub.com](http://authors.packtpub.com/).'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且有兴趣撰写或参与书籍的创作，请访问[authors.packtpub.com](http://authors.packtpub.com/)。'
- en: Reviews
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 评价
- en: Please leave a review. Once you have read and used this book, why not leave
    a review on the site that you purchased it from? Potential readers can then see
    and use your unbiased opinion to make purchase decisions, we at Packt can understand
    what you think about our products, and our authors can see your feedback on their
    book. Thank you!
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 请留下您的评价。阅读并使用本书后，为什么不在您购买书籍的站点上留下评价呢？潜在读者可以根据您的公正意见做出购买决策，我们在Packt能够了解您对我们产品的看法，我们的作者也可以看到您对他们书籍的反馈。谢谢！
- en: For more information about Packt, please visit [packt.com](http://www.packt.com/).
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 欲了解有关Packt的更多信息，请访问[packt.com](http://www.packt.com/)。
