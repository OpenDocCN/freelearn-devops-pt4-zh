["```\nminikube status\nminikube delete\n```", "```\nminikube start \\\n  --cpus=2 \\\n  --memory=3072 \\\n  --kubernetes-version=\"v1.14.0\" \\\n  --vm-driver=virtualbox\n```", "```\ncd ./chapter07/\n```", "```\nkubectl apply -f ./provision/kubernetes/bootstrap/\nkubectl rollout status deployment/prometheus-operator -n monitoring\n```", "```\nkubectl apply -f ./provision/kubernetes/prometheus/\nkubectl rollout status statefulset/prometheus-k8s -n monitoring\n```", "```\nkubectl apply -f ./provision/kubernetes/services/\nkubectl get servicemonitors --all-namespaces\n```", "```\nminikube service prometheus-service -n monitoring\n```", "```\nprometheus_build_info{version=\"2.9.2\"}\n```", "```\n{__name__=\"prometheus_build_info\", version=\"2.9.2\"}\n```", "```\nhttp_requests_total{code=\"200\"}[2m]\n```", "```\nmax_over_time(rate(http_requests_total{handler=\"/health\", instance=\"172.17.0.9:8000\"}[5m])[1h:1m])\n```", "```\nprocess_open_fds{instance=\"172.17.0.10:8000\", job=\"hey-service\"} 8\nprocess_open_fds{instance=\"172.17.0.11:8000\", job=\"hey-service\"} 23\n```", "```\nprocess_open_fds{job=\"hey-service\"} > 10\n```", "```\nprocess_open_fds{instance=\"172.17.0.11:8000\", job=\"hey-service\"} 23\n```", "```\nprocess_open_fds{job=\"hey-service\"} > bool 10\n```", "```\nprocess_open_fds{instance=\"172.17.0.10:8000\", job=\"hey-service\"} 0\nprocess_open_fds{instance=\"172.17.0.11:8000\", job=\"hey-service\"} 1\n```", "```\nnode_filesystem_avail_bytes{instance=\"172.17.0.13:9100\", job=\"node-exporter-service\", mountpoint=\"/Users\"} 100397019136\nnode_filesystem_avail_bytes{instance=\"172.17.0.13:9100\", job=\"node-exporter-service\", mountpoint=\"/data\"} 14120038400\nnode_filesystem_size_bytes{instance=\"172.17.0.13:9100\", job=\"node-exporter-service\", mountpoint=\"/Users\"} 250685575168\nnode_filesystem_size_bytes{instance=\"172.17.0.13:9100\", job=\"node-exporter-service\", mountpoint=\"/data\"} 17293533184\n```", "```\nnode_filesystem_avail_bytes{} / node_filesystem_size_bytes{} * 100\n```", "```\n{instance=\"172.17.0.13:9100\", job=\"node-exporter-service\", mountpoint=\"/Users\"} 40.0489813060515\n{instance=\"172.17.0.13:9100\", job=\"node-exporter-service\", mountpoint=\"/data\"} 81.64923991971679\n```", "```\nnode_filesystem_avail_bytes{instance=\"172.17.0.13:9100\", job=\"node-exporter-service\", mountpoint=\"/Users\"} 1003970\nnode_filesystem_avail_bytes{instance=\"172.17.0.13:9100\", job=\"node-exporter-service\", mountpoint=\"/data\"} 141200\nnode_filesystem_size_bytes{instance=\"172.17.0.13:9100\", job=\"node-exporter-service\", mountpoint=\"/Users\"} 2506855\nnode_filesystem_size_bytes{instance=\"172.17.0.13:9100\", job=\"node-exporter-service\", mountpoint=\"/data\"} 172935\n```", "```\nnode_filesystem_size_bytes and node_filesystem_size_bytes < 200000\n```", "```\nnode_filesystem_avail_bytes{instance=\"172.17.0.13:9100\", job=\"node-exporter-service\", mountpoint=\"/data\"} 141200\nnode_filesystem_size_bytes{instance=\"172.17.0.13:9100\", job=\"node-exporter-service\", mountpoint=\"/data\"} 172935\n```", "```\nnode_filesystem_avail_bytes > 200000 or node_filesystem_avail_bytes < 2500000\n```", "```\nnode_filesystem_avail_bytes{instance=\"172.17.0.13:9100\", job=\"node-exporter-service\", mountpoint=\"/Users\"} 1003970\n```", "```\nnode_filesystem_avail_bytes unless node_filesystem_avail_bytes < 200000\n```", "```\nnode_filesystem_avail_bytes{instance=\"172.17.0.13:9100\", job=\"node-exporter-service\", mountpoint=\"/Users\"} 1003970\nnode_filesystem_size_bytes{instance=\"172.17.0.13:9100\", job=\"node-exporter-service\", mountpoint=\"/Users\"} 2506855\n```", "```\nrate(http_requests_total[5m])\n```", "```\n{code=\"200\",endpoint=\"hey-port\",handler=\"/\",instance=\"172.17.0.10:8000\",job=\"hey-service\",method=\"get\"} 5.891716069444445\n\n{code=\"200\",endpoint=\"hey-port\",handler=\"/\",instance=\"172.17.0.11:8000\",job=\"hey-service\",method=\"get\"} 5.9669884444444445\n\n{code=\"200\",endpoint=\"hey-port\",handler=\"/\",instance=\"172.17.0.9:8000\",job=\"hey-service\",method=\"get\"} 11.1336484826487\n\n{code=\"200\",endpoint=\"hey-port\",handler=\"/health\",instance=\"172.17.0.10:8000\",job=\"hey-service\",method=\"get\"} 0.1\n\n{code=\"200\",endpoint=\"hey-port\",handler=\"/health\",instance=\"172.17.0.11:8000\",job=\"hey-service\",method=\"get\"} 0.1\n\n{code=\"200\",endpoint=\"hey-port\",handler=\"/health\",instance=\"172.17.0.9:8000\",job=\"hey-service\",method=\"get\"} 0.1000003703717421 \n```", "```\nsum(rate(http_requests_total[5m]))\n```", "```\n{} 23.292353366909335\n```", "```\nsum by (handler) (rate(http_requests_total[5m]))\n```", "```\n{handler=\"/\"} 22.99235299653759\n{handler=\"/health\"} 0.3000003703717421\n```", "```\nabsent(http_requests_total{method=\"get\"})\n```", "```\nno data\n```", "```\nabsent(http_requests_total{method=\"nonexistent_dummy_label\"})\n```", "```\n{method=\"nonexistent_dummy_label\"} 1\n```", "```\nabsent(nonexistent_dummy_name)\n```", "```\n{} 1\n```", "```\nabsent(nonexistent_dummy_name{method=\"nonexistent_dummy_label\"})\n```", "```\n{method=\"nonexistent_dummy_label\"} 1\n```", "```\nlabel_join(<vector>, <resulting_label>, <separator>, source_label1, source_labelN)\n```", "```\nhttp_requests_total{code=\"200\",endpoint=\"hey-port\", handler=\"/\",instance=\"172.17.0.10:8000\",job=\"hey-service\",method=\"get\"} 1366\nhttp_requests_total{code=\"200\",endpoint=\"hey-port\", handler=\"/health\",instance=\"172.17.0.10:8000\",job=\"hey-service\",method=\"get\"} 942\n```", "```\nlabel_join(http_requests_total{instance=\"172.17.0.10:8000\"}, \"url\", \"\", \"instance\", \"handler\")\n```", "```\nhttp_requests_total{code=\"200\",endpoint=\"hey-port\", handler=\"/\",instance=\"172.17.0.10:8000\",job=\"hey-service\", method=\"get\",url=\"172.17.0.10:8000/\"} 1366\nhttp_requests_total{code=\"200\",endpoint=\"hey-port\", handler=\"/health\",instance=\"172.17.0.10:8000\",job=\"hey-service\", method=\"get\",url=\"172.17.0.10:8000/health\"} 942\n```", "```\nlabel_replace(<vector>, <destination_label>, <regex_match_result>, <source_label>, <regex>)\n```", "```\nlabel_replace(http_requests_total{instance=\"172.17.0.10:8000\"}, \"port\", \"$1\", \"instance\", \".*:(.*)\")\n```", "```\nhttp_requests_total{code=\"200\",endpoint=\"hey-port\",handler=\"/\", instance=\"172.17.0.10:8000\", job=\"hey-service\",method=\"get\",port=\"8000\"} 1366\nhttp_requests_total{code=\"200\",endpoint=\"hey-port\",handler=\"/health\", instance=\"172.17.0.10:8000\", job=\"hey-service\",method=\"get\",port=\"8000\"} 942\n```", "```\npredict_linear(node_filesystem_free_bytes{mountpoint=\"/data\"}[1h], 60 * 60 * 4)\n{device=\"/dev/sda1\", endpoint=\"node-exporter\",fstype=\"ext4\",instance=\"10.0.2.15:9100\", job=\"node-exporter-service\",mountpoint=\"/data\", namespace=\"monitoring\", pod=\"node-exporter-r88r6\", service=\"node-exporter-service\"} 15578514805.533087\n```", "```\nhistogram_quantile(0.75, sum(rate(prometheus_http_request_duration_seconds_bucket[5m])) by (handler, le)) > 0\n```", "```\n{handler=\"/\"} 0.07500000000000001\n{handler=\"/api/v1/label/:name/values\"} 0.07500000000000001\n{handler=\"/static/*filepath\"} 0.07500000000000001\n{handler=\"/-/healthy\"} 0.07500000000000001\n{handler=\"/api/v1/query\"} 0.07500000000000001\n{handler=\"/graph\"} 0.07500000000000001\n{handler=\"/-/ready\"} 0.07500000000000001\n{handler=\"/targets\"} 0.7028607713983935\n{handler=\"/metrics\"} 0.07500000000000001\n```", "```\nvector(42)\n```", "```\n{} 42\n```", "```\nhttp_requests_total{handler=\"/\"} or vector(0)\n```", "```\nnode_uname_info{instance=”10.0.2.15:9100”}\n```", "```\nnode_uname_info{domainname=\"(none)\",endpoint=\"node-exporter\", instance=\"10.0.2.15:9100\",job=\"node-exporter-service\",machine=\"x86_64\", namespace=\"monitoring\",nodename=\"minikube\",pod=\"node-exporter-r88r6\", release=\"4.15.0\",service=\"node-exporter-service\",sysname=\"Linux\", version=\"#1 SMP Fri Dec 21 23:51:58 UTC 2018\"} 1\n```", "```\nnode_systemd_unit_state{name=\"kubelet.service\"}\n```", "```\nnode_systemd_unit_state{endpoint=\"node-exporter\",instance=\"10.0.2.15:9100\",job=\"node-exporter-service\",name=\"kubelet.service\", namespace=\"monitoring\",pod=\"node-exporter-jx2c2\", state=\"activating\"} 0\nnode_systemd_unit_state{endpoint=\"node-exporter\",instance=\"10.0.2.15:9100\",job=\"node-exporter-service\",name=\"kubelet.service\", namespace=\"monitoring\",pod=\"node-exporter-jx2c2\", state=\"active\"} 1\nnode_systemd_unit_state{endpoint=\"node-exporter\",instance=\"10.0.2.15:9100\",job=\"node-exporter-service\",name=\"kubelet.service\", namespace=\"monitoring\",pod=\"node-exporter-jx2c2\", state=\"deactivating\"} 0\nnode_systemd_unit_state{endpoint=\"node-exporter\",instance=\"10.0.2.15:9100\",job=\"node-exporter-service\",name=\"kubelet.service\", namespace=\"monitoring\",pod=\"node-exporter-jx2c2\", state=\"failed\"} 0\nnode_systemd_unit_state{endpoint=\"node-exporter\",instance=\"10.0.2.15:9100\",job=\"node-exporter-service\",name=\"kubelet.service\", namespace=\"monitoring\",pod=\"node-exporter-jx2c2\"\", state=\"inactive\"} 0\n```", "```\nprometheus_http_request_duration_seconds_bucket{le=\"0.1\"} \n```", "```\nprometheus_http_request_duration_seconds_bucket{le=\"0.1\"} / ignoring (le) prometheus_http_request_duration_seconds_count * 100\n```", "```\nsum by (job, namespace, service) (\n  rate(prometheus_http_request_duration_seconds_bucket{le=\"0.1\"}[5m])\n) / \nsum by (job, namespace, service) (\n  rate(prometheus_http_request_duration_seconds_count[5m])\n) * 100\n```", "```\nhistogram_quantile(0.95, sum without (instance, pod, handler) (rate(prometheus_http_request_duration_seconds_bucket[5m])))\n```", "```\nsum by (job) (up)\n{job=\"hey-service\"} 3\n{job=\"cadvisor-service\"} 1\n{job=\"kube-state-metrics\"} 2\n{job=\"node-exporter-service\"} 1\n{job=\"prometheus-service\"} 2\n```", "```\nsum(rate(http_requests_total[5m]))\n```", "```\nnode_filesystem_avail_bytes < node_filesystem_size_bytes * 0.2\n```", "```\nnode_filesystem_avail_bytes/node_filesystem_size_bytes * 100 < 20\nand\npredict_linear(node_filesystem_avail_bytes[6h], 4*60*60) <= 0\nand\nnode_filesystem_readonly == 0\n```", "```\nnode_exporter_build_info\n```", "```\nnode_exporter_build_info{branch=\"HEAD\",endpoint=\"node-exporter\",goversion=\"go1.11.2\", instance=\"10.0.2.15:9100\",job=\"node-exporter-service\",namespace=\"monitoring\", pod=\"node-exporter-r88r6\",revision=\"f6f6194a436b9a63d0439abc585c76b19a206b21\", service=\"node-exporter-service\",version=\"0.17.0\"} 1\n```", "```\nnode_uname_info\n```", "```\nnode_uname_info{domainname=\"(none)\",endpoint=\"node-exporter\", instance=\"10.0.2.15:9100\",job=\"node-exporter-service\",machine=\"x86_64\", namespace=\"monitoring\",nodename=\"minikube\",pod=\"node-exporter-r88r6\", release=\"4.15.0\",service=\"node-exporter-service\",sysname=\"Linux\", version=\"#1 SMP Fri Dec 21 23:51:58 UTC 2018\"} 1\n```", "```\nnode_exporter_build_info * on (pod, namespace) group_left (nodename) node_uname_info\n```", "```\n\n{branch=\"HEAD\",endpoint=\"node-exporter\",goversion=\"go1.11.2\", instance=\"10.0.2.15:9100\",job=\"node-exporter-service\",namespace=\"monitoring\", nodename=\"minikube\",pod=\"node-exporter-r88r6\", revision=\"f6f6194a436b9a63d0439abc585c76b19a206b21\", service=\"node-exporter-service\",version=\"0.17.0\"} 1\n```", "```\nsum by (container_label_io_kubernetes_pod_name) (\nrate(container_cpu_usage_seconds_total{container_label_io_kubernetes_container_name=\"node-exporter\"}[1m])\n```", "```\nlabel_join(node_exporter_build_info, \"container_label_io_kubernetes_pod_name\", \"\", \"pod\")\n```", "```\nlabel_replace(node_exporter_build_info, \"container_label_io_kubernetes_pod_name\", \"$1\", \"pod\", \"(.+)\")\n```", "```\nsum by (container_label_io_kubernetes_pod_name) (\nrate(container_cpu_usage_seconds_total{container_label_io_kubernetes_container_name=\"node-exporter\"}[1m])\n) \n* on (container_label_io_kubernetes_pod_name) \n group_left (version)\n label_replace(node_exporter_build_info, \"container_label_io_kubernetes_pod_name\", \"$1\", \"pod\", \"(.+)\")\n```"]