<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Preface</h1>
                </header>
            
            <article>
                
<p class="NormalPACKT"><span>Ceph, a unified, highly resilient, distributed storage system that provides block, object, and file access, has enjoyed a surge in popularity over the last few years. Due to being open source, Ceph has enjoyed rapid adoption by both developers and end users alike, with several well-known corporations being involved in the project. With every new release, the scale of its performance and feature set continue to grow, further enhancing Ceph's status.</span></p>
<p class="NormalPACKT"><span>With the current demands for ever-increasing data storage, and the challenges faced by legacy RAID-based systems, Ceph is well placed to offer an answer to these problems. As the world moves toward adopting new cloud technologies and object-based storage, Ceph is ready and waiting to be the driving force behind the new era of storage technologies.</span></p>
<p class="NormalPACKT"><span>In this book, we will cover a wide variety of topics, from installing and managing a Ceph cluster, through to how to recover from disasters, should you ever find yourself in that situation. For those that have interest in getting their applications to talk directly to Ceph, this book will also show you how to develop applications that make use of Ceph's libraries, and even how to perform distributed computing by inserting your own code into Ceph. By the end of this book, you will be well on your way to mastering Ceph.</span></p>
<p>The second edition of <em>Mastering Ceph</em> now includes updates around the new BlueStore technology introduced in the Luminous release, with guides to help you understand BlueStore and upgrade your existing cluster to take advantage of it.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Who this book is for</h1>
                </header>
            
            <article>
                
<p>If you are a storage professional, system administrator, or cloud engineer looking for solutions to build powerful storage systems for your cloud and on-premise infrastructure, then this book is for you.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">What this book covers</h1>
                </header>
            
            <article>
                
<p><a href="0f4119df-b421-4349-86c8-b68444743f8a.xhtml">Chapter 1</a>, <em>Planning for Ceph</em><span>, </span><span>covers the fundamentals of how Ceph works, its basic architecture, and examines some good use cases. It also discusses the planning steps that you should take before implementing Ceph, including setting design goals, developing proof of concepts and working on infrastructure design.</span></p>
<p><a href="dd1d6803-6e40-4bfb-8150-b605bcc08d59.xhtml">Chapter 2</a>, <em>Deploying Ceph with Containers</em><span>, is </span><span>a no-nonsense, step-by-step instructional chapter on how to set up a Ceph cluster. This chapter covers <kbd>ceph-deploy</kbd> for testing and goes onto cover Ansible. Finally, we take a look at the Rook project to deploy Ceph clusters running atop of a Kubernetes cluster. A section on change management is also included, and explains how this is essential for the stability of large Ceph clusters. This chapter also serves the purpose of providing the reader with a common platform on which you can build the examples that we use later in the book.</span></p>
<p><a href="5c188246-4bac-42ef-8135-ba55336f3847.xhtml">Chapter 3</a>, <em>BlueStore</em>, explains that Ceph has to be able to provide atomic operations around data and metadata and how FileStore was built to provide these guarantees over the top of standard filesystems. We will also cover the problems around this approach.</p>
<p><span>The chapter then introduces BlueStore, and explains how it works and the problems that it solves. This will cover the components and how they interact with different types of storage devices. We'll explore an overview of key value stores, including RocksDB, which is used by BlueStore. Some of the BlueStore settings will be discussed, along with how they interact with different hardware configurations.</span></p>
<p>The chapter finishes by discussing the methods available to upgrade a cluster to BlueStore and walks the reader through an example upgrade.</p>
<p><a href="121356aa-772e-4e19-acf3-814960611bd2.xhtml">Chapter 4</a>, <em>Ceph and Non-Native Protocols</em><span>, discusses the storage abilities that Ceph provides to native Ceph clients and then highlights the issues in more legacy storage deployments where it currently doesn't enjoy widespread adoption. The chapter continues to explore the ways in which Ceph can be exported via NFS and iSCSI to clients that don't natively speak Ceph, and provides examples to demonstrate configuration.</span></p>
<p><a href="a01c8234-61a1-4d8e-9393-33a7218cf49d.xhtml">Chapter 5</a>, <em>RADOS Pools and Client Access</em><span>, explores how Ceph provides storage via the three main protocols of block, file, and object. This chapter discusses the use cases of each and the Ceph components used to provide each protocol. The chapter also covers the difference between replicated and erasure-coded pools, and takes a deeper look into the operation of erasure coded pools.</span></p>
<p><a href="1cc9712d-43b0-4d3d-a8d2-64cee7283cd0.xhtml">Chapter 6</a>, <em>Developing with Librados</em><span>, </span><span>explains how librados is used to build applications that can interact directly with a Ceph cluster. It then moves onto several different examples of using librados in different languages to give the reader an idea of how librados can be used, including in atomic transactions.</span></p>
<p><a href="8b73d4e0-d133-4eef-9ebf-51a7375cd415.xhtml">Chapter 7</a>, <em>Distributed Computation with Ceph RADOS Classes</em><span>, discusses the benefits of moving processing directly into the OSD to effectively perform distributed computing. It then covers how to get started with RADOS classes by building simple ones with Lua. It then examines how to build your own C++ RADOS class into the Ceph source tree and conduct benchmarks against performing processing on the client versus the OSD.</span></p>
<p><a href="e1176b5d-603f-424a-83db-023605c29083.xhtml">Chapter 8</a>, <em>Monitoring Ceph</em><span>, </span>starts with a description of why monitoring is important, and discusses the difference between alerting and monitoring. The chapter then covers how to obtain performance counters from all the Ceph components, explains what some of the key counters mean, and how to convert them into usable values.</p>
<p><span>An example using graphite will show the value of being able to manipulate captured data to provide more meaningful output in graph form. </span>A look at the new Ceph Dashboard, introduced in the Ceph Mimic release, is covered, along with a step-by-step example to enable it on a running Ceph cluster.</p>
<p><a href="5c0bf2de-c75e-4aa7-b3d9-8a1e038e3735.xhtml">Chapter 9</a>, <em>Tuning Ceph</em><span>, </span>starts with a brief overview on how to tune Ceph and the operating system. It also covers basic concepts of avoiding trying to tune something that is not a bottleneck. It also covers the areas that you may wish to tune and establish how to gauge the success of tuning attempts. I<span>t then shows how to benchmark Ceph and take baseline measurements, so that any results achieved are meaningful. Finally, it discusses different tools and how benchmarks might relate to real-life performance.</span></p>
<p><span><a href="7fd1cf0a-aaef-4132-ba9d-ad4294dd9e23.xhtml">Chapter 10</a>, <em>Tiering with Ceph</em></span><span>, explains how RADOS tiering works in Ceph, where it should be used, and its pitfalls. The chapter goes on take the reader through a step-by-step guide on configuring tiering on a Ceph cluster, and finally covers the tuning options to be able to extract the best performance for tiering.</span></p>
<p><span><a href="bf50389d-8256-4cbf-ae32-01a494ab4189.xhtml">Chapter 11</a>, <em>Troubleshooting</em></span><span>, outlines how, although Ceph is largely autonomous in taking care of itself and recovering from failure scenarios, in some cases, human intervention is required. This chapter will look at common errors and failure scenarios, and how to bring Ceph back to full health by troubleshooting them.</span></p>
<p><span><a href="953d93b9-5cc3-4ca2-abea-24b7dc802c37.xhtml">Chapter 12</a>, <em>Disaster Recovery</em></span><span>, details how, when Ceph is such a state that a complete loss of service or data loss has occurred, less familiar recovery techniques are required to restore access to the cluster and hopefully recover data. This chapter arms you with the knowledge to attempt recovery in these scenarios.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">To get the most out of this book</h1>
                </header>
            
            <article>
                
<p style="color: black">This book assumes a medium level of proficiency on the Linux operating system, and a basic knowledge of storage technologies and networking. Although the book will go through a simple multinode setup of a Ceph cluster, it would be advisable that the reader has some prior experience of using Ceph. Although the book uses Virtual Box, feel free to use any other lab environment, such as VMware Workstation or other tools.</p>
<p style="color: black">This book requires that you have enough resources for the whole Ceph lab environment. The minimum hardware or virtual requirements are listed as follows:</p>
<ul>
<li>CPU: 2 cores</li>
<li>Memory: 8 GB RAM (16 GB recommended)</li>
<li>Disk space: 40 GB</li>
</ul>
<p style="color: black">To follow along with book, you'll need the following software:</p>
<ul>
<li>VirtualBox</li>
<li>vagrant</li>
</ul>
<p style="color: black">Internet connectivity is required to install the necessary packages that are part of the examples in each chapter.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Download the example code files</h1>
                </header>
            
            <article>
                
<p>You can download the example code files for this book from your account at <a href="http://www.packt.com" target="_blank">www.packt.com</a>. If you purchased this book elsewhere, you can visit <a href="http://www.packt.com/support" target="_blank">www.packt.com/support</a> and register to have the files emailed directly to you.</p>
<p>You can download the code files by following these steps:</p>
<ol>
<li>Log in or register at <a href="http://www.packt.com" target="_blank">www.packt.com</a>.</li>
<li>Select the <span class="packt_screen">SUPPORT</span> tab.</li>
<li>Click on <span class="packt_screen">Code Downloads &amp; Errata</span>.</li>
<li>Enter the name of the book in the <span class="packt_screen">Search</span> box and follow the onscreen instructions.</li>
</ol>
<p>Once the file is downloaded, please make sure that you unzip or extract the folder using the latest version of:</p>
<ul>
<li>WinRAR/7-Zip for Windows</li>
<li>Zipeg/iZip/UnRarX for Mac</li>
<li>7-Zip/PeaZip for Linux</li>
</ul>
<p><span>The code bundle for the book is also hosted on GitHub at</span><span> <a href="https://github.com/PacktPublishing/Mastering-Ceph-Second-Edition">https://github.com/PacktPublishing/Mastering-Ceph-Second-Edition</a></span><span>. </span><span>In case there's an update to the code, it will be updated on the existing GitHub repository.</span></p>
<p><span>We also have other code bundles from our rich catalog of books and videos available at</span><span> </span><strong><span class="Object"><a href="https://github.com/PacktPublishing/" target="_blank">https://github.com/PacktPublishing/</a></span></strong><span>. Check them out!</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Download the color images</h1>
                </header>
            
            <article>
                
<p>We also provide a PDF file that has color images of the screenshots/diagrams used in this book. You can download it here: <a href="https://www.packtpub.com/sites/default/files/downloads/9781789610703_ColorImages.pdf">https://www.packtpub.com/sites/default/files/downloads/9781789610703_ColorImages.pdf</a>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Conventions used</h1>
                </header>
            
            <article>
                
<p>There are a number of text conventions used throughout this book.</p>
<p><kbd>CodeInText</kbd>: <span>Indicates c</span>ode words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. <span>Here is an example:</span> "<span class="fontstyle0">Install the</span> <kbd><span class="fontstyle2">corosync</span></kbd><span class="fontstyle0">,</span> <kbd><span class="fontstyle2">pacemaker</span></kbd><span class="fontstyle0">, an</span>d <kbd>cmrsh</kbd> toolse<span class="fontstyle0">ts using the following code:</span>"</p>
<p>A block of code is set as follows:</p>
<pre><span class="fontstyle0">Vagrant.configure("2") do |config|<br/>nodes.each do |node|<br/>config.vm.define node[:hostname] do |nodeconfig|<br/>nodeconfig.vm.box = "bento/ubuntu-16.04"</span> </pre>
<p>When we wish to draw your attention to a particular part of a code block, the relevant lines or items are set in bold:</p>
<pre><span class="fontstyle0">Vagrant.configure("2") do |config|<br/>nodes.each do |node|<br/><strong>config.vm.define node[:hostname] do |nodeconfig|</strong><br/>nodeconfig.vm.box = "bento/ubuntu-16.04"</span> </pre>
<p>Any command-line input or output is written as follows:</p>
<pre><strong> <span class="fontstyle0">yum install *.rpm</span> </strong></pre>
<p><strong>Bold</strong>: Indicates a new term, an important word, or w<span>ords that you see onscreen. For example, words in menus or dialog boxes appear in the text like this. Here is an example: "<span class="fontstyle0">Click on the</span> <span class="fontstyle2"><span class="packt_screen">Repo URL</span></span> <span class="fontstyle0">link, which will take you to the repository directory tree.</span></span><span>"</span></p>
<div class="packt_infobox">Warnings or important notes appear like this.</div>
<div class="packt_tip">Tips and tricks appear like this.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Get in touch</h1>
                </header>
            
            <article>
                
<p>Feedback from our readers is always welcome.</p>
<p class="mce-root"><strong>General feedback</strong>: If you have questions about any aspect of this book, <span>mention the book title in the subject of your message and</span> email us at <kbd><span>customercare@packtpub.com</span></kbd>.</p>
<p><strong>Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you would report this to us. Please visit <a href="http://www.packt.com/submit-errata" target="_blank">www.packt.com/submit-errata</a>, selecting your book, clicking on the Errata Submission Form link, and entering the details.</p>
<p><strong>Piracy</strong>: If you come across any illegal copies of our works in any form on the Internet, we would be grateful if you would provide us with the location address or website name. Please contact us at <kbd>copyright@packt.com</kbd> with a link to the material.</p>
<p class="mce-root"><strong>If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please visit <a href="http://authors.packtpub.com/" target="_blank">authors.packtpub.com</a>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Reviews</h1>
                </header>
            
            <article>
                
<p>Please leave a review. Once you have read and used this book, why not leave a review on the site that you purchased it from? Potential readers can then see and use your unbiased opinion to make purchase decisions, we at Packt can understand what you think about our products, and our authors can see your feedback on their book. Thank you!</p>
<p>For more information about Packt, please visit <a href="http://www.packt.com/" target="_blank">packt.com</a>.</p>


            </article>

            
        </section>
    </body></html>