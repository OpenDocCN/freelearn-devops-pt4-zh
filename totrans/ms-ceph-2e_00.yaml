- en: Preface
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Ceph, a unified, highly resilient, distributed storage system that provides
    block, object, and file access, has enjoyed a surge in popularity over the last
    few years. Due to being open source, Ceph has enjoyed rapid adoption by both developers
    and end users alike, with several well-known corporations being involved in the
    project. With every new release, the scale of its performance and feature set
    continue to grow, further enhancing Ceph's status.
  prefs: []
  type: TYPE_NORMAL
- en: With the current demands for ever-increasing data storage, and the challenges
    faced by legacy RAID-based systems, Ceph is well placed to offer an answer to
    these problems. As the world moves toward adopting new cloud technologies and
    object-based storage, Ceph is ready and waiting to be the driving force behind
    the new era of storage technologies.
  prefs: []
  type: TYPE_NORMAL
- en: In this book, we will cover a wide variety of topics, from installing and managing
    a Ceph cluster, through to how to recover from disasters, should you ever find
    yourself in that situation. For those that have interest in getting their applications
    to talk directly to Ceph, this book will also show you how to develop applications
    that make use of Ceph's libraries, and even how to perform distributed computing
    by inserting your own code into Ceph. By the end of this book, you will be well
    on your way to mastering Ceph.
  prefs: []
  type: TYPE_NORMAL
- en: The second edition of *Mastering Ceph* now includes updates around the new BlueStore
    technology introduced in the Luminous release, with guides to help you understand
    BlueStore and upgrade your existing cluster to take advantage of it.
  prefs: []
  type: TYPE_NORMAL
- en: Who this book is for
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: If you are a storage professional, system administrator, or cloud engineer looking
    for solutions to build powerful storage systems for your cloud and on-premise
    infrastructure, then this book is for you.
  prefs: []
  type: TYPE_NORMAL
- en: What this book covers
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '[Chapter 1](0f4119df-b421-4349-86c8-b68444743f8a.xhtml), *Planning for Ceph*, covers
    the fundamentals of how Ceph works, its basic architecture, and examines some
    good use cases. It also discusses the planning steps that you should take before
    implementing Ceph, including setting design goals, developing proof of concepts
    and working on infrastructure design.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 2](dd1d6803-6e40-4bfb-8150-b605bcc08d59.xhtml), *Deploying Ceph with
    Containers*, is a no-nonsense, step-by-step instructional chapter on how to set
    up a Ceph cluster. This chapter covers `ceph-deploy` for testing and goes onto
    cover Ansible. Finally, we take a look at the Rook project to deploy Ceph clusters
    running atop of a Kubernetes cluster. A section on change management is also included,
    and explains how this is essential for the stability of large Ceph clusters. This
    chapter also serves the purpose of providing the reader with a common platform
    on which you can build the examples that we use later in the book.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 3](5c188246-4bac-42ef-8135-ba55336f3847.xhtml), *BlueStore*, explains
    that Ceph has to be able to provide atomic operations around data and metadata
    and how FileStore was built to provide these guarantees over the top of standard
    filesystems. We will also cover the problems around this approach.'
  prefs: []
  type: TYPE_NORMAL
- en: The chapter then introduces BlueStore, and explains how it works and the problems
    that it solves. This will cover the components and how they interact with different
    types of storage devices. We'll explore an overview of key value stores, including
    RocksDB, which is used by BlueStore. Some of the BlueStore settings will be discussed,
    along with how they interact with different hardware configurations.
  prefs: []
  type: TYPE_NORMAL
- en: The chapter finishes by discussing the methods available to upgrade a cluster
    to BlueStore and walks the reader through an example upgrade.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 4](121356aa-772e-4e19-acf3-814960611bd2.xhtml), *Ceph and Non-Native
    Protocols*, discusses the storage abilities that Ceph provides to native Ceph
    clients and then highlights the issues in more legacy storage deployments where
    it currently doesn''t enjoy widespread adoption. The chapter continues to explore
    the ways in which Ceph can be exported via NFS and iSCSI to clients that don''t
    natively speak Ceph, and provides examples to demonstrate configuration.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 5](a01c8234-61a1-4d8e-9393-33a7218cf49d.xhtml), *RADOS Pools and Client
    Access*, explores how Ceph provides storage via the three main protocols of block,
    file, and object. This chapter discusses the use cases of each and the Ceph components
    used to provide each protocol. The chapter also covers the difference between
    replicated and erasure-coded pools, and takes a deeper look into the operation
    of erasure coded pools.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 6](1cc9712d-43b0-4d3d-a8d2-64cee7283cd0.xhtml), *Developing with Librados*, explains
    how librados is used to build applications that can interact directly with a Ceph
    cluster. It then moves onto several different examples of using librados in different
    languages to give the reader an idea of how librados can be used, including in
    atomic transactions.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 7](8b73d4e0-d133-4eef-9ebf-51a7375cd415.xhtml), *Distributed Computation
    with Ceph RADOS Classes*, discusses the benefits of moving processing directly
    into the OSD to effectively perform distributed computing. It then covers how
    to get started with RADOS classes by building simple ones with Lua. It then examines
    how to build your own C++ RADOS class into the Ceph source tree and conduct benchmarks
    against performing processing on the client versus the OSD.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 8](e1176b5d-603f-424a-83db-023605c29083.xhtml), *Monitoring Ceph*, starts
    with a description of why monitoring is important, and discusses the difference
    between alerting and monitoring. The chapter then covers how to obtain performance
    counters from all the Ceph components, explains what some of the key counters
    mean, and how to convert them into usable values.'
  prefs: []
  type: TYPE_NORMAL
- en: An example using graphite will show the value of being able to manipulate captured
    data to provide more meaningful output in graph form. A look at the new Ceph Dashboard,
    introduced in the Ceph Mimic release, is covered, along with a step-by-step example
    to enable it on a running Ceph cluster.
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 9](5c0bf2de-c75e-4aa7-b3d9-8a1e038e3735.xhtml), *Tuning Ceph*, starts
    with a brief overview on how to tune Ceph and the operating system. It also covers
    basic concepts of avoiding trying to tune something that is not a bottleneck.
    It also covers the areas that you may wish to tune and establish how to gauge
    the success of tuning attempts. It then shows how to benchmark Ceph and take baseline
    measurements, so that any results achieved are meaningful. Finally, it discusses
    different tools and how benchmarks might relate to real-life performance.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 10](7fd1cf0a-aaef-4132-ba9d-ad4294dd9e23.xhtml), *Tiering with Ceph*,
    explains how RADOS tiering works in Ceph, where it should be used, and its pitfalls.
    The chapter goes on take the reader through a step-by-step guide on configuring
    tiering on a Ceph cluster, and finally covers the tuning options to be able to
    extract the best performance for tiering.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 11](bf50389d-8256-4cbf-ae32-01a494ab4189.xhtml), *Troubleshooting*,
    outlines how, although Ceph is largely autonomous in taking care of itself and
    recovering from failure scenarios, in some cases, human intervention is required.
    This chapter will look at common errors and failure scenarios, and how to bring
    Ceph back to full health by troubleshooting them.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Chapter 12](953d93b9-5cc3-4ca2-abea-24b7dc802c37.xhtml), *Disaster Recovery*,
    details how, when Ceph is such a state that a complete loss of service or data
    loss has occurred, less familiar recovery techniques are required to restore access
    to the cluster and hopefully recover data. This chapter arms you with the knowledge
    to attempt recovery in these scenarios.'
  prefs: []
  type: TYPE_NORMAL
- en: To get the most out of this book
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This book assumes a medium level of proficiency on the Linux operating system,
    and a basic knowledge of storage technologies and networking. Although the book
    will go through a simple multinode setup of a Ceph cluster, it would be advisable
    that the reader has some prior experience of using Ceph. Although the book uses
    Virtual Box, feel free to use any other lab environment, such as VMware Workstation
    or other tools.
  prefs: []
  type: TYPE_NORMAL
- en: 'This book requires that you have enough resources for the whole Ceph lab environment.
    The minimum hardware or virtual requirements are listed as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: 'CPU: 2 cores'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Memory: 8 GB RAM (16 GB recommended)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Disk space: 40 GB'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'To follow along with book, you''ll need the following software:'
  prefs: []
  type: TYPE_NORMAL
- en: VirtualBox
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: vagrant
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Internet connectivity is required to install the necessary packages that are
    part of the examples in each chapter.
  prefs: []
  type: TYPE_NORMAL
- en: Download the example code files
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You can download the example code files for this book from your account at [www.packt.com](http://www.packt.com).
    If you purchased this book elsewhere, you can visit [www.packt.com/support](http://www.packt.com/support)
    and register to have the files emailed directly to you.
  prefs: []
  type: TYPE_NORMAL
- en: 'You can download the code files by following these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Log in or register at [www.packt.com](http://www.packt.com).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Select the SUPPORT tab.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Click on Code Downloads & Errata.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Enter the name of the book in the Search box and follow the onscreen instructions.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Once the file is downloaded, please make sure that you unzip or extract the
    folder using the latest version of:'
  prefs: []
  type: TYPE_NORMAL
- en: WinRAR/7-Zip for Windows
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Zipeg/iZip/UnRarX for Mac
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 7-Zip/PeaZip for Linux
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The code bundle for the book is also hosted on GitHub at [https://github.com/PacktPublishing/Mastering-Ceph-Second-Edition](https://github.com/PacktPublishing/Mastering-Ceph-Second-Edition). In
    case there's an update to the code, it will be updated on the existing GitHub
    repository.
  prefs: []
  type: TYPE_NORMAL
- en: We also have other code bundles from our rich catalog of books and videos available
    at **[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)**.
    Check them out!
  prefs: []
  type: TYPE_NORMAL
- en: Download the color images
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'We also provide a PDF file that has color images of the screenshots/diagrams
    used in this book. You can download it here: [https://www.packtpub.com/sites/default/files/downloads/9781789610703_ColorImages.pdf](https://www.packtpub.com/sites/default/files/downloads/9781789610703_ColorImages.pdf).'
  prefs: []
  type: TYPE_NORMAL
- en: Conventions used
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: There are a number of text conventions used throughout this book.
  prefs: []
  type: TYPE_NORMAL
- en: '`CodeInText`: Indicates code words in text, database table names, folder names,
    filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles.
    Here is an example: "Install the `corosync`, `pacemaker`, and `cmrsh` toolsets
    using the following code:"'
  prefs: []
  type: TYPE_NORMAL
- en: 'A block of code is set as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Any command-line input or output is written as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '**Bold**: Indicates a new term, an important word, or words that you see onscreen.
    For example, words in menus or dialog boxes appear in the text like this. Here
    is an example: "Click on the Repo URL link, which will take you to the repository
    directory tree."'
  prefs: []
  type: TYPE_NORMAL
- en: Warnings or important notes appear like this.
  prefs: []
  type: TYPE_NORMAL
- en: Tips and tricks appear like this.
  prefs: []
  type: TYPE_NORMAL
- en: Get in touch
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Feedback from our readers is always welcome.
  prefs: []
  type: TYPE_NORMAL
- en: '**General feedback**: If you have questions about any aspect of this book,
    mention the book title in the subject of your message and email us at `customercare@packtpub.com`.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Errata**: Although we have taken every care to ensure the accuracy of our
    content, mistakes do happen. If you have found a mistake in this book, we would
    be grateful if you would report this to us. Please visit [www.packt.com/submit-errata](http://www.packt.com/submit-errata),
    selecting your book, clicking on the Errata Submission Form link, and entering
    the details.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Piracy**: If you come across any illegal copies of our works in any form
    on the Internet, we would be grateful if you would provide us with the location
    address or website name. Please contact us at `copyright@packt.com` with a link
    to the material.'
  prefs: []
  type: TYPE_NORMAL
- en: '**If you are interested in becoming an author**: If there is a topic that you
    have expertise in and you are interested in either writing or contributing to
    a book, please visit [authors.packtpub.com](http://authors.packtpub.com/).'
  prefs: []
  type: TYPE_NORMAL
- en: Reviews
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Please leave a review. Once you have read and used this book, why not leave
    a review on the site that you purchased it from? Potential readers can then see
    and use your unbiased opinion to make purchase decisions, we at Packt can understand
    what you think about our products, and our authors can see your feedback on their
    book. Thank you!
  prefs: []
  type: TYPE_NORMAL
- en: For more information about Packt, please visit [packt.com](http://www.packt.com/).
  prefs: []
  type: TYPE_NORMAL
