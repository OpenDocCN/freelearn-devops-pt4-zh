<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Mastering a Modern Development Environment</h1>
                </header>
            
            <article>
                
<p>In the previous chapter, we introduced Dynamics 365 Business Central and revealed that its skeleton is Microsoft cloud microservices. </p>
<p>In this chapter, we will take a close look at the development environment. We will discuss the main shortcuts, tips, and tricks related to Visual Studio Code, the official development platform, and the AL language, the development language extension. The union between Visual Studio Code and AL defines the so-called modern development environment.</p>
<p>AL is the official extension provided by Microsoft, free of charge, through the online marketplace. Officially released in 2017 to extend what was then called Dynamics 365 for Financials, it is now a solid fully fledged development language that extends Dynamics 365 Business Central. It comes equipped with a lot of features that greatly enhance developers' productivity and coding quality.</p>
<p>The main goal of this chapter is to help Dynamics 365 Business Central developers understand what the development platform offers, unleash all their potential, and become proficient in their daily coding activities.</p>
<p>In this chapter, you will learn the following:</p>
<ul>
<li>What the Visual Studio Code user interface is composed of, and the purpose of each section</li>
<li>How to be proficient in using the most powerful Visual Studio Code editing features</li>
<li>What the AL language extension is, and what it consists of</li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Mastering Visual Studio Code</h1>
                </header>
            
            <article>
                
<p>Visual Studio Code is one of the most widely used development environments worldwide. It is engineered to make it easy and quick to design cloud- and web-based applications, using a plethora of extensible languages. The application is focused on maximizing code editing and also unleashing the developer's potential by providing useful shortcuts to provide quick access to all that is needed in a specific development context.</p>
<p>When you start Visual Studio Code, freshly installed, it will show you the typical <span class="packt_screen">Welcome</span> page:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/a7f9c7c7-a01f-41c0-b3ca-69be7d020562.png" style="width:50.67em;height:38.25em;"/></p>
<p>The <span class="packt_screen">Welcome</span> page contains the following:</p>
<ul>
<li><strong>Start</strong>: Shortcuts for creating and opening files and folders</li>
<li><strong>Recent</strong>: A list of recently opened files and folders</li>
<li><strong>Help</strong>: A list of documentation sheets, product docs, videos, and useful resources</li>
<li><strong>Customize</strong>: How to customize Visual Studio Code through extensions, keyboard shortcuts, background color themes, and so on</li>
<li><strong>Learn</strong>: Additional shortcuts to learning resources that are related to the most widely used commands, and how to master the user interface</li>
</ul>
<p>The Welcome page is loaded whenever you run the Visual Studio Code as a new window (<em>Ctrl</em> + <em>Shift</em> + <em>N</em>). It is possible to change this behavior by unchecking <span class="packt_screen">show welcome page on start</span><span class="packt_screen">up</span> or clicking <span class="packt_screen">File | Preferences | Settings</span> and searching for Welcome page.</p>
<p>The Visual Studio Code environment is divided into five main areas:</p>
<ul>
<li>Code editor</li>
<li>Status bar</li>
<li>View bar</li>
<li>Sidebar</li>
<li>Panels area</li>
</ul>
<p>Let's look at each of them in the following sections.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Code editor</h1>
                </header>
            
            <article>
                
<p>The code editor is where you write your code and where you spend most of your time. It is activated when creating a new file, or when opening an existing file or folder.</p>
<p class="mce-root"/>
<p>You are allowed to edit just one single file, or you can even load and work with multiple files at the same time, side by side:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/4f708006-72d4-4eb9-8294-030702726dc6.png"/></p>
<p>There are different ways to have multiple file views; three are mentioned here:</p>
<ul>
<li>Select a filename in the <span class="packt_screen">EXPLORER</span> bar, then right-click and select <span class="packt_screen">Open to the Side</span> (<em>Ctrl</em> + <em>Enter</em>).</li>
<li><em>Ctrl</em> + click on a filename in the <span class="packt_screen"><span>EXPLORER</span></span> bar.</li>
<li><em>Ctrl</em> + <em>\</em> to split the editor into two parts.</li>
</ul>
<p>It will accommodate several files, dividing the space equally between them. You can move through the different file editors by simply pressing <em>Ctrl</em> + <em>1</em>, <em>Ctrl</em> + <em>2</em>, <em>Ctrl</em> + <em>3</em>, …, <em>Ctrl </em>+ <em>N</em>.</p>
<p>Editor windows can be resized, reordered, and zoomed in/out according to your needs. To zoom in/out press <em>Ctrl</em> + <em>+ </em>/ <em>Ctrl</em> + <em>-</em>, or <span class="packt_screen">View | Zoom in</span> / <span class="packt_screen">Zoom out</span>.</p>
<div class="packt_infobox">Zooming applies to all Visual Studio Code areas, not only to the code editor.</div>
<p class="mce-root"/>
<p>Visual Studio Code also provides an easy way of navigating between files with shortcuts. The quickest way is to press <em>Ctrl</em> + <em>Tab</em>. This will open the list of files that have been opened since Visual Studio Code started.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Status bar</h1>
                </header>
            
            <article>
                
<p>The status bar typically contains information about the currently selected file or folder. It also provides some actionable shortcuts:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/27851c2c-a1e8-4fac-acbd-16d4361fabe5.png"/></p>
<p>From left to right, the status bar contains the following information:</p>
<ol>
<li>If Git is enabled, it will report version control information, such as the current branch.</li>
<li>Number of errors and/or warnings detected in the current code.</li>
<li>Cursor position (line position and column position).</li>
<li>Indentation size and type (spaces or tabs).</li>
<li>Encoding of the currently selected file.</li>
<li>Line terminator: <strong>Carriage return</strong> (<strong>CR</strong>) and/or <strong>line feed</strong> (<strong>LF</strong>).</li>
<li>Language used to process the code in the selected file. If you click on the language, a menu will appear, and you should be able to change the processing programming language.</li>
<li>Feedback button, which you can use to share your feedback about Visual Studio Code on Twitter.</li>
<li>Notification icon. This shows the number of new notifications, which are typically related to product updates.</li>
</ol>
<div class="packt_infobox">The status bar has a conventional colorization, and it changes depending on what's processing. It is purple when opening a file, blue when opening a folder, orange when debugging, and so on.</div>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">View bar</h1>
                </header>
            
            <article>
                
<p>This is on the left side of the workspace, and contains shortcuts to the sidebar. If a shortcut is clicked, the sidebar that belongs to the tool that has been chosen becomes visible. Clicking again, or pressing <em>Ctrl</em> + <em>B</em>, makes it disappear.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Sidebar</h1>
                </header>
            
            <article>
                
<p>The sidebar is the place where you will interact the most with the code editor. It is context-sensitive, and you will find five standard activities, each enabled by the corresponding icon in the view bar.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">EXPLORER (Ctrl + Shift + E)</h1>
                </header>
            
            <article>
                
<p><span class="packt_screen">EXPLORER</span> provides a structured and organized view of the folder and files that you are currently working with. The <span class="packt_screen">OPEN EDITORS</span> sub-view contains the list of active files in the code editor. Below this section, there might be another sub-view with the name of the folder that is open:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/fa48f11f-e75f-46e3-ab38-92cc85b3ed93.png" style="width:30.58em;height:23.83em;"/></p>
<p class="mce-root"/>
<p>If you hover over the <span class="packt_screen">OPEN EDITORS</span> sub-view, three action buttons will be shown: <span class="packt_screen">Toggle Vertical/Horizontal Editor Layout</span> (<em>Shift</em> + <em>Alt</em> + <em>O</em>), <span class="packt_screen">Save All</span> (<em>Ctrl</em> + <em>K</em> + <em>S</em>), and <span class="packt_screen">Close All Files</span> (<em>Ctrl</em> + <em>K</em> or <em>Ctrl</em> + <em>W</em>). They are all self-explanatory:</p>
<div class="CDPAlignCenter packt_figref CDPAlign"><img src="assets/c29f2344-95cf-4321-922a-994a3d1a1382.png" style="width:26.58em;height:1.83em;"/></div>
<p>Hovering over the folder name (in this example <kbd>PW_V2</kbd>) will make four action buttons visible:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/c92ee73d-c3bd-45d5-93e2-c3482cba03e4.png" style="width:27.33em;height:2.25em;"/></p>
<p>From left to right, these are <span class="packt_screen">New File</span>, <span class="packt_screen">New Folder</span>, <span class="packt_screen">Refresh</span>, and <span class="packt_screen">Collapse All</span>. They are self-explanatory.</p>
<p>Right-clicking on a folder or filename will open a context menu that shows common commands such as <span class="packt_screen">Reveal in Explorer</span><strong><em> </em></strong>(<em>Shift</em> + <em>Alt</em> + <em>R</em>), which opens the folder that contains the selected file. You can also copy the file path via <span class="packt_screen">Copy Path</span> (<em>Shift</em> + <em>Alt</em> + <em>C</em>).</p>
<p>Down in the <span class="packt_screen">EXPLORER</span> bar, there is another section called <span class="packt_screen">OUTLINE</span>. It gives a very useful tree-view of members and types for a specific file. <span>Consider the following screenshot:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/cc0c3d16-ed4a-416d-85ef-30d6fa793a63.png" style="width:21.00em;height:20.83em;"/></p>
<p class="mce-root"/>
<p><span>This is indeed a powerful option when you are developing complex objects and you want to jump into a specific area in one click.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">SEARCH (Ctrl + Shift + F)</h1>
                </header>
            
            <article>
                
<p>This is a powerful tool for searching for and replacing text in files. It is possible to opt for a simple search with one or more keywords, and you can use wildcards such as * and ?. Alternatively, you can opt for creating a complex search based on regular expressions (regex). There are also advanced options to include and/or exclude files or file types.</p>
<p>This is really helpful for developers when searching the <em>where used</em> field or variables in all files within an extension folder. <span>Consider the following screenshot:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/b5654c6c-42b5-45b6-a987-ac5e247a165b.png" style="width:31.25em;height:28.92em;"/></p>
<p>Search outputs are listed in a tree-view that lists all files containing the search keyword, and shows a small piece of code related to the line that they belong to in the file. The keyword match is highlighted in the tree-view, as well as within the code editor. These can be all collapsed by clicking the <span class="packt_screen">Collapse All</span> button.</p>
<p class="mce-root"/>
<p>It is possible to reset the search results by clicking the <span class="packt_screen">Clear Search Results</span> button.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">SOURCE CONTROL (Ctrl + Shift + G)</h1>
                </header>
            
            <article>
                
<p>Visual Studio Code provides native integration with one of the most widely known source control management systems: Git. The basics and integration of Git will be discussed in <a href="bc01dacb-fdbe-496b-82a0-e45d2435e574.xhtml">Chapter 11</a>, <em>Source Control Management and DevOps with Business Central</em>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">DEBUG (Ctrl + Shift + D)</h1>
                </header>
            
            <article>
                
<p>Visual Studio Code is not just a code editor for editing flat files. It also ships with an out-of-the-box integrated debugger framework that can be extended to debug different platforms and languages.</p>
<p>Visual Studio Code does not provide any debugging capability for Dynamics 365 Business Central. This comes embedded in the AL language extension for Visual Studio Code, which extends the existing .NET core debugger. In <a href="076505ca-e2a0-40ab-8640-c720c9aa68ee.xhtml">Chapter 9</a>, <em>Debugging</em>, we will discuss this argument in detail. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">EXTENSIONS (Ctrl + Shift + X)</h1>
                </header>
            
            <article>
                
<p>Extensions are used to browse the online marketplace for extensions for Visual Studio Code, which include a growing plethora of additional languages, debuggers, tools, helpers, and much more. AL is an extension for Visual Studio Code that was developed by Microsoft. In the Visual Studio Code marketplace, you can also download several helpful extensions that extend (extensions for an extension) the AL Language extension and help Dynamics 365 Business Central developers be more efficient and productive and write code professionally. </p>
<p class="mce-root"/>
<p><span>Consider the following screenshot, which shows typical Visual Studio Code extensions installed for Dynamics 365 Business Central:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/d275b3b5-962b-4c68-96a5-cf7c8c157c41.png" style="width:46.75em;height:31.50em;"/></p>
<p>In the <span class="packt_screen">EXTENSIONS</span> bar, it is possible to search the online marketplace or install an extension manually. You can also see the list of installed, outdated, recommended, and disabled extensions and sort them according to different criteria.</p>
<div class="packt_infobox">Some extension packages are meant to download and install a set of extensions. With Dynamics 365 Business Central, you might think of downloading and installing AL Extension Pack from <a href="https://marketplace.visualstudio.com/items?itemName=waldo.al-extension-pack">https://marketplace.visualstudio.com/items?itemName=waldo.al-extension-pack</a> or SD Extension Pack for Dynamics 365 Business Central from <a href="https://marketplace.visualstudio.com/items?itemName=StefanoDemiliani.sd-extpack-d365bc">https://marketplace.visualstudio.com/items?itemName=StefanoDemiliani.sd-extpack-d365bc</a>.</div>
<p>It is also possible to perform actions on a single extension by right-clicking on it. An extension could be enabled, disabled, disabled per workspace (a workspace could be a project or a folder), and so on. One of the newest – and coolest – features that has been added is the ability to install another version of the extension.</p>
<p class="mce-root"/>
<p>This is very useful for Dynamics 365 Business Central developers, in case there are regression behaviors or bugs in high-AL Language extension versions. <span>Consider the following screenshot, which shows the current online AL Language extension versions:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/61b66e0d-7a6a-4415-ae84-9a75f4efa0e6.png" style="width:42.08em;height:13.08em;"/></p>
<p><span>This is also useful when developments target a specific platform version.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Manage</h1>
                </header>
            
            <article>
                
<p>The <span class="packt_screen">Manage</span> button is shown with a gear icon at the very bottom of the view bar:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/78f519d1-07cc-4959-9bc8-1d0cccf3c727.png"/></p>
<p>If you click on it, a pop-up menu with a list of commands appears. These commands are used to customize Visual Studio Code, or to search for updates.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Command Palette</h1>
                </header>
            
            <article>
                
<p>The Command Palette is one of the most important tools in Visual Studio Code. Its purpose is to give quick access to standard and extended commands. There are different ways to run the Command Palette:</p>
<ul>
<li><span class="packt_screen">Manage | Command Palette</span></li>
<li><span class="packt_screen">View | Command Palette</span></li>
<li>Keyboard shortcut: <em>Ctrl</em> + <em>Shift</em> + <em>P</em> (mostly used by all developers)</li>
</ul>
<p class="mce-root"/>
<p>The Command Palette is not only good for showing menu commands, but it can also perform other actions, such as installing extensions. You can browse through it to review the huge list of available commands. Commands are indexed and searchable. Just type a few letters to get a filtered list. It's worth mentioning the long list of keyboard shortcut(s) that are available for most of these commands. </p>
<p>One very important thing to know about the Command Palette is the use of the <kbd>&gt;</kbd> sign. When you press <em>Ctrl</em> + <em>Shift</em> + <em>P</em>, the Command Palette pops up with the <kbd>&gt;</kbd> sign and shows the list of commands available. Consider the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/a066bda5-23f0-4bb2-8513-3393964c45d2.png" style="width:49.58em;height:16.50em;"/></p>
<p>If you remove the <kbd>&gt;</kbd> symbol, Visual Studio Code uses the Command Palette to show a list of the recently opened files. The following screenshot shows this:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/9b7b15e3-3221-4eec-a1eb-fa5af09c2265.png"/></p>
<p><span>The power of this feature is that, without using the mouse, you can open the Command Palette, run a command, remove the </span><kbd><strong>&gt;</strong></kbd><span> character, and select a file to edit. That's fantastic for development productivity. </span></p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Panels area</h1>
                </header>
            
            <article>
                
<p>Visual Studio Code not only shows detailed analysis and information related to your code, but also has access and display information coming from other sources such as Git, installed extensions, and debuggers. These outputs are logged into the panels area, which, by default, is at the bottom, but could be easily moved to one side of the workspace using the <span class="packt_screen">Move Panel Right</span> button, enabled by right-clicking on the panel's title bar. It is possible to restore the original layout with the <span class="packt_screen">Move Panel to Bottom</span> button, or even <span class="packt_screen">Hide Panel</span> (<em>Ctrl</em> + <em>J</em>).</p>
<p>The Panels area is not visible by default. It is typically enabled and shown when the information needed is requested, such as when the debugger is enabled.</p>
<p>In the Panels area, there are four different windows: <span class="packt_screen">PROBLEMS</span>, <span class="packt_screen">OUTPUT</span>, <span class="packt_screen">DEBUG CONSOLE</span>, and <span class="packt_screen">TERMINAL</span>. Let's examine them in the following sections.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">PROBLEMS</h1>
                </header>
            
            <article>
                
<p>With languages that have advanced editing features, such as AL, Visual Studio Code is able to identify code problems while typing. <span><span>Problems lines have a specific colorization. </span></span>There are three types of notifications: errors, warnings, and info. All of these can be shown in the <span class="packt_screen">PROBLEMS</span> window. The following screenshot shows an e<span>xample of the <span class="packt_screen">PROBLEMS</span> window showing three errors:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/ad029571-2909-437c-b64e-357397394937.png" style="width:49.00em;height:20.67em;"/></p>
<p><span>Typically, blocking errors are shown in</span><span> red, </span><span>while warnings are marked in</span><span> green</span><span>.</span></p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">OUTPUT</h1>
                </header>
            
            <article>
                
<p>The <span class="packt_screen">OUTPUT</span> panel is the place where Visual Studio Code typically displays messages during or after command execution.</p>
<p>Because built-in tool actions and multiple extension commands can run concurrently, it is possible to make use of a drop-down box in the <span class="packt_screen">OUTPUT</span> panel to change the view, and see the output for each standard or extension-based command. </p>
<p>The following screenshot shows the <span><span class="packt_screen">OUTPUT</span> window in the Panels area:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/c61fee8b-c3b0-4b1c-9d02-81aad6e2ada3.png"/></p>
<p><span>Typically, when working with Dynamics 365 Business Central extensions, the AL language is selected.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">DEBUG CONSOLE</h1>
                </header>
            
            <article>
                
<p>This is a special window used by native and extension-based debuggers, such as the AL language debugger, to display information about code execution. This window and its output will be analyzed in detail in <a href="076505ca-e2a0-40ab-8640-c720c9aa68ee.xhtml">Chapter 9</a>, <em>Debugging</em>.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">TERMINAL</h1>
                </header>
            
            <article>
                
<p>Visual Studio Code allows us to execute commands in the same way as the Command Prompt, directly from within the development environment. The Terminal session is based on PowerShell by default.</p>
<p class="mce-root"/>
<p>Now that we have all elements that are in related to Visual Studio Code place, we can move onto the next section and analyze the powerful editing features that it offers.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Visual Studio Code – the editing features</h1>
                </header>
            
            <article>
                
<p>Visual Studio Code provides many of the features that you would expect from the best-in-class code editor. If you are familiar with Visual Studio, you might have noticed that some features have been inherited from this IDE, or engineered in a similar way.</p>
<p><em>Developed by developers for developers</em>, Visual Studio Code has keyboard shortcuts for almost every editing command, giving you the option to edit code faster, and completely forget about the mouse.</p>
<p>Let's study these features in the following sections.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Comment lines</h1>
                </header>
            
            <article>
                
<p>Visual Studio Code provides out-of-the-box commands for text selection and professional editing in the <span class="packt_screen">Edit</span> menu. The <span class="packt_screen">Edit</span> menu also includes <span class="packt_screen">Toggle Line Comment</span> (<em>Ctrl </em>+ <em>U</em>), which adds a line comment for the selected line. This means that if you select 10 lines of code, Visual Studio Code will add 10 comment lines. The beauty of this command is that it works in reverse as well. If you select the 10 commented lines and press <span class="packt_screen">Toggle Line Comment</span>, the comments will be magically removed.</p>
<p>For developers working with CSIDE, the old legacy language for on-premises Dynamics 365 Business Central, this command is the equivalent of <span class="packt_screen">Comment Selection</span> (<em>Shift</em> + <em>Ctrl</em> + <em>K</em>) and <span class="packt_screen">Uncomment Selection</span> (<em>Shift </em>+ <em>Ctrl </em>+ <em>O</em>).</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Delimiter matching</h1>
                </header>
            
            <article>
                
<p>Visual Studio Code is capable of detecting pairs of delimiters, such as brackets and parentheses. This feature is really helpful if you want to delimit code blocks, and it kicks in when the mouse is placed near one of the delimiter pairs:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/89e5b9dc-75f4-43e5-9c85-af684ad075a4.png" style="width:22.83em;height:11.33em;"/></p>
<p>The preceding code is an example of<strong> </strong>d<span>elimiter matching.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Text selection</h1>
                </header>
            
            <article>
                
<p>The <span class="packt_screen">Selection</span> menu also has commands that relate to text selection, but most of them are used to move or duplicate lines of code above and below the selected line.</p>
<p>If you position the cursor near an AL function, variable, or constant, you can use <span class="packt_screen">Add Next Occurrence</span> (<em>Ctrl</em> + <em>D)</em>, <span class="packt_screen">Add Previous Occurrence</span>, or <span class="packt_screen">Select All Occurrence</span><strong><em>s</em></strong> (<em>Shift</em> + <em>Ctrl</em> + <em>D</em>) to select occurrences of the selected item, and occurrences will be highlighted in a different color.</p>
<p>In the code editor, you can also press <em>Ctrl</em> + <em>D</em> for a word or identifier selection on the right of the cursor. You can then easily expand (<em>Shift</em> + <em>Alt</em> + →) or shrink (<em>Shift</em> + <em>Alt</em> + ←) text blocks within delimiters.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Code block folding</h1>
                </header>
            
            <article>
                
<p>If you hover over line numbers in the code editor, a <kbd>-</kbd> will appear close to the initial part of a code block. Click on it to fold it, and a <kbd>+</kbd> will appear. Click on this, and <span>the code block </span>unfolds:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/e5002d69-7f9f-4594-872c-e0e05641d6c0.png" style="width:37.67em;height:13.92em;"/></p>
<p>The preceding screenshot shows the <span>code block folding depicted with <kbd>+</kbd>.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Multiple cursors (or multi-cursor)</h1>
                </header>
            
            <article>
                
<p>Each cursor operates independently. <em>Alt</em> + click will generate a secondary cursor at the desired position.</p>
<p>The most common development situation in which you want to go for multiple cursors is when you need to add or replace the same text in different positions, but within the same source file. The following screenshot shows three cursors in action when editing the <kbd>DataClassification</kbd> property:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/9cc8d80f-aa7b-42ec-be6f-c5919670e0fb.png" style="width:19.25em;height:22.92em;"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>This is a great feature for AL language developers, especially when they have to write down the same sentence many times in the same place (for example, <kbd>Caption</kbd> <span>or </span><kbd>DataClassification</kbd> <span>in a table object and for each table field).</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Mini-map</h1>
                </header>
            
            <article>
                
<p>Sometimes, when working with very long files such as report source files (RDLs) or codeunits, it is pretty difficult to know where the pointer should be positioned – or is positioned – within a source file. Visual Studio Code has a full-fledged mini-map feature: a small preview of the source code file. The following is an example of an RDL:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/feba5994-d844-48b3-8842-e3a1040feaf7.png" style="width:49.17em;height:24.83em;"/></p>
<p>The mini-map feature can be disabled/enabled through <span class="packt_screen">View | Toggle Minimap</span>, or by running the <span class="packt_screen">Command Palette</span> (<em>Ctrl</em> + <em>Shift</em> + <em>P</em>) and selecting <span class="packt_screen">View: Toggle Minimap</span>.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Breadcrumbs</h1>
                </header>
            
            <article>
                
<p>The <span class="packt_screen">Show Breadcrumbs</span> command is available in the <span class="packt_screen">View</span> menu. With AL files, there is an icon in the top-left corner of the code editor. This can be expanded to double-check the definitions of properties, functions, fields, keys, and so on:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/49acd2a0-3d17-436b-b698-7b3cf2032347.png" style="width:35.17em;height:24.50em;"/></p>
<p>If you click on an element in the expanded list, the cursor will jump to its primary definition, making code navigation quite fast.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">IntelliSense</h1>
                </header>
            
            <article>
                
<p>In visual editors, IntelliSense is a word completion tool that appears as a pop-up list while you type. Visual Studio Code IntelliSense can provide smart suggestions, showing the definition and purpose – like online help – related to a specific element. The following screenshot shows IntelliSense in action:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/efe59c67-97ef-442c-bfaa-c34e8d82c6fa.png"/></p>
<p>IntelliSense is context-sensitive, and if you need to enable it directly without typing anything, just press <em>Ctrl</em> + spacebar. Depending on the context where the cursor is placed, IntelliSense will show all the items that can be used in that context. For example, inside a <kbd>Table Field</kbd> declaration, it will list all the specific field properties, such as <kbd>Caption</kbd> and <kbd>CaptionML</kbd>, while in an empty codeunit definition, it will show all the properties that are exposed by a codeunit object.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Word completion</h1>
                </header>
            
            <article>
                
<p>Through the IntelliSense feature, the code editor in Visual Studio Code implements word completion for all native (such as JSON) and extension-based supported languages (such as AL). Just press <em>Enter</em> or <em>Tab</em><span class="packt_screen"> </span>to insert the suggested word:</p>
<p class="mce-root"/>
<p class="CDPAlignCenter CDPAlign"><img src="assets/4cf2e797-aaba-49c1-90b1-8fc4ee162fdd.png"/></p>
<p class="mce-root">The preceding screenshot shows an <span>AL variable suggested by the word completion engine.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">The Go To Definition</h1>
                </header>
            
            <article>
                
<p>This is a super-cool, must-know feature. You can hover over a variable, constant, function, or whatever code element you want with the mouse, and if you press <em>Ctrl</em>, the word or identifier (known also as a symbol) will magically switch into a hyperlink. </p>
<p>If you click on the word while pressing <em>Ctrl</em>, you will be automatically redirected to the code that defines that word. <em>Ctrl</em> + hovering over a code element also enables the <span class="packt_screen">Go To Definition</span> feature.</p>
<p class="mce-root"/>
<p>Other possible ways to enable this feature are as follows:</p>
<ul>
<li>Select a code element and press <em>F12</em>.</li>
<li>Right-click on a code element and then select <span class="packt_screen">Go To Definition</span> from the context menu. </li>
</ul>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Find All References</h1>
                </header>
            
            <article>
                
<p><span class="packt_screen">Find All References</span> makes it very easy to parse how many times and where an object, a function, or any code element has been used across source code. You can simply right-click on any variable, function, or element name and then select <span class="packt_screen">Find All References</span>, or use the keyboard shortcut <em>Shift</em> + <em>Alt</em> + <em>F12</em>.</p>
<p>When it's enabled, the code editor will create a result list in the activity bar showing how many times it has been referenced, and in which object files and position(s). A shortcut icon is created in the sidebar called <span class="packt_screen">References</span>. The following screenshot shows how to find all references in AL files for a specific variable:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/e8a84e83-55b5-4157-9ae4-69c40c107ff6.png" style="width:25.42em;height:31.17em;"/></p>
<p class="mce-root"/>
<p>If you expand an occurrence in the reference list on the left and click on a record, the code editor will open the file where it is referenced and position the cursor in editing mode, selecting the element searched in that file.</p>
<p>The reference list can be cleared and refreshed, and you can collapse all the elements in it. If you clear the list, you can always run the previous search again, since the history is maintained for you.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Peek Definition</h1>
                </header>
            
            <article>
                
<p>Imagine that you have a large number of code files, and you need to edit the definition of a variable or field that you are currently using. With many other editors – or development environments – you <span>most likely </span><span>have to save all the files in text format, then search through all these code files and be sure to replace that variable name. This task not only can be annoying, but can also distract you from the original code you were writing.</span></p>
<p>Visual Studio Code brilliantly solves this problem by providing the Peek feature, which can be enabled in different ways:</p>
<ul>
<li>Right-click a variable, field, or function name and select <span class="packt_screen">Peek Definition</span>.</li>
<li>Use the <em>Alt</em> + <em>F12</em> <span>keyboard shortcut.</span></li>
</ul>
<p class="mce-root"/>
<p>An interactive pop-up window should appear, showing source code that defines the selected element. The following screenshot shows the <span class="packt_screen">P<span>eek Definition</span></span> <span>for a table source in a report</span>:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/067889db-7662-4f38-ade8-fe051f70dbc0.png" style="width:47.50em;height:31.67em;"/></p>
<p><span>You can then see what has been written, and also directly edit it.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Renaming symbols</h1>
                </header>
            
            <article>
                
<p>For a developer, it is very common to rename a variable, constant, field, or function name. These coding elements are technically called symbols. Visual Studio Code provides a very powerful feature to rename symbols.</p>
<p>If you press <em>F2</em> on the coding element that you wish to rename, or right-click and then select <span class="packt_screen">Rename Symbol</span>, a small interactive popup appears in edit mode. There, you can write the new element name without using a distracting dialog window, allowing you to concentrate on your coding. All references to that code element will be renamed accordingly. The following screenshot shows renaming <span>the</span><span> </span><span>XMLport symbol reference:</span></p>
<p class="mce-root"/>
<p class="CDPAlignCenter CDPAlign"><img src="assets/79a77faa-f447-4432-b5bd-aa42e2566001.png"/></p>
<p>All of the features shown so far are the most useful features provided by Visual Studio Code that support proficient code editing for AL developers.</p>
<p>At this stage, it is important to take a closer look at the AL Language extension and see how to configure it.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Understanding the AL Language extension</h1>
                </header>
            
            <article>
                
<p>AL is now a cross-platform language that is deployed through an extension for Visual Studio Code. This extension not only supports deployment on Windows OSes, but is also supported for the macOS version of Visual Studio Code.</p>
<p>The <span>free </span>AL Language extension (<a href="https://marketplace.visualstudio.com/items?itemName=ms-dynamics-smb.al">https://marketplace.visualstudio.com/items?itemName=ms-dynamics-smb.al</a>) is available for download from the Visual Studio Code marketplace. This provides an optimized experience for Dynamics 365 Business Central extension development, and includes all the support and tools that you need to build apps (from now on, a synonym for extension), including the debugger.</p>
<p>The easiest way to get the extension installed without further information is by opening any Dynamics 365 Business Central code file (<kbd>.al</kbd>) and following the instructions shown by Visual Studio Code when it detects that an extension is available for that file type:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/1e2e7c53-68da-48b4-a4fa-bbc04c788db0.png" style="width:37.58em;height:9.92em;"/></p>
<p class="mce-root"/>
<p>Similarly, you might want to install other extensions that add other languages (such as PowerShell), tools (such as Docker), or enhanced editing features to the AL Language extension. A list of the most useful marketplace extensions used by Dynamics 365 Business Central in combination with AL Language will be provided in <a href="00676a8a-c821-432e-b39f-4f39ea2c55f9.xhtml">Chapter 18</a>, <em>Useful and Proficient Tools for AL Developers</em>.</p>
<p>Let's understand what these extensions are in AL Language in the sections ahead.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">AL Language</h1>
                </header>
            
            <article>
                
<p>Created by the Dynamics 365 Business Central development team, AL Language is the official Visual Studio Code extension for developing apps for <span>small, </span>single-tenant personalization's and complex add-on vertical solutions that are deployed through the <span>online </span>Dynamics 365 Business Central AppSource marketplace.</p>
<p>It can be deployed in two different ways:</p>
<ul>
<li>Directly, as a downloadable package from the Visual Studio Code marketplace.</li>
<li>Manually, as an installable package (<kbd>.vsix</kbd>):
<ul>
<li>The installable package is dispatched when creating a Docker-contained sandbox from the official Dynamics 365 Business Central image.</li>
<li>Downloaded from Dynamics 365 Business Central on-premises DVD.</li>
</ul>
</li>
</ul>
<p>To start directly with AL Language, simply download it from the marketplace by following these simple steps:</p>
<ol>
<li>Run Visual Studio Code.</li>
<li>Click on the <span class="packt_screen">Extensions</span> view bar.</li>
<li>In the search field, type Dynamics 365 Business Central.</li>
<li>Select <span class="packt_screen">AL Language</span>.</li>
<li>Click on <span class="packt_screen">Install</span> and when the installation finishes, reload Visual Studio Code as requested. It shows the following AL Language extension:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/c45e562c-0b5f-43a5-a69c-693260ebbcf1.png" style="width:36.25em;height:5.83em;"/></p>
<p>The AL Language build number, also known as the development build, is shown close to the title. In the preceding screenshot, the AL Language development build (or runtime) is <kbd>4.0.182565</kbd>.</p>
<p>The development build is very important, because new language features and enhancements are typically not backported to older builds, so they could be outdated and not compatible with the more recent Dynamics 365 Business Central platform updates.</p>
<div class="packt_tip"><span>AL developers should always select the latest AL Language development build in order to benefit from the latest enhancements and stability features.</span></div>
<p>The AL Language development model relates to creating, editing, and organizing flat text files with the typical <kbd>.al</kbd> extension. In short: AL Language development is simply folder and file based.</p>
<p>It's worth mentioning that the Visual Studio Code terminology calls a root folder a workspace. The AL Language root folder represents the source code container for an extension. Therefore, the AL Language root folder is also called the Visual Studio Code development workspace.</p>
<p>When creating whatever kind of extension, the workspace consists of the following items:</p>
<ul>
<li><kbd>launch.json</kbd> file</li>
<li><kbd>app.json</kbd> file</li>
<li>Symbol files</li>
<li><kbd>.al</kbd> object files (such as table, page, report, and codeunit)</li>
<li>Complementary files (such as <kbd>WebService.xml</kbd> files, the extension logo in <kbd>.bmp</kbd> format, and the <kbd>permissions.xml</kbd> file)</li>
</ul>
<p>We will analyze AL Language objects and complementary files <span><span>in </span></span><span>more</span><span> </span><span>depth all throughout this book and in later</span> chapters<span>. We will focus now on the backbone of the app development:</span> <kbd>launch.json</kbd>, <kbd>app.json</kbd>, <span>and symbol files.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">launch.json</h1>
                </header>
            
            <article>
                
<p>This file is stored in the extension workspace in a subfolder called <kbd>.vscode</kbd> and mainly determines the specific parameter settings for downloading and uploading AL Language commands.</p>
<p>The following table shows the download and upload AL commands:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td><strong>Download commands</strong></td>
<td><strong>Upload commands</strong></td>
</tr>
<tr>
<td><kbd>AL: Download symbols</kbd></td>
<td><kbd>AL: Publish</kbd> (<em>F5</em>)</td>
</tr>
<tr>
<td><kbd>AL: Download source code</kbd> (<em>F7</em>)</td>
<td><kbd>AL: Publish and open in the designer</kbd> (<em>F6</em>)</td>
</tr>
<tr>
<td/>
<td><kbd>AL: Publish without debugging</kbd> (<em>Ctrl</em> + <em>F5</em>)</td>
</tr>
<tr>
<td/>
<td><kbd>AL: Rapid Application Publish</kbd> (<em>Alt</em> + <em>F5</em>)</td>
</tr>
<tr>
<td/>
<td><kbd>AL: Rapid Application Publish without debugging</kbd> (<em>Ctrl</em> + <em>Alt</em> + <em>F5</em>)</td>
</tr>
</tbody>
</table>
<p> </p>
<p>It is also used just to establish a connection, as in the case of AL: debug without the publishing (<em>Ctrl</em> + <em>Shift</em> + <em>F5</em>) command, or to launch a specific debugging feature such as AL: open Event Recorder. The Event Recorder feature will be covered in <a href="076505ca-e2a0-40ab-8640-c720c9aa68ee.xhtml">Chapter 9</a>, <em>Debugging</em>.</p>
<p>The <kbd>launch.json</kbd> file is a JSON array that might have different JSON values, each representing a set of attributes targeting different deployment: on-premises or SaaS. Attributes could be mandatory or optional, depending on the target deployment.</p>
<p class="mce-root"/>
<p>The following table shows the <kbd>l<span>aunch.json</span></kbd> <span>attributes:</span></p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p><strong>Attribute</strong></p>
</td>
<td>
<p><strong>Mandatory</strong></p>
</td>
<td>
<p><strong>Deployment type</strong></p>
</td>
<td>
<p><strong>Description</strong></p>
</td>
</tr>
<tr>
<td>
<p><kbd>Name</kbd></p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>All</p>
</td>
<td>
<p>Name shown in the debugger window to identify the set of launch parameters.</p>
<p>Default values: Publish to your own server (on-premises), Publish to Microsoft cloud (SaaS).</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Type</kbd></p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>All</p>
</td>
<td>
<p>Constant value: <kbd>al</kbd>.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Request</kbd></p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>All</p>
</td>
<td>
<p>Constant value: <kbd>launch</kbd>.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>startupObjectType</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>All</p>
</td>
<td>
<p>Object type to run after publishing: Table or Page.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>startupObjectId</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>All</p>
</td>
<td>
<p>Used together with <kbd>StartupObjectType</kbd>.</p>
<p>Defines the object ID to run.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>tenant</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>All</p>
</td>
<td>
<p>AAD tenant (SaaS) or tenant name (on-premises with multitenancy) to connect to extract symbols and/or publish the app package.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>sandbox</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>Online</p>
</td>
<td>
<p>Specifies the sandbox name in case of multiple online sandboxes created for the same AAD tenant.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>breakOnError</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>All</p>
</td>
<td>
<p>Specifies whether the debugger should stop when an error occurs.</p>
<p>Default value: <kbd>true</kbd>.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>breakOnErrorWrite</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>All</p>
</td>
<td>
<p>Specifies whether the debugger should stop on record changes (insert, modify, and delete).</p>
<p>Default value: <kbd>false</kbd>.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>schemaUpdateMode</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>All</p>
</td>
<td>
<p>Determines the data synchronization mode.</p>
<p><kbd>Synchronize</kbd>: This is the default value. If there is already data deployed for this extension, it will be preserved and not removed. The extension metadata will be synchronized with the existing one, if any.</p>
<p><kbd>Recreate</kbd>: Wipe out previous metadata (tables and table extensions, typically) and use the new metadata from scratch.</p>
<p><kbd>ForceSync</kbd>: Force the schema synchronization. This should be used with extreme caution since it might lead to data loss scenarios.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>DependencyPublishingOption</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>All</p>
</td>
<td>
<p>This parameter was introduced with the Dynamics 365 Business Central Fall 2019 update. It applies in complex environments where multiple dependent apps are loaded from the same root folder. Possible values are as follows:</p>
<p><kbd>Default</kbd>: Enable rebuilding and publishing of all dependent apps.</p>
<p><kbd>Ignore</kbd>: Does not apply dependency publishing. This option should be used quite carefully since it risks breaking existing interdependent solutions.</p>
<p><kbd>Strict</kbd>: Publishing will <span>fail if there are any installed extensions that have a dependency on the startup folder.</span></p>
</td>
</tr>
<tr>
<td>
<p><kbd>Server</kbd></p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>On-premises</p>
</td>
<td>
<p>Server name. Default value: <kbd>http://localhost</kbd>.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>serverInstance</kbd></p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>On-premises</p>
</td>
<td>
<p>Dynamics 365 Business Central Server service name.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>authentication</kbd></p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>On-premises</p>
</td>
<td>
<p>Authentication type: Windows or User Password.</p>
<p>At the time of writing, AAD is not supported for on-premises deployment and it is the default, and only, value for online deployments.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Port</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>On-premises</p>
</td>
<td>
<p>Dynamics 365 Business Central port number.</p>
<p>Default value: <kbd>7049</kbd>.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>applicationFamily</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>AppSource</p>
</td>
<td>
<p>Used to develop an embedded extension for AppSource. This is a tag for Microsoft to determine the targeted upgrade operation if specific AppSource extensions have been deployed in the tenant.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>launchBrowser</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>All</p>
</td>
<td>
<div>
<p><span>Specifies whether or not to launch a browser when publishing extensions.</span></p>
</div>
</td>
</tr>
<tr>
<td>
<p><kbd><span>enableLongRunningSqlStatements</span></kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>All</td>
<td>
<div>
<div>
<p><span>Enable the capability of displaying long-running T-SQL statements while debugging. This feature is planned to work for on-premises and online sandbox environments. </span></p>
</div>
</div>
</td>
</tr>
<tr>
<td>
<p><kbd><span>enableSqlInformationDebugger</span></kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>All</td>
<td>Enable the capability of retrieving T-SQL query info. <span>This feature is planned to work for on-premises and online sandbox environments. </span></td>
</tr>
</tbody>
</table>
<p> </p>
<p>If you have set up more than one value in the JSON array, when you perform upload or download AL Language commands, you will be prompted to choose one of the parameter set names defined <span>in the JSON array.</span></p>
<p class="CDPAlignLeft CDPAlign">The following screenshot is an example of a <kbd>launch.json</kbd> file:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/fce6197b-48ec-4bbf-9e6f-995eb2dc5204.png" style="width:24.17em;height:31.33em;"/></p>
<p><span> This shows the file with two parameter set values.</span></p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">app.json</h1>
                </header>
            
            <article>
                
<p>Typically stored in the extension workspace root folder, this represents the app manifest written in JSON. Inside the JSON file, there are parameters referencing base and system applications, and platform and runtime definitions.</p>
<p>These terms need to be well understood when developing for Dynamics 365 Business Central.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">System and base application</h1>
                </header>
            
            <article>
                
<p>With the Fall 2019 update, Microsoft converted all legacy C/AL code into AL objects. Currently, the big application monolith has been split into two apps:</p>
<ul>
<li><strong>System application</strong>: with approximately 200 objects. </li>
<li><strong>Base application</strong>: depending on the localized version, it spans from 6,000 to 8,000 objects.</li>
</ul>
<p>To be extended, these need to be referenced as dependencies in the <kbd>app.json</kbd> file, and their symbols pulled on-premises or from an online sandbox through the <kbd>AL: Download symbols</kbd> AL Language command.</p>
<p>When pulled in the <kbd>.alpackages</kbd> folder, they are typically referenced through a version number in the major, minor, build, and revision notations, and this is reflected in the name of the symbols that are downloaded (for example, <kbd>Microsoft_System Application_15.0.36560.0</kbd> and <kbd>Microsoft_Base Application_15.0.36626.36918</kbd>).</p>
<p>The major version digit typically corresponds to the Dynamics 365 Business Central major update release.</p>
<p>The October 2019 (or Fall 2019) release update is major version 15. The Spring 2020 (or April 2020) update release will be major version 16, and so on.</p>
<p>The minor version typically corresponds to minor updates. The November 2019 update 1 is minor version 15.1, December 2019 update 2 should be minor version 15.2, and so on.</p>
<p>The build number is a progressive number that is incremented by Microsoft as soon as there are <span>changes </span>committed to the branch that is related to feature enhancements or bug fixing.</p>
<p class="mce-root"/>
<p>When <span><span>developing an extension</span></span>, you must be aware of what system and application object level is needed as a minimum requirement, as defined in the <kbd>dependency</kbd> parameter of the <kbd>app.json</kbd> file. </p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Platform</h1>
                </header>
            
            <article>
                
<p>Platform represents the results of the final compilation of the Dynamics 365 Business Central platform components (client, server, web server, and so on). </p>
<p>It is shown with the same notation as the application. Application and platform builds typically have a different build number, since platform code changes and application code changes are following different compilation paths and are merged together in the end.</p>
<p>When targeting a platform development, you must be aware of the minimum requirement that files and APIs should have to make use of the features, properties, and functions that they expose in order to avoid unpredictable behaviors from the application.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Runtime</h1>
                </header>
            
            <article>
                
<p>Runtime represents the results of the final compilation of the Dynamics 365 Business Central AL Language extension file.</p>
<p>The notation is simpler and consists of a major, minor, and build version. For example, the Spring 2018 update (or the April 2018 update) is named major version 1, while the Fall 2018 update (or the October 2018 update) is version 2, and so on. The current major version that targets the Dynamics 365 Business Central Fall 2019 update is version 4. </p>
<p>When developing extensions, within the <kbd>app.json</kbd> file, you can define what runtime version the application is targeting. This enables or disables different sets of features that cannot be part of the target platform deployment, and the AL Language extension's runtime will detect that.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<p class="CDPAlignLeft CDPAlign">The following table shows the <kbd>app.json</kbd> attributes:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p><strong>Attribute</strong></p>
</td>
<td>
<p><strong>Mandatory</strong></p>
</td>
<td>
<p><strong>Description</strong></p>
</td>
</tr>
<tr>
<td>
<p><kbd>Id</kbd></p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p><strong>Global Unique Identifier</strong> (<strong>GUID</strong>) of the extension.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Name</kbd></p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>Extension name.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Publisher</kbd></p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>Publisher name.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Version</kbd></p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>Version of the extension package (for example, 1.0.0.0).</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Brief</kbd></p>
</td>
<td>
<p>No (Yes for AppSource)</p>
</td>
<td>
<p>Short description of the extension.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Description</kbd></p>
</td>
<td>
<p>No (Yes for AppSource)</p>
</td>
<td>
<p>Long and verbose description of the extension.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>privacyStatement</kbd></p>
</td>
<td>
<p>No (Yes for AppSource)</p>
</td>
<td>
<p>URL to the privacy statement.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>EULA</kbd></p>
</td>
<td>
<p>No (Yes for AppSource)</p>
</td>
<td>
<p>URL to the license terms and conditions for the app.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Help</kbd></p>
</td>
<td>
<p>No (Yes for AppSource)</p>
</td>
<td>
<p>URL to app helpdesk support.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>url</kbd></p>
</td>
<td>
<p>No (Yes for AppSource)</p>
</td>
<td>
<p>URL to the extension package's home page.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Logo</kbd></p>
</td>
<td>
<p>No (Yes for AppSource)</p>
</td>
<td>
<p>Relative or full path to the app logo from the root directory of the extension</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Dependencies</kbd></p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>List of dependencies from other extensions. Since the Fall 2019 update, it is mandatory to reference at least system application and base application extensions. </p>
</td>
</tr>
<tr>
<td>
<p><kbd>Screenshots</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>Relative or absolute path to app screenshots.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Platform</kbd></p>
</td>
<td>
<p>Yes </p>
</td>
<td>
<p>Minimum platform version supported (for example, 15.0.0.0).</p>
</td>
</tr>
<tr>
<td>
<p><kbd>idRanges</kbd></p>
</td>
<td>
<p>Yes</p>
</td>
<td>
<p>Range of application object IDs or an array of object ID ranges.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>showMyCode</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>Enables viewing extension source code while debugging and/or downloading source code from the extension management page.</p>
<p>Default value: <kbd>false</kbd>.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Target</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>Default value: <kbd>Cloud</kbd>. Extension with the same font as Cloud. It's one of the possible values for Target option (<kbd>Cloud</kbd> for the new version, <kbd>Extension</kbd> for the previous version).. These are the only two values allowed by Dynamics 365 Business Central SaaS.</p>
<p>Set this value to <kbd>OnPrem</kbd> or <kbd>Internal</kbd> if you need to target the extension to on-premises.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>helpBaseUrl</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>URL for the extension's online help.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>contextSensitiveHelpUrl</kbd></p>
</td>
<td>
<p>No (Yes for AppSource)</p>
</td>
<td>
<p>URL for the context-sensitive help for an AppSource extension.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>supportedLocales</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>Comma-separated list of the local languages supported by the app.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>features</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>Optional features in preview that could be enabled by the compiler. An example is <kbd>TranslationFile</kbd>. Adding this parameter flag in the features enables the generation of a directory called <strong>Translations</strong> in the extension folder and a <kbd>.xlf</kbd> translation file containing all the labels used in all extension objects.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>Runtime</kbd></p>
</td>
<td>
<p>No</p>
</td>
<td>
<p>Minimum runtime version targeted by the extension.</p>
</td>
</tr>
</tbody>
</table>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<p class="CDPAlignLeft CDPAlign">The following screenshot is an example of an <kbd>app.json</kbd> file:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/b7680dcb-1845-4959-9cba-e5a1849f1386.png" style="width:31.83em;height:43.92em;"/></p>
<p>With all of this information, we should now be able to master app configuration files and tweak them according to the runtime version. In the next section, we will introduce symbols and explain their vital importance in extension development. </p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Understanding symbols</h1>
                </header>
            
            <article>
                
<p>Like in all other languages, symbols represent references to a collection of standard objects, properties, and functions. They are a special extension file themselves with the typical <kbd>.app</kbd> naming convention and are used to maintain object reference consistency while compiling, and they also populate <span>valid </span>IntelliSense entries.</p>
<p>Symbols are typically stored inside the database in a BLOB field in JSON for each object record. It is worth mentioning that in multitenancy, the <kbd>Object Metadata</kbd> table is part of the application database, so in customer tenant databases there are no system symbols or metadata stored, only data.</p>
<p>With Dynamics 365 Business Central, symbols are already preloaded inside the application database, and these can be grouped into two classes:</p>
<ul>
<li>Standard symbols</li>
<li><span>Extension symbols</span></li>
</ul>
<p>Prior to the Fall 2019 update, standard application symbols were all generated by Microsoft through a special compilation of standard legacy objects using the CSIDE development environment. The same happened for the on-premises version: symbols were generated asynchronously, or could have been imported as a normal extension through PowerShell scripts.</p>
<p>Standard application symbols were stored in the Symbol Reference BLOB field in the <kbd>Object Metadata</kbd> table.</p>
<div class="packt_infobox">Find out more on this topic by reading the following official reference:<br/>
<a href="https://docs.microsoft.com/it-it/dynamics365/business-central/dev-itpro/developer/devenv-running-cside-and-al-side-by-side">https://docs.microsoft.com/it-it/dynamics365/business-central/dev-itpro/developer/devenv-running-cside-and-al-side-by-side</a></div>
<p class="CDPAlignLeft CDPAlign">The following table shows us the standard symbols. Understanding what they are and their importance is vital for the successful compilation and deployment of any kind of extension prior to the Fall 2019 update:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p>Application</p>
</td>
<td>
<p>Contains symbols for all the application objects described in the CSIDE object designer, except system tables in the 2000000004 to 2000000199 ID range and standard Test Toolkit objects. With an on-premises version or Docker-contained sandbox, if you're making changes to a standard legacy object, you must opt for (re)generating symbols through the CSIDE development environment, as described in the following blog post:</p>
<p>Generate Symbols in a Modern Development environment with Microsoft Dynamics NAV 2018 (<a href="https://blogs.msdn.microsoft.com/nav/2018/01/16/generate-symbols-in-a-modern-development-environment-with-microsoft-dynamics-nav-2018/">https://blogs.msdn.microsoft.com/nav/2018/01/16/generate-symbols-in-a-modern-development-environment-with-microsoft-dynamics-nav-2018/</a>).</p>
<p>With the upgraded on-premises version, <span>symbols</span><span> </span><span>coming from earlier versions must be extracted from a standard on-premises database (or from the product DVD), imported in the upgrade database, and regenerated, as described in the following blog post:</span></p>
<p><a href="https://blogs.msdn.microsoft.com/nav/2018/02/02/import-symbols-in-new-or-upgrade-databases-with-microsoft-dynamics-nav-2018/">https://blogs.msdn.microsoft.com/nav/2018/02/02/import-symbols-in-new-or-upgrade-databases-with-microsoft-dynamics-nav-2018/</a></p>
</td>
</tr>
<tr>
<td>
<p>System</p>
</td>
<td>
<p>Contains symbols for system tables in the 2000000004 to 2000000199 ID range, and also virtual table definitions.</p>
<p>System and virtual table structures cannot be modified through extensions.</p>
<p>System and virtual table symbols cannot be regenerated.</p>
<p>For this reason, if you are developing extensions, they should never be considered for any changes within the CSIDE development environment.</p>
</td>
</tr>
<tr>
<td>
<p>Test</p>
</td>
<td>
<p>Contains symbols for application Test Toolkit objects. Standard application Test Toolkit object symbols cannot be regenerated. Developers should create their own test objects.</p>
<p>For this reason, in a modern development environment for SaaS deployment, they should never be considered for any changes within the CSIDE development environment.</p>
</td>
</tr>
</tbody>
</table>
<p>Whenever you extend an application, you always need to have the appropriate symbols in place. You can achieve this in two ways:</p>
<ul>
<li>Connect to a sandbox environment, run the Command Palette (<em>Ctrl</em> + <em>Shift</em> + <em>P</em>), and type and select <kbd>AL: Download Symbols</kbd>.</li>
<li>Download the required symbols from another place (such as the product DVD, for on-premises deployment) and store them in the defined symbol storage directory. </li>
</ul>
<p>For <span>on-premises deployment, you will find t</span>he <kbd>System.app</kbd> and <kbd>Test.app</kbd> symbols on the Dynamics 365 Business Central Spring 2019 product DVD in the following directory: <kbd>\ModernDev\program files\Microsoft Dynamics NAV\140\AL Development</kbd> <kbd>Environment</kbd>. In the Dynamics 365 Business Central Fall 2019 DVD you will only find <kbd>System.app</kbd> in the following directory: <kbd>\ModernDev\program files\Microsoft Dynamics NAV\150\AL Development Environment</kbd>. Since the Fall 2019 update, application and test symbols are no longer downloaded automatically by the AL Language runtime, and they no longer need to be stored inside the database, since all of the objects that belong to the application, including Test Toolkit ones, have been converted into AL objects. These AL objects are now part of standard extension packages. Extension packages contain symbols natively.</p>
<p>If you have a multiuser environment with developers that are working <span>on</span> the same staging tenant, you might think of downloading symbols through the Command Palette once and then setting a common path for storing the symbols for all users. In this way, it is possible to avoid downloading the same set of symbols <span>every time,</span> thereby increasing the development productivity.</p>
<p>The default symbol-storing path can be changed using one of the following shortcuts:</p>
<ul>
<li>From the <span class="packt_screen">Menu</span> bar, go to <span class="packt_screen">File</span> (<em>Alt</em> + <em>F</em>) | <span class="packt_screen">Preferences</span> (<em>P</em>) | <span class="packt_screen">Settings</span> (<em>S</em>) and then select AL Language settings.</li>
<li>Use the settings shortcuts (<em>Ctrl</em>) and then select AL Language settings.</li>
</ul>
<p>The parameter to change is <em>Al: Package Cache Path</em>, the default value of which is set to the relative path, <kbd>./.alpackages</kbd>.</p>
<p class="mce-root"/>
<p>Alternatively, you could run the Command Palette (<em>Ctrl</em> + <em>Shift</em> + <em>P</em>), type and select <span class="packt_screen">Preferences: Configure language specific settings…</span>, then choose <span class="packt_screen">AL</span>. The <kbd>settings.json</kbd> file will open, and you can then add or change the values of the <kbd>al.packageCachePath</kbd> parameter. The following screenshot shows the AL settings symbol path when it has been changed to a storage location:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/c14ca852-89f4-4fd1-865c-7c4319f350eb.png" style="width:47.92em;height:21.92em;"/></p>
<p>Later in this chapter, we will also discuss other AL Language configuration settings.</p>
<p>Together with system application extension, base application extension, and standard symbols, your extension might also depend on other custom or third-party extensions. These extensions, then, should emit symbols that you should be able to download from the application database when invoking <span class="packt_screen">AL: Download Symbols</span> from the Command Palette.</p>
<p>Extension symbols are stored in the Symbols BLOB field in the <kbd>NAV App</kbd> table.</p>
<p>To specify that your extension has a dependency on another extension(s), you must populate the relevant JSON array parameter in the <kbd>app.json</kbd> file. This is what the <kbd>app.json</kbd> file parameter <span>looks like </span>for an extension that depends on two other apps:</p>
<pre>  "dependencies": [<br/><span>      {<br/>          "appId":  "63ca2fa4-4f03-4f2b-a480-172fef340d3f",<br/>          "publisher":  "Microsoft",<br/>          "name":  "System Application",<br/>          "version":  "15.0.0.0"<br/>      },<br/>      {<br/>         "appId":  "437dbf0e-84ff-417a-965d-ed2bb9650972",<br/>         "publisher":  "Microsoft",<br/>         "name":  "Base Application",<br/>         "version":  "15.0.0.0"<br/>      },</span><br/>      {<br/>        "appId": "99ddd910-3aa8-4c3e-936c-be20edeaf777",<br/>           "name": "Preferred Wine Basic"<br/>            "publisher": "Tacconi Inc."<br/>             "version": "1.0.0.0"<br/>      },  <br/>     {<br/>        "appId": "77ddd910-3aa8-4c3e-936c-be20edeaf888",<br/>        "name": "Preferred Wine Tools",<br/>        "publisher": "Tacconi Inc.",<br/>        "version": "2.1.0.0"<br/>     }<br/>   ],</pre>
<div class="packt_tip"><span>If you have installed the CRS AL language Extension toolbox from Cloud Ready Software (<a href="https://marketplace.visualstudio.com/items?itemName=waldo.crs-al-language-extension">https://marketplace.visualstudio.com/items?itemName=waldo.crs-al-language-extension</a> ), you could type</span> <kbd>tdependency</kbd> <span>to enable the code snippet to easily edit each JSON array element for this parameter. This will make your coding faster and prevent syntax errors. We will discuss the standard and custom code snippet features in the last section of this chapter.</span></div>
<p>The version parameter of the dependent extension(s) represents the lower bound for the compiler to accept the symbols. In other words, symbol versions of the dependent extension lower than the one reported are not considered valid for download or compile operations.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Inside symbols</h1>
                </header>
            
            <article>
                
<p>Symbols are the result of a compression (<kbd>.zip</kbd>) operation of several files that are used by the AL Language extension. To demonstrate what is under the hood, just use the most common decompression tool (for example, 7-zip) to extract their content after renaming the <kbd>.app</kbd> package with the <kbd>.navx</kbd> extension.</p>
<p class="mce-root"/>
<p class="CDPAlignLeft CDPAlign">The following tables show the standard symbol components (files and directories) for the base application extension:</p>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p><strong><span>File name</span></strong></p>
</td>
<td>
<p><strong><span>Description</span></strong></p>
</td>
</tr>
<tr>
<td>
<p><kbd>[Content_Types.xml]</kbd></p>
</td>
<td>
<p>Specify the content of the package: XML and JSON files.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>MediaIdListing.xml</kbd></p>
</td>
<td>
<p>Specify the extension logo filename and its ID. </p>
</td>
</tr>
<tr>
<td>
<p><kbd>navigation.xml</kbd></p>
</td>
<td>
<p>It contains an entry for the <span class="packt_screen">Departments</span> menu.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>NavxManifest.xml</kbd></p>
</td>
<td>
<p>It will report the manifest for the standard symbol or extension. The most relevant parameters for the base application symbols are as follows:</p>
<p><kbd>- version</kbd>: Identify the <span><span>application version</span></span> of the JSON file (such as <span>15.0.36626.36675</span>)</p>
<p><kbd>- platform</kbd>: Target the recommended major platform version that's compatible with these symbols (such as 15.0.0.0)</p>
<p><kbd>- runtime</kbd>: Recommended runtime version to be used for these symbols (such as 4.0)</p>
<p>System symbols typically only specify the version and the runtime.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>SymbolReference.json</kbd></p>
</td>
<td>
<p>Contains all references in JSON notation to AL objects.</p>
<p>These JSON files are heavily used by the AL Language extension to maintain reference integrity while compiling/building the app package and to enable all IntelliSense-related features.</p>
<p>Basically, it is structured as an array containing a list of valid AL object parameters, as shown in the following snippet:</p>
<p><kbd>"Tables": [],</kbd></p>
<p><kbd>  "Codeunits": [],</kbd></p>
<p><kbd>  "Pages": [],</kbd></p>
<p><kbd>  "PageExtensions": [],</kbd></p>
<p>For each of these object elements, there are specified fields, properties, functions, and so on.</p>
</td>
</tr>
</tbody>
</table>
<p class="mce-root"/>
<p class="mce-root"/>
<div class="packt_infobox"><span>Symbol JSON files cannot be hacked/changed to </span><span>manually </span><span>generate or modify a symbol file.</span></div>
<div><span>Next, let's also have a look at what the various directories do:</span></div>
<div>
<table style="border-collapse: collapse;width: 100%" border="1">
<tbody>
<tr>
<td>
<p><strong>Directory name</strong></p>
</td>
<td>
<p><strong>Content description</strong></p>
</td>
</tr>
<tr>
<td>
<p><kbd>addin</kbd></p>
</td>
<td>
<p>Controls add-ins definitions.</p>
</td>
</tr>
<tr>
<td><kbd>layout</kbd></td>
<td>
<p>RDL and DOCX report layouts.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>logo</kbd></p>
</td>
<td>
<p>Extension logo.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>ProfileSymbolReferences</kbd></p>
</td>
<td>
<p>Symbols for profiles and related page customizations.</p>
</td>
</tr>
<tr>
<td>
<p><kbd>src</kbd></p>
</td>
<td>AL files. Their content is used typically to show the code while debugging.</td>
</tr>
<tr>
<td>
<p><kbd>Translations</kbd></p>
</td>
<td>Translation files in the XLIFF format.</td>
</tr>
</tbody>
</table>
</div>
<p> </p>
<p>Symbols are the beating heart of the extension validation mechanism and, as shown in the previous tables, they also carry out the code (if the <kbd>showmycode</kbd> parameter has been set to true in the extension <kbd>app.json</kbd> file).</p>
<p>Based on AL symbols, in the Visual Studio Code marketplace you could find very useful extensions that are targeting AL development environments.</p>
<div>The most commonly used ones are as follows:</div>
<ul>
<li> AL Object Designer by Marton Sagi</li>
<li><span>AZ AL Dev Tools/AL Code Outline</span> by <span>Andrzej Zwierzchowski</span><span><br/></span></li>
</ul>
<p>Both are very easy to use and are useful for inspecting symbols and their content.</p>
<p>After learning about symbols, we have completed an overview of the main items that are needed to build an app. Let's have a look now at AL Language extension configuration, and how to set them up in order to have a more productive development environment.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Understanding AL Language extension configuration</h1>
                </header>
            
            <article>
                
<p>General and per workspace settings can be easily shown through the shortcut key, <em>Ctrl<strong> </strong></em>+. An intuitive menu will be shown, and by selecting <span class="packt_screen">Extension | AL language extension configuration</span>, a set of configuration parameters is listed. The following screenshot shows the <span>AL Language extension configuration parameters:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/e292a06b-c8f1-4464-b78c-0731b5fcc917.png"/></p>
<p>Basically, these configuration values are saved into a file called <kbd>settings.json</kbd>.</p>
<p class="mce-root"/>
<p>The following is a list of the description and values of the most common ones:</p>
<ul>
<li>For the following Path parameters:
<ul>
<li><kbd>"al.packageCachePath": "./.alpackages"</kbd><span>: It is possible to change the default value to a local folder or to a shared folder for multi-developer environments. It represents the path to store and look for symbols.</span></li>
<li>
<p><kbd>"al.assemblyProbingPaths": ["./.netpackages"]</kbd><span>: This parameter is fundamental to compiling extensions when there are references to external assemblies. Its data type is a JSON array, so the developer has to specify a comma-separated list of paths where the assemblies are stored. </span></p>
</li>
<li>
<p><kbd>"al.ruleSetPath": null</kbd><span>: This is used if developers would like to provide a custom override of standard code analyzer rules. It will be discussed in more depth in <a href="076505ca-e2a0-40ab-8640-c720c9aa68ee.xhtml">Chapter 9</a>, <em>Debugging</em>.</span></p>
</li>
</ul>
</li>
</ul>
<ul>
<li>For the following Code Analyzer parameters:
<ul>
<li><kbd>"al.enableCodeAnalysis": false</kbd><span>: This helps to enable code analysis and is discussed in more depth in <a href="076505ca-e2a0-40ab-8640-c720c9aa68ee.xhtml">Chapter 9</a>, <em>Debugging</em>. In large projects, with several thousands of objects, it would be better if it was turned off, in order to prevent performance issues while coding or compiling.</span></li>
<li><kbd>"al.codeAnalyzers": []</kbd><span>: This has the type of code analyzers. It will be discussed in more depth in <a href="076505ca-e2a0-40ab-8640-c720c9aa68ee.xhtml">Chapter 9</a>, <em>Debugging</em>.</span></li>
<li><kbd>"al.enableCodeActions": false</kbd><span>: Enables code actions such as</span> <span>automatically</span> <span>converting m</span>ultiple <kbd>if</kbd> statements to a <kbd>CASE</kbd> statement or spell check. It is disabled by default.</li>
<li><kbd>"al.backgroundCodeAnalysis": true</kbd><span><span>: This is enabled by default. In large projects, this could be a real performance killer, and it is recommended that it is turned off in such scenarios.</span></span></li>
</ul>
</li>
<li>For the following Compilation parameters:
<ul>
<li><kbd>"al.compilationOptions": {"generateReportLayout": true, "parallel": true}</kbd><span>: Used to specify if a report layout should be generated or not when compiling, if it does not exist, and to have a serialized or parallel build of the package.</span></li>
<li><kbd>"al.incrementalBuild": false</kbd><span>: In complex extension development environments, where multiple extension folders are loaded from a root folder, this parameter specifies if the reference resolution will happen from the referenced project, instead of happening from the symbols that are stored in the package cache path. Switching this parameter to true will result in an increase in performance in such scenarios.</span></li>
</ul>
</li>
<li>For the following Service Log parameters:
<ul>
<li><kbd>"al.editorServicesLogLevel": null</kbd>: <span>This is very useful for debugging situations where compilation reports unhandled errors or crashes. Logging could include errors up to a very verbose description of what is happening behind the scenes. It will be discussed more in deep in <a href="076505ca-e2a0-40ab-8640-c720c9aa68ee.xhtml">Chapter 9</a>, <em>Debugging</em>.</span></li>
<li><kbd>"al.editorServicesPath": "bin/"</kbd>: <span>If the service log is enabled, it determines the log path.</span></li>
</ul>
</li>
<li>For the following Browser parameters:
<ul>
<li><kbd>"al.browser": "Edge"</kbd>: <span>Choose your preferred browser to launch your Dynamics 365 Business Central application from Visual Studio Code. Options are <span class="packt_screen">SystemDefault</span>, <span class="packt_screen">Edge</span>, Chrome, or Firefox. This is useful if you have multiple browsers installed.</span></li>
<li><kbd>"al.incognito": false</kbd>: <span>Choose to start the browser in a normal session that stores existing credentials or use private/incognito browsing.</span></li>
</ul>
</li>
</ul>
<p><span>After exploring the core settings that are needed to develop an extension, let's analyze one of the best code-editing features that is provided with AL Language: code snippets.</span></p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Mastering AL Language code snippets</h1>
                </header>
            
            <article>
                
<p>AL Language standard code snippets in Visual Studio Code are available after installing the AL Language extension. These are triggered as you type within the code editor, and you can recognize them by a squared prefix symbol.</p>
<p>Typically, they start with the letter <kbd>t</kbd> and are followed by a meaningful name that describes what the snippet is about, for example, <kbd>ttable</kbd> or <kbd>tpage</kbd>. A tooltip shows a preview of the code snippet.</p>
<p class="CDPAlignLeft CDPAlign">The following screenshot shows the standard snippet for an if-then-else conditional sentence:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/1623b328-1ca2-46c8-b716-0bbf99fa40da.png" style="width:44.58em;height:22.33em;"/></p>
<p>Notice that if the snippet contains variable names or code identifiers, they could be highlighted, suggesting that you should give them a different name and that they act as a sort of placeholder. When you rename a highlighted identifier, all occurrences will be also renamed, making snippet usage very flexible. This will not only reduce coding time, preventing writing or copying and pasting repeating sentences, but it also uses the appropriate complex structure syntax that a developer might not keep in mind.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>It is possible to download code snippets that have been produced by other developers in the form of extensions directly from the Visual Studio marketplace. Typically, many of the extensions that extend support for AL Language also include a series of code snippets of their own.</p>
<p>A typical example is the free CRS AL Language extension.</p>
<p>Together with several very useful developer tools, this extension <span>also </span>implements a set of AL code snippets that integrate with and enrich the existing standard ones. Currently, it implements 68 extra AL code snippets, and the list is growing with every extension update.</p>
<p class="CDPAlignLeft CDPAlign">The following screenshot shows <span>all the available extra snippets that appear if you type </span>CRS in an <kbd>.al</kbd> file:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/2063ec22-341a-43e3-ae8d-9be56b4556c4.png" style="width:46.17em;height:17.33em;"/></p>
<p>Another way to search for code snippets while coding is to run the Command Palette (<em>Ctrl</em> + <em>Shift</em> + <em>P</em>) and then type snippet or insert snippet to bring up a drop-down list of the AL snippets that are available.</p>
<p class="CDPAlignLeft CDPAlign">The following screenshot shows the drop-down list of AL snippets from the Command Palette:</p>
<p class="mce-root"/>
<p class="CDPAlignCenter CDPAlign"><img src="assets/438bb2db-46b4-4c30-aa5a-c0d6aeaaee32.png"/></p>
<p>If you still did not find <span>the code snippets that are useful to you </span><span>in the marketplace, with Visual Studio Code it is also possible to manually add new code snippets from scratch. To accomplish this, you have to click on the <span class="packt_screen">Menu</span> bar and go to</span> <span class="packt_screen">File</span> <span>(</span><em>Alt</em> + <em>F</em><span>) |</span> <span class="packt_screen">Preferences</span> <span>(</span><em>P</em><span>) |</span> <span class="packt_screen">User Snippets</span> (<em>S + S</em>)<strong><em>.</em></strong></p>
<div class="packt_tip"><span>The shortcut sequence,</span> <em>Alt</em> + <em>F</em>, <em>P</em>, <em>S</em>, <em>S</em>, <em>Enter</em> <span>will bring you straight there without needing to use the mouse.</span></div>
<p>You can then select whether to create a global snippet for all languages, a local snippet for the current workspace, or one that's specific for a target language. In this example, we will create a new snippet to be used with AL Language files by choosing <span class="packt_screen">al (AL)</span> from the language list.</p>
<p class="mce-root"/>
<p class="CDPAlignLeft CDPAlign">The following screenshot shows the available options when creating a specific code snippet:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/e66e468e-6db6-4a4d-9973-9f74ba95e6ab.png"/></p>
<p>If you have enabled the breadcrumb feature, you might have noticed that a specific configuration file is open in editing mode for <span>custom </span>AL Language snippets. Typically, the file is called <kbd>al.json</kbd>, and it is stored in the following location:</p>
<pre>C:\Users\&lt;username&gt;\AppData\Roaming\Code\User\snippets</pre>
<p>Each snippet is defined by a unique name and is composed of three elements:</p>
<ul>
<li><strong>Prefix</strong>: Used to search and trigger the snippet in the editor</li>
<li><strong>Body</strong>: The section that is pasted inside the editor</li>
<li><strong>Description</strong>: A verbose description of what the snipper is for</li>
</ul>
<p>Inside the body, you could use a specific syntax to enable placeholders:</p>
<ul>
<li><kbd>$1</kbd>, <kbd>$2</kbd>, <kbd>$3</kbd>, <kbd>…</kbd>, <kbd>$n</kbd> are used to move the cursor position within the snippet by pressing the <span class="packt_screen">Tab </span>key.</li>
<li><kbd>$0</kbd> is used as the final cursor position.</li>
<li><kbd>${1:labelX}</kbd>, <kbd>${2:labelY}</kbd>, and <kbd>${3:labelZ}</kbd> are used for placeholders. Placeholders with the same IDs are connected to each other, enabling the multiple cursors feature. </li>
</ul>
<p>Now, we'll go through a simple example.</p>
<p>Imagine that you would like to add a standard code header block on top of the object, like it was in the old designer (the CSIDE development environment), and you need a smart way to implement this repeatedly and quickly on every object.</p>
<p class="mce-root"/>
<p>The easiest solution is to create an ad hoc custom snippet to be invoked on every new object file creation, as follows:</p>
<ol>
<li>Add the following code to the <kbd>al.json</kbd> file and save it:</li>
</ol>
<pre>{<br/>     "Create standard comment block": {<br/>        "prefix": "tcomment (Custom)",<br/>       "body": [<br/>  "//",<br/>  "//  ${1:YY.MM.DD} Initialization",<br/>  "//  ${1:YY.MM.DD} ${2:Modification Description}",<br/>  "//"<br/> ],<br/> "description": "Standard header comment block"<br/>}<br/>}</pre>
<div class="packt_tip">You can enable the amazing autosave feature by simply going to the <span class="packt_screen">Menu</span> bar and selecting <span class="packt_screen">File</span> (<em>Alt </em>+ <em>F</em>) | <span class="packt_screen">Auto Save</span> (<em>U</em>). A check mark will appear beside the Auto Save menu item. Another way to accomplish this task is to run the Command Palette (<em>Ctrl</em> + <em>Shift</em> + <em>P</em>) and type <kbd>File: Toggle Auto Save</kbd> (or type part of it and select the entry from the drop-down action list).</div>
<ol start="2">
<li>Create a new file inside your extension and save it with the <kbd>.al</kbd> <span>e</span><span>xtension </span>(for example, <kbd>MyCodeunit.al</kbd>). The cursor should be automatically positioned in the first line and column of the file.</li>
<li>Start typing <kbd>tcomment</kbd> and IntelliSense will detect the existence of your custom snippet. Select it.</li>
<li>The cursor will be placed in the first placeholder element. Just type the current date in the <kbd>YY.MM.DD</kbd> format and press <span class="packt_screen">Tab</span>. You might notice that since two placeholders share the same ID, they are edited together, enabling the multiple cursor feature.</li>
<li>Now, it is time to write down something useful that is related to the object description, and what it is for.</li>
</ol>
<p class="mce-root"/>
<p>The following screenshot shows the <span>custom </span>comment block snippet in action with multiple cursors:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/218bb777-f46d-4d80-8416-6fd7f3941407.png" style="width:25.33em;height:7.83em;"/></p>
<p>These code snippets make it easy to understand Visual Studio Code. Try them out and master them!</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>Visual Studio Code is a code-centric tool that supports, out of the box, a wide variety of languages, providing coding features such as syntax colorization, delimiter matching, code block folding, multiple cursors, code snippets, IntelliSense, and so much more.</p>
<p>By installing the AL Language extension, this modern development environment is fully set up as an app playground for beginner and skilled developers. We have unleashed some tips and tricks <span>in this chapter that enable you </span>to be proficient in the developer's daily work of creating modern apps for Dynamics 365 Business Central.</p>
<p>We then moved on to learn about the powerful coding features that this modern development environment offers. After all of this, it is time to see the <span><span>AL Language</span></span> in action throughout this book. But before moving to structured and advanced extension development, it is important to understand how to implement and maintain a sandbox/staging environment. This is what we will do in the next chapter.</p>


            </article>

            
        </section>
    </body></html>