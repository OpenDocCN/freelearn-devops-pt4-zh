<html><head></head><body>
        <section>

                            <header>
                    <h1 class="header-title">Business Central and Integration with the Power Platform</h1>
                </header>
            
            <article>
                
<p>In <span>the previous chapter, w</span>e saw how to use Azure Ser<span>vices combined with Dynamics 365 Business Central to implement modern serverless business processes and we had an extensive overview of how to use Azure Functions from AL.</span></p>
<p>In this chapter, we will introduce an important part of the Dynamics 365 family: <em>Microsoft Power Platform</em>. We'll cover the following topics:</p>
<ul>
<li>An introduction to Microsoft Power Platform</li>
<li>Microsoft Flow and PowerApps overview</li>
<li>Implementations of real-world scenarios by using Flow and PowerApps integrated with the Dynamics 365 Business Central ecosystem</li>
</ul>
<p>By the end of this chapter, you will have a complete overview of Power Platform and be able to use Flow and PowerApps to implement custom solutions and workflows with Dynamics 365 Business Central in a low-coding way.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Technical requirements</h1>
                </header>
            
            <article>
                
<p>To follow the examples described in this chapter, you'll need the following:</p>
<ul>
<li>An Office 365 subscription with access to Flow and PowerApps</li>
<li>An active Dynamics 365 Business Central online tenant </li>
</ul>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Introducing the Power Platform</h1>
                </header>
            
            <article>
                
<p class="mce-root"><strong>Power Platform</strong> combines the features of applications such as <strong>Flow</strong>, <strong>PowerApps</strong>, and <strong>PowerBI</strong> into a unified business application platform. The importance of this platform in the Microsoft ecosystem has been explained many times directly by Satya Nadella in his talks. In a modern business application's implementation, we need to seriously consider the Power Platform.</p>
<p class="">The platform embraces the <em><span>Analyze, Act, and Automate</span></em> paradigm. Each component of the Power Platform is built on top of the<span> </span><em>Common Data Service</em> <em>for Apps</em> (<span>a platform that allows users to quickly integrate programs, build new custom applications, and create automated workflows</span>), and the platform brings data together into what is called the<span> </span><em>Common Data Model</em>.</p>
<p>A schema of this platform is displayed in the following diagram:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/cca5a98b-78ff-4c2c-82c8-90afbfe5268c.png" style="width:30.50em;height:23.58em;"/></p>
<p class="mce-root"><strong>Flow</strong> and <strong>PowerApps</strong> are low-code development-based platforms made by Microsoft to provide powerful tools for what we call <strong>power users</strong> <span>– </span>users that usually don't have a technical background, but work and are totally involved with a business, so they know all the business rules, processes exceptions, and other business aspects that allow them to know what a system can do from an end user's point of view.</p>
<p>So, we have explained what Power Platform is and what its building blocks are. Since these tools are already available, why not use it in combination with Dynamics 365 Business Central to provide even more power for those power users to create apps, integrations, and business logic workflows, and build a fully integrated and managed platform for our businesses?</p>
<p>In the upcoming sections, we'll look at an overview of Flow and PowerApps, and we'll see some real-world solutions that involve Dynamics 365 Business Central in tandem with Power Platform.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Understanding Flow</h1>
                </header>
            
            <article>
                
<p><strong>Flow</strong> is a platform that was built with the purpose of providing a way to create automated workflows and integrating Microsoft and non-Microsoft technologies through connectors and triggers. These tools are available for the end user so that they can build business processes in a visual way. More information can be found at <a href="https://us.flow.microsoft.com/en-us/">https://us.flow.microsoft.com/en-us/</a>.</p>
<p>Flow has more than 180 different connectors that you can use through actions and triggers to build automated workflows. One of these connectors is the <strong>Dynamics 365 Business Central connector</strong>, and it's the standard connector for interacting with Dynamics 365 Business Central from Flow. The connector is available at <a href="https://us.flow.microsoft.com/en-us/connectors/?filter=business+central&amp;category=all">https://us.flow.microsoft.com/en-us/connectors/?filter=business+central&amp;category=all</a>.</p>
<p>One of the biggest advantages of using Flow is that it gives us a visual way to build automated workflows that can make our data from our Dynamics environment interact with external platforms, create approval process, send notification actions, and other applications in an easy way.</p>
<p class="mce-root"/>
<p>As shown in the following screenshot, Microsoft <span>also</span><span> </span><span>gives us a bunch of existing templates that will help us create our first Flow workflow quickly:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/10546d37-2907-4e1e-aba9-e63548c7c0f9.png" style="width:50.92em;height:25.58em;"/></p>
<div class="packt_infobox">More information can be found at <a href="https://us.flow.microsoft.com/en-us/templates/">https://us.flow.microsoft.com/en-us/templates/</a>.</div>
<p>Filtering the templates by <kbd>business central</kbd>, you can see all the available templates (you can also submit templates that you create for the technical community), as follows:</p>
<p class="mce-root"/>
<p class="CDPAlignCenter CDPAlign"><img src="assets/b937fad1-3309-4ee5-a6fb-c820b20be51b.png"/></p>
<p>With these templates, you are able to play around with workflows that will integrate Dynamics 365 Business Central with other platforms, and you can start using a template that can be changed so that it suits your needs in an easy way.</p>
<p><span>These templates are always improved and developed by the community and by the Flow team.</span></p>
<div class="packt_tip">Start creating a workflow using a template to see how it works and then change it to fit your needs by adding other actions and integrations.</div>
<p>As you can see, with Flow, you have lots of pre-built tasks (workflows) that you can immediately use in your existing Dynamics 365 Business Central solutions without writing a single line of code. Just use the connector and start your workflow with a few mouse clicks.</p>
<p>In the next section, we'll look at an overview of PowerApps and see what it can offer with regard to implementing your solutions.</p>
<p class="mce-root"/>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Understanding PowerApps</h1>
                </header>
            
            <article>
                
<p><strong>PowerApps</strong> is a platform that was built with the purpose of creating business applications that can be used on mobile phones, tablets, and web browsers, all using a very easy user interface. It also uses connectors to integrate those apps with Microsoft and non-Microsoft platforms.</p>
<p>The distribution, permission, licensing, and authentication for the use of those apps is based on Microsoft 365 licenses, so it is already totally integrated with your Microsoft 365 environment.</p>
<div class="packt_infobox">More information about PowerApps and its licensing can be found at <a href="https://powerapps.microsoft.com/">https://powerapps.microsoft.com/</a>.</div>
<p class="CDPAlignLeft CDPAlign">In the <strong>PowerApps Studio</strong> (<a href="https://web.powerapps.com">https://web.powe</a><a href="https://web.powerapps.com">r</a><a href="https://web.powerapps.com">apps.com</a>), you can create apps easily:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/8016d13f-432f-4906-bcd5-73c2483fd9bf.png"/></p>
<p>Since PowerApps also work with the same connector concept that's in Flow, we can also create apps that connect and interact with our data on Dynamics 365 Business Central environments, giving us a way to create business apps that can work on a browser and on a mobile device and that can also execute business logic inside Dynamics 365 Business Central.</p>
<p class="mce-root"/>
<p>In the next section, we'll learn how to use Flow and PowerApps with Dynamics 365 Business Central in real-world scenarios and implement a modern business solution.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Integration scenarios with Power Platform</h1>
                </header>
            
            <article>
                
<p class="mce-root"><span>Now that we have had an overview of <strong>Flow</strong> and <strong>PowerApps</strong> and we know that they allow us to build powerful integrated solutions with Dynamics 365 Business Central to provide more control, integration, and extension, let's discuss and learn how to combine these technologies to do more with our environment.</span></p>
<p class="mce-root">The following scenarios are just ideas to help you brainstorm and to show you some of the features that are available to you. However, the platforms are so flexible and adaptable to different use cases to the extent that we would need an entire book to cover all the bases, so remember to use these scenarios to extract some ideas for your daily needs.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Scenario 1 – creating a human resources recruiting/onboarding process</h1>
                </header>
            
            <article>
                
<p>In this scenario, we will create a recruiting/onboarding process that will make it easy for a human resources department to send a form to a new employee so that they can fill it in. This data, after an approval process, will be automatically registered to Dynamics 365 Business Central.</p>
<div class="packt_infobox"><strong>Technologies Used:</strong> Microsoft Forms, Flow, Teams, and Dynamics 365 Business Central.</div>
<p>First of all, let's create our form on Microsoft Forms<em>.</em> The goal here is to give a human resources manager a way to generate an external form with a link that can be sent to a new employee, who can then add their data, avoiding the bureaucracy of having this form filled in manually in person.</p>
<p>To create this form, follow these steps:</p>
<ol start="1">
<li>Open <span class="packt_screen">Forms</span> with your Office 365 Account at <a href="http://forms.microsoft.com">http://forms.microsoft.com</a> and then click on <span class="packt_screen">New Form</span>.</li>
<li>Add the name and description of your form.</li>
<li class="CDPAlignLeft CDPAlign">Now, let's add some fields to our form, thinking about all the fields that we need/want on Dynamics 365 Business Central. <span>To create a new field, you just need to click on the</span> <span class="packt_screen">+ Add New</span> <span>button:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/419de138-967b-4505-b7c4-82c8751cbefb.png"/></p>
<ol start="4">
<li>Then, select the type of field to create <span>(here, I've selected</span> <span class="packt_screen">Choice</span><span>): </span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/5186babd-cca6-4049-b06a-44eeca09e079.png"/></p>
<p class="mce-root"/>
<ol start="5">
<li>Then, select the label:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/60ef0c19-1965-4903-a0d3-cd873a0b6c2d.png"/></p>
<p style="padding-left: 60px">Let's create the following fields:</p>
<ul>
<li style="list-style-type: none">
<ul>
<li><span class="packt_screen">First Name</span> (text)</li>
<li><span class="packt_screen">Last Name</span> (text)</li>
<li><span class="packt_screen">E-mail</span> (text)</li>
<li><span class="packt_screen">Address</span> (text)</li>
<li><span class="packt_screen">Address City</span> (text)</li>
<li><span class="packt_screen">Address State</span> (text)</li>
<li><span class="packt_screen">Address Postal Code</span> (text)</li>
<li><span class="packt_screen">Phone Number</span> (text)</li>
<li><span class="packt_screen">Birth Date</span> (date)</li>
</ul>
</li>
</ul>
<ol start="6">
<li>The final form will be as follows:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/a9f5f781-e3fa-4088-8da8-189ccb4ed9f5.png"/></p>
<p>After creating our form on Forms, we can create our Flow workflow:</p>
<ol>
<li><span>Open the Microsoft Flow site (<a href="https://flow.microsoft.com">https://flow.microsoft.com</a>), log in with your Office 365 account, and</span> <span>g</span><span>o to</span> <span class="packt_screen">My Flows</span>.</li>
<li>Click on <span class="packt_screen">+ New | Create from blank</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/483aeacb-a5d3-4de0-b547-292fe4ddf0e0.png"/></p>
<p class="mce-root"/>
<ol start="3">
<li>Let's look for more triggers. Click on <span class="packt_screen">Search hundreds of connectors and triggers</span>.</li>
<li class="CDPAlignLeft CDPAlign">Search for <kbd>Microsoft Forms</kbd> and then select the <span class="packt_screen">When a new response is submitted</span> <span>trigger:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/283bde9a-85c5-4c99-842d-74e8740906c8.png"/></p>
<ol start="5">
<li class="CDPAlignLeft CDPAlign">On the trigger action, pick your form from the <span class="packt_screen">Form Id</span> field (<span class="packt_screen">New Onboarding Process</span>):</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/97e9a2b6-6e01-4396-b660-5340e774c1d5.png"/></p>
<ol start="6">
<li>Now, let's add a new step. Click on <span class="packt_screen">+ New Step</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/3d9bcd15-c3bc-4785-b6cf-a29d60eec859.png"/></p>
<ol start="7">
<li>Select <span class="packt_screen">Built-in</span> and then <span class="packt_screen">Apply to each</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/34a77b57-73b1-4035-a1b4-199bfe9cb033.png"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p style="padding-left: 60px">We will select the Form responses from the <span class="packt_screen">When a new response is submitted</span> <span>trigger</span><span> </span><span>as the output for this</span> <span class="packt_screen">Apply to each</span> <span>action. Basically, for each response that's submitted (in this case, it will be always one; that's just the way that Flow handles the execution), we will do something on the workflow's execution:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/cfb12f1c-ec8d-495b-b9ec-ce7514ca9a97.png"/></p>
<ol start="8">
<li class="CDPAlignLeft CDPAlign">Now, we can create an approval process to validate any response that's submitted before it goes to Dynamics 365 Business Central. Click on <span class="packt_screen">Add an Action</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/e549f3ae-c267-4444-b59d-28272c72b2f9.png"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<ol start="9">
<li>Search for <kbd>Microsoft Forms</kbd> and select <span class="packt_screen">Get response details</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/af1f2f9c-5a2f-49cc-85df-c9445cd53fdd.png"/></p>
<p class="mce-root"/>
<ol start="10">
<li>Select the form that we've created in the <span class="packt_screen">Form Id</span> field and add <span class="packt_screen">List of response notifications Response Id</span> as the <span class="packt_screen">Response Id</span>. This action will fill in all the fields on the form:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/d39e85c4-9e09-4d71-b396-fe978b54e4c5.png"/></p>
<ol start="11">
<li>Now, add a new step by clicking on <span class="packt_screen">Add an action</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/fc761fc8-67c3-4647-89ec-a5e89d9bc053.png"/></p>
<p class="mce-root"/>
<ol start="12">
<li>Search for <kbd>Approvals</kbd> and then <span class="packt_screen">Start and Wait for approval</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/ce414aab-79a9-4401-8fae-cc7d3a03d5ce.png"/></p>
<ol start="13">
<li>The <span class="packt_screen">Approval Type</span> will be <span class="packt_screen">Approve/Reject – First to respond</span> (you can change it to the other one if you want):</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/ae917dd0-3be5-49e7-b209-eee8d16d52dd.png"/></p>
<ol start="14">
<li>You can personalize the approval information that will be sent for the human resources person who's responsible for making a decision about approval:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/aa18f045-c8e0-433b-839e-771ebd2233cb.png" style="width:66.83em;height:41.08em;"/></p>
<p style="padding-left: 60px">In the <span class="packt_screen">Assigned To</span> field, I've used a fixed person, but, if you want, you can create an integration with another application that will set the approver automatically.</p>
<p class="mce-root"/>
<ol start="15">
<li>With the approval configured, we need to handle when the approver completes the approval process. In this example, if it gets approved, we will create this entry on Dynamics 365 Business Central. If it gets rejected, we will send an email to the employee to fill the form in again. For this, add an action:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/f7d7109e-dcf6-467f-a4c2-4b8037ad11ce.png"/></p>
<ol start="16">
<li>Then, select <span class="packt_screen">Condition</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/495d07bb-161e-4d51-8ec5-675beb466790.png" style="width:53.58em;height:26.92em;"/></p>
<p class="mce-root"/>
<ol start="17">
<li>The condition must use the value from <span class="packt_screen">Response</span> (this is a collection of the responses if the approval process handles multiple approvals):</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/1305b680-e180-4d0a-bcf7-b500926adf14.png" style="width:48.58em;height:24.42em;"/></p>
<ol start="18">
<li>We need to check whether the value of this response is equal to <span class="packt_screen">Approve</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/2d9d585e-fefa-4b89-92e5-49c4b8653109.png"/></p>
<ol start="19">
<li>If the statement is true, we will create the entry on Dynamics 365 Business Central and post a message to our Teams channel for onboarding. In the <span class="packt_screen">If yes</span> box, let's add an action:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/f5f6da37-86d7-49df-9718-1ec2c1c7ecd2.png" style="width:52.25em;height:26.25em;"/></p>
<ol start="20">
<li>Search for <kbd>Dynamics 365 Business Central</kbd> and then select <span class="packt_screen">Create item</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/94456ccf-bd8f-40f3-a37b-f975a0fa1287.png" style="width:49.08em;height:24.67em;"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<ol start="21">
<li>Select your company name. Under <span class="packt_screen">Table name</span>, you can see all the tables that we can interact with using Flow. For this scenario, we will use the employees table:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/c2683bd4-11bd-431b-95a4-eb4403642b71.png" style="width:53.25em;height:26.75em;"/></p>
<ol start="22">
<li>After selecting the employees table, we will be able to see all the available fields (all the fields that we can use to send information through <span class="packt_screen">Flow</span>):</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/540fa12d-b281-4329-beb9-ff0c964dc874.png" style="width:50.42em;height:25.33em;"/></p>
<ol start="23">
<li>Let's start picking the data from the Forms response and add it to the right places on the Dynamics 365 Business Central action:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/bcf3d471-b8fb-485c-a0af-30cbf5f32648.png" style="width:50.92em;height:25.58em;"/></p>
<ol start="24">
<li>Now, we will create a post on a Teams channel to inform our human resources team that a new onboarding process has been filed and approved and that the entry has been created on Dynamics 365 Business Central. Go to <span class="packt_screen">Add an Action</span><span>:</span></li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/16ebcf7d-bf8f-4c7a-b359-0a8ee348c7b4.png" style="width:39.50em;height:19.83em;"/></p>
<ol start="25">
<li>Search for <kbd>Microsoft Teams</kbd> and then click on <span class="packt_screen">Post a message as the Flow bot to a channel</span><em>. </em>This will automatically post into a Teams channel as a Flow bot user:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/639d8a12-86a8-45d6-bc2c-1bfbac88c5f6.png"/></p>
<p class="mce-root"/>
<ol start="26">
<li>Select the team and the channel that you want to post to:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/60b25541-f92b-4f93-b822-59f139b58dfd.png" style="width:54.42em;height:27.33em;"/></p>
<ol start="27">
<li>Under <span class="packt_screen">Message</span>, you can add the text that you want to post to Teams:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/b148cb75-f900-4036-8116-b386579f9c76.png" style="width:51.58em;height:25.92em;"/></p>
<p class="mce-root"/>
<ol start="28">
<li>Done! Now, let's add an action when the approval process is rejected. Under <span class="packt_screen">If no</span>, click on <span class="packt_screen">Add an Action</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/d023a3d3-ae09-4730-b8e9-c6495f709db0.png" style="width:46.33em;height:23.25em;"/></p>
<ol start="29">
<li>After this, search for <kbd>Office 365 Outlook</kbd> and then select <span class="packt_screen">Send an email</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/f6371ae7-d01a-4bd3-82b1-23acf68c04f9.png"/></p>
<p class="mce-root"/>
<p style="padding-left: 60px">In the <span class="packt_screen">To</span> field, add the email that was on the form (remember that we are sending an email to the employee, asking them to fill in the form again):</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/a827645f-0b26-4460-abe9-ebb8cebfcf19.png" style="width:47.00em;height:23.58em;"/></p>
<p>You can change the <span class="packt_screen">Subject</span> and <span class="packt_screen">Body</span> so that it contains the content that you want:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/26b56743-38bd-4aae-8422-95d180216a5f.png"/></p>
<p>You can also change the configuration so that this email can handle HTML by setting the <span class="packt_screen">Is HTML</span> <span>option to </span><span class="packt_screen">Yes</span>. </p>
<p>Now, we have the final flow, as shown in the following screenshot. To save it, give this flow a <span class="packt_screen">Name</span> <span>in the top bar </span><span>and click on </span><span class="packt_screen">Save</span><em>.</em> <span>This is shown as follows:</span></p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/9f4517ce-e1de-42dc-8bb2-20f7ee81588c.png" style="width:48.25em;height:24.25em;"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<p>Now, let's try it out:</p>
<ol>
<li>Open the Form that we've created in preview mode, fill it in, and click <span class="packt_screen">Submit</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/84b09740-ce5c-4780-9cbd-1812a852ae36.png"/></p>
<p class="mce-root"/>
<p style="padding-left: 60px">After submitting, this is the response you will obtain:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/d7df6a2d-e27f-4224-96ab-942612027736.png"/></p>
<p class="mce-root"/>
<ol start="2">
<li>Access the human resources account (the one that you selected to be responsible for approving the form) to check that you've received an approval email:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/6aff0c32-bb01-407d-8156-5a532457cbe0.png" style="width:54.00em;height:26.25em;"/></p>
<p style="padding-left: 60px">If you click on <span class="packt_screen">Approve</span>, the workflow will continue creating the employee on Dynamics 365 Business Central with all the data from the form, and it will be posted on Teams:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/25d5eb52-7a36-4ccd-9d10-c1619c2abf69.png" style="width:45.58em;height:22.17em;"/></p>
<p class="mce-root"/>
<ol start="3">
<li>If you have access to your Dynamics 365 Business Central tenant, you will be able to see the <span class="packt_screen">Employee</span> record that's been created:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/5c4eba76-6df2-406f-86e7-2130b7d0bd61.png" style="width:47.83em;height:24.00em;"/></p>
<ol start="4">
<li>Then, if you access your Teams channel, you will be able to see that the approval notification has been posted, as follows:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/235ffdfb-f40e-492f-aafc-c936c49d5196.png"/></p>
<p class="mce-root"/>
<ol start="5">
<li>If you click on <span class="packt_screen">Reject</span>, an email will be sent to the employee, asking them to fill in the form again:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/85bacda6-b0d0-46af-a3e8-443d1f076258.png" style="width:48.83em;height:23.75em;"/></p>
<p style="padding-left: 60px">This is the email that was sent to the employee:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/ca3b81b6-eb32-4307-8d12-60fe1d895466.png" style="width:51.33em;height:27.75em;"/></p>
<p class="mce-root"/>
<p>With that, we have a completely automated workflow for the onboarding process that can be connected with the recruiting process. It can register the new employee on the ERP, notify the IT manager, and so on.</p>
<p>The same approach for creating an item in a table on Dynamics 365 Business Central can also be used for sales order information, purchases, tax, and other data types that you have on Dynamics 365 Business Central.</p>
<p>In this section, you've seen how easy it is to create custom workflows by using Flow with Dynamics 365 Business Central. We've successfully completed this scenario without writing a single line of code.</p>
<p>In the next section, we'll learn how to implement an approval workflow for sales orders in <span>the</span><span> </span><span>Dynamics 365 Business Central ERP using Flow.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Scenario 2 – creating a simple sales order approval workflow</h1>
                </header>
            
            <article>
                
<p>In this scenario, we will create a simple sales order approval workflow in Dynamics 365 Business Central using the templates provided by Microsoft to handle an approval for our sales orders.</p>
<div class="packt_infobox"><strong>Technologies Used:</strong> Flow and Dynamics 365 Business Central.</div>
<p>To start creating a custom approval workflow, you can start directly from the ERP side, as follows:</p>
<ol>
<li>On Dynamics 365 Business Central, go to the <span class="packt_screen">Sales</span> menu and click on <span class="packt_screen">Sales Orders</span>. Now, click on <span class="packt_screen">New</span> and, on the <span class="packt_screen">New Order</span> page, click on <span class="packt_screen">Request Approval</span> and then click on <span class="packt_screen">Create a Flow</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/398f7097-35e2-426b-9418-2a124fcc3c51.png" style="width:51.92em;height:26.08em;"/></p>
<ol start="2">
<li>Flow templates will be presented to you, and you can select the templates that are the <span>best </span>fit for your process. Let's select the workflow called <span class="packt_screen">Request Approval for Dynamics 365 Business Central sales order</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/5387fd1b-22f2-4a28-b384-7eb0abf3d9ba.png"/></p>
<ol start="3">
<li>You can change the workflow so that it does exactly what your process needs, including the information related to the sales order, the approvers for the approval process, and the path that the workflow will take (depending on the replies):</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/5236d149-aad2-41f2-a37f-ee7f671ac1ad.png"/></p>
<p class="mce-root"/>
<ol start="4">
<li>Here, we can select the details of the request (see the fields in the following screenshot):</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/bd7a3d0c-8e65-48ab-842f-2dddfe69b481.png"/></p>
<ol start="5">
<li>Then, we can select the action (if approved) and save the workflow:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/5764b34c-ae01-46ad-8db7-c6d12ff72a0d.png" style="width:55.83em;height:28.08em;"/></p>
<p class="mce-root"/>
<ol start="6">
<li>Now, go back to the Sales Order screen. Let's select an existing sales order, select <span class="packt_screen">Request Approval</span>, and then click on <em><span class="packt_screen">Send Approval Request</span></em> (Dynamics 365 Business Central will check if a workflow has already been configured and will use it when the user clicks on <span class="packt_screen">Send Approval Request</span>):</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/242b600c-2e93-4a7e-beac-544a237a01e1.png" style="width:62.67em;height:31.50em;"/></p>
<p class="mce-root"/>
<ol start="7">
<li>The workflow has started, and the approver should receive a notification to approve/reject that sales order:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/ee27718f-4163-42c2-b170-fce599b514b8.png" style="width:63.00em;height:30.58em;"/></p>
<p>As a final result, we have created with few simple steps a workflow that permits to approve Dynamics 365 Business Central documents (like Sales Orders) directly via email. As mentioned previously, we can change the entire behavior of this approval process with a few clicks and make this workflow work in whatever way best suits our business needs.</p>
<p>This is a simple way of creating a workflow for a sales order that can be <span>easily </span><span>used for other types of data on Dynamics 365 Business Central.</span></p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Scenario 3 – creating a simple app to list all customers and sales quotes</h1>
                </header>
            
            <article>
                
<p>In this scenario, we are going to create an app on PowerApps that will connect to our Dynamics 365 Business Central environment, list all customers, and, for the selected customer, list their sales quotes. This app can be used in a browser or a mobile device.</p>
<div class="packt_infobox"><strong>Technologies Used</strong>: PowerApps and Dynamics 365 Business Central.</div>
<p>To start creating our application, perform the following steps:</p>
<ol start="1">
<li>Open <span class="packt_screen">PowerApps Studio</span> with your Office 365 account at <a href="http://web.powerapps.com">http://web.powerapps.com.</a> There are different ways to build apps in PowerApps; we are going to use the <strong>Canvas</strong> app from a blank template so that we can build an app for a mobile phone layout from scratch. Click on <span class="packt_screen">Canvas app from blank</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/02dc42e4-a710-452c-a5b3-8de451cbcc76.png" style="width:66.25em;height:32.17em;"/></p>
<ol start="2">
<li>Come up with a name for your app, select the format that you want (in this example, we will use the <span class="packt_screen">Phone</span> format), and click on <span class="packt_screen">Create</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/1de352a9-f728-410e-91e6-a345bfe9af08.png" style="width:65.58em;height:31.83em;"/></p>
<p class="mce-root"/>
<p style="padding-left: 60px">As soon as the application is created, you will be redirected to <span class="packt_screen">PowerApps Studio</span>, where we will start to build the components for our app.</p>
<p style="padding-left: 60px">We need to connect our app to Dynamics 365 Business Central by adding a data source on PowerApps using an existing connector. The <em>connector</em> concept here is the same as it is in Flow. Microsoft uses the same concept in all of the Power Platform applications.</p>
<ol start="3">
<li>From the top navigation menu, select <span class="packt_screen">View</span> and then click on <span class="packt_screen">Data Sources</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/feaf755e-d5d8-4e1d-a4f1-8c3942a5d806.png" style="width:45.08em;height:21.92em;"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<ol start="4">
<li><span>Now, </span>add a data source. If you have already created a connection with Dynamic 365 Business Central (or other platforms) in any other Power Platform application, you can select the connection directly from the list that appears.</li>
<li>If you haven't created a connection with Dynamics 365 Business Central (or other platforms) in any other Power Platform application previously, click on <span class="packt_screen">+ New connection</span>, search for <kbd>Business Central</kbd>, and select the <span class="packt_screen">Business Central Connector</span>, as follows:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/58ad9522-02c6-4121-ad35-fb886f45d320.png"/></p>
<ol start="6">
<li>Now, click on <span class="packt_screen">Create</span>. By creating the connection (or selecting an existing one) with Dynamics 365 Business Central, you need to select the dataset that you want to use:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/86051d20-a3bf-45f2-9b3c-f3bdb8a2b195.png"/></p>
<ol start="7">
<li>Now, we can select which table from Dynamics 365 Business Central we want to use in the app. In our example, we will select the <span class="packt_screen">customers</span> table and the <span class="packt_screen">salesQuotes</span> table, and then click on <span class="packt_screen">Connect</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/b86ecf70-632e-4141-bd4d-cb21a7d71dd2.png" style="width:50.75em;height:24.67em;"/></p>
<p style="padding-left: 60px">The connection has been made. Now, we can start adding the controls to our app to consume those connections.</p>
<p class="mce-root"/>
<ol start="8">
<li>In the top navigation menu, go to the <span class="packt_screen">Insert</span> tab and, in <span class="packt_screen">Controls</span>, select the <span class="packt_screen">Drop down</span> control:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/a91d7f5a-0384-4065-82c8-e7fbe6b793e9.png" style="width:49.50em;height:24.08em;"/></p>
<ol start="9">
<li>By default, the data source for this dropdown will be an example, but we can change this by going to the right panel, going to the <span class="packt_screen">Items</span> property, and selecting the customers table from Dynamics 365 Business Central:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/9e3ae458-ccc0-4803-9a31-3ae9da677be3.png" style="width:52.58em;height:25.58em;"/></p>
<p class="mce-root"/>
<ol start="10">
<li>In the <span class="packt_screen">Value</span> property, we can select which value from the customers table we want to display to the end user on the dropdown; let's select <span class="packt_screen">displayName</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/7ed7dfc5-7978-4a11-bc3d-73232b0adb6b.png" style="width:49.83em;height:24.17em;"/></p>
<ol start="11">
<li>At this point, we are going to add a new control to show all the sales orders to that selected customer so that, every time we change the customer on the dropdown, it loads all the sales orders for the selected customer. In the <span class="packt_screen">Insert</span> tab, click on the <span class="packt_screen">Gallery</span> and select <span class="packt_screen">Vertical Gallery</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/6a7e1d33-9334-49ae-8b56-9aaf8130db91.png" style="width:49.50em;height:24.08em;"/></p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<p style="padding-left: 60px">Once you have selected the gallery, you need to select the data source for this gallery. This is pretty much the same concept that we covered for the dropdown menu a few steps ago. </p>
<ol start="12">
<li>In the <span class="packt_screen">Items</span> property, select the <span class="packt_screen">salesOrder</span> data source:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/0da2a900-4bdf-4eaf-b68e-2818c3a9fb10.png" style="width:52.75em;height:25.67em;"/></p>
<ol start="12">
<li>Now, we can select which layout our gallery will use and which fields will be displayed there. In the <span class="packt_screen">Layout</span> property, select the template called <span class="packt_screen">Title, subtitle, and body</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/2fc23548-b028-4a17-a78a-d036516efaf0.png" style="width:50.75em;height:24.67em;"/></p>
<ol start="14">
<li>In the <span class="packt_screen">Data</span> section, <span>select </span><span class="packt_screen">number</span><em> </em>for the <span class="packt_screen">Title2</span> property. In the <span class="packt_screen">Subtitle2</span> property, select <span class="packt_screen">status</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/e848e2fd-d93b-45f6-9c1d-7ea2a594bd18.png" style="width:48.67em;height:23.67em;"/></p>
<p>In the same way, in the <span class="packt_screen">Body1</span> property, select <span class="packt_screen">totalAmountExcludingTax</span>.</p>
<p class="mce-root"/>
<p>Now, we need to make sure that a filter will be applied to show only the sales orders for the customer that's <span>selected </span>from the dropdown. By default, when we select a data source, the data will be retrieved without any filters.</p>
<p>To do that, refer to the following screenshot:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/d69fd604-2cb6-4efd-9ecb-6438cc041438.png" style="width:49.00em;height:23.83em;"/></p>
<p><span>Click on the</span> <span class="packt_screen">gallery</span><span>. In the control properties pane, select the</span> <span class="packt_screen">Items</span><em> </em><span>property. I</span><span>n the functions bar, we need to change the function to filter the data from the data source by using a command called </span><kbd>Filter()</kbd>.</p>
<div class="packt_infobox">You can find more detailed information about this at <a href="https://docs.microsoft.com/en-us/powerapps/maker/canvas-apps/functions/function-filter-lookup">https://docs.microsoft.com/en-us/powerapps/maker/canvas-apps/functions/function-filter-lookup</a>.</div>
<p>Let's use the following <kbd>Filter</kbd> formula:</p>
<pre>Filter(salesOrders, Text(customerId) = Text(Dropdown1.Selected.id))</pre>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<p>The filter formula is shown here:</p>
<p class="CDPAlignCenter CDPAlign"><img src="assets/5081c7cc-5115-4c0e-8037-20b75695d141.png" style="width:52.08em;height:25.33em;"/></p>
<p>Let's take a look at what this formula is all about.</p>
<p>The <kbd>Filter</kbd> function requires <span>the data source </span>as its first parameter, which, in this case, will be the <span class="packt_screen">salesOrder</span> table from Dynamics 365 Business Central.</p>
<p>The second parameter for the <kbd>Filter</kbd> function is the logical test. In this case, we will check whether the <kbd>customerId</kbd> from the <kbd>salesOrder</kbd> table is equal to the <kbd>id</kbd> from the <span>item</span><span> we </span><span>selected</span><span> in </span><kbd>Dropdown1</kbd><span>, which is the item we selected from the customers table on Dynamics 365 Business Central.</span></p>
<p>In this case, we are using the <kbd>Text()</kbd> function to convert both parameters into text so that they can be compared.</p>
<p>Now, every time the dropdown is changed for the user, the filter will be applied and the sales orders will be filtered by the value that's selected in the dropdown.</p>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mce-root"/>
<p class="mceNonEditable"/>
<p>Now, we just need to save the app. To do this, follow these steps:</p>
<ol>
<li>In the top navigation menu, go to <span class="packt_screen">File</span>, type in the name of your app, change the icon (if you want), and click on <span class="packt_screen">Save</span>:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/fdead6dc-8ae0-4684-a17d-b0fb71beac2a.png" style="width:49.83em;height:24.25em;"/></p>
<ol start="2">
<li>Now, go back to the app and run our application. To start the app, click on the play icon in the top-right corner:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/a9a9af5a-121a-49a4-852d-c9bc78519de8.png" style="width:48.00em;height:23.33em;"/></p>
<p class="mce-root"/>
<ol start="3">
<li>Select some other customers from the dropdown to check that the filter has been applied:</li>
</ol>
<p class="CDPAlignCenter CDPAlign"><img src="assets/7cb3b666-909a-447c-96bf-847b87c4e0b7.png" style="width:24.42em;height:20.33em;"/></p>
<p>With that, we have an app that's integrated with Dynamics 365 Business Central that can be changed to fit the other processes and needs of our business.</p>
<p>With PowerApps, we have quickly implemented an application that is able to work on a browser and on a mobile device that can be shared with our entire organization and that can be secured by our IT administrator.</p>


            </article>

            
        </section>
    

        <section>

                            <header>
                    <h1 class="header-title">Summary</h1>
                </header>
            
            <article>
                
<p>In this chapter, we had an overview of the Microsoft Power Platform, with a special focus on two important applications: Microsoft Flow and Microsoft PowerApps.</p>
<p>We saw the implementation of three real-world business scenarios by integrating Microsoft Dynamics 365 Business Central with <em>Flow</em> and <em>PowerApps</em>, and all of this was done with zero coding. This is the power of this business platform!</p>
<p>We also learned how to embrace the entire Dynamics 365 platform in order to extend our ERP solutions and create modern business applications.</p>
<p>In the next chapter, we'll look at another interesting integration scenario: how to use Dynamics 365 Business Central with machine learning.</p>


            </article>

            
        </section>
    </body></html>